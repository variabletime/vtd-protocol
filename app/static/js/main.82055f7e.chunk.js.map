{"version":3,"sources":["utils/storage.ts","utils/infura.js","constants/tokens.js","constants/values.js","utils/number.ts","components/common/AddressBlock.tsx","components/common/BalanceBlock.tsx","components/common/StatsRowItem.tsx","components/common/SectionTitle.tsx","components/common/MaxButton.tsx","components/common/PriceSection.tsx","components/common/Comment.tsx","components/common/Wrapper.tsx","components/common/CheckBox.tsx","components/Wallet/Header.tsx","utils/txNotifier.ts","utils/web3.js","components/common/BigNumberInput.tsx","components/Pool/WithdrawDeposit.tsx","components/common/TextBlock.tsx","components/Pool/BondUnbond.tsx","components/Pool/Header.tsx","components/Pool/Claim.tsx","components/Pool/Provide.tsx","store/MainStore.tsx","components/Pool/index.tsx","components/Pool/EmptyPool.tsx","components/Wallet/WithdrawDeposit.tsx","components/Wallet/BondUnbond.tsx","store/EpochStore.tsx","components/Wallet/MomentumHeader.tsx","components/EpochDetail/index.tsx","components/Wallet/index.tsx","components/Stats/index.tsx","components/CouponMarket/Header.tsx","components/CouponMarket/PurchaseCoupons.tsx","components/CouponMarket/PurchaseHistory.tsx","components/CouponMarket/ModalWarning.tsx","components/CouponMarket/index.tsx","components/Governance/Header.tsx","utils/gov.ts","components/Governance/ProposeCandidate.tsx","components/Governance/CandidateHistory.tsx","components/Governance/index.tsx","components/Candidate/Vote.tsx","components/Candidate/VoteHeader.tsx","components/common/NumberBlock.tsx","components/Candidate/CommitHeader.tsx","components/Candidate/Commit.tsx","components/common/IconHeader.tsx","components/Candidate/index.tsx","components/Regulation/Header.tsx","components/Regulation/RegulationHistory.tsx","components/Regulation/index.tsx","components/HomePageNoWeb3/index.tsx","theme/index.js","components/layout/sidebar/active-link.tsx","components/layout/sidebar/side-item.tsx","utils/txStatus.ts","components/layout/sidebar/PendingTx.tsx","components/layout/sidebar/index.tsx","components/layout/sidebar/tabbar-mobile.tsx","components/layout/sidebar/ConnectModal.tsx","components/layout/sidebar/ConnectButton.tsx","components/layout/layout.tsx","App.tsx","serviceWorker.js","index.tsx"],"names":["getPreference","key","defaultValue","localStorage","getItem","storePreference","value","setItem","web3","VTD","VTDD","MAX_UINT256","BigNumber","pow","minus","GOVERNANCE_QUORUM","SUPERMAJORITY","GOVERNANCE_PROPOSAL_THRESHOLD","dollarAbi","require","daoAbi","oldRegulationsAbi","poolAbi","uniswapPairAbi","undefined","window","ethereum","Web3","getTokenBalance","token","account","a","tokenContract","eth","Contract","methods","balanceOf","call","getTokenTotalSupply","totalSupply","getTokenAllowance","spender","allowance","getBalanceBonded","dao","daoContract","balanceOfBonded","getBalanceOfStaged","balanceOfStaged","getStatusOf","statusOf","getFluidUntil","fluidUntil","getLockedUntil","lockedUntil","getEpoch","epoch","getEpochTime","epochTime","getNextEpochTimestamp","nextEpochTimestamp","getCurrentEpochLength","currentEpochLength","getTotalDebt","totalDebt","getTotalRedeemable","totalRedeemable","getTotalCoupons","totalCoupons","getTotalBonded","totalBonded","getTotalStaged","totalStaged","getTotalBondedAt","totalBondedAt","getApproveFor","candidate","approveFor","getRejectFor","rejectFor","getStartFor","startFor","getPeriodFor","periodFor","getIsInitialized","isInitialized","getRecordedVote","recordedVote","getBalanceOfCoupons","balanceOfCoupons","getBatchBalanceOfCoupons","epochs","calls","map","Promise","all","getCouponsExpiration","couponsExpiration","getBatchCouponsExpiration","getCouponPremium","amount","couponPremium","toFixed","getImplementation","implementation","getCouponEpochs","purchaseP","getPastEvents","filter","fromBlock","transferP","to","bought","given","events","e","returnValues","couponAmount","concat","couponEpochs","reduce","event","prev","get","set","coupons","plus","Map","values","sort","b","getAllProposals","payload","prop","blockNumber","getAllRegulations","oldDaoContract","increaseP","decreaseP","neutralP","increase","decrease","neutral","oincreaseP","odecreaseP","oneutralP","oincrease","odecrease","oneutral","type","data","sorted","getReserves","pairAddress","exchange","getInstantaneousPrice","counterTokenAddr","getToken0","reserve","token0","token0Balance","_reserve0","token1Balance","_reserve1","toLowerCase","dividedBy","getPoolStatusOf","pool","poolContract","getPoolBalanceOfBonded","getPoolBalanceOfStaged","getPoolBalanceOfRewarded","balanceOfRewarded","getPoolBalanceOfClaimable","balanceOfClaimable","getPoolTotalBonded","getPoolTotalRewarded","totalRewarded","getPoolTotalClaimable","totalClaimable","getPoolFluidUntil","getBlockNumber","bondP","unbondP","bond","unbond","startEpoch","start","parseInt","toString","toBaseUnitBN","rawAmt","decimals","raw","base","decimalsBN","times","integerValue","toTokenUnitsBN","tokenAmount","tokenDecimals","amt","digits","div","isPos","isZero","isPositive","ownership","balance","multipliedBy","formatBN","position","isLessThan","bnStr","includes","parts","split","i","length","pad","precision","ROUND_FLOOR","replace","delineate","formatMoney","n","toPrecision","Math","abs","Number","AddressBlock","label","address","style","fontSize","padding","IdentityBadge","entity","shorten","BalanceBlock","asset","suffix","integer","balanceBN","gte","tokens","StatsRowItem","display","lineHeight","flex","backgroundPosition","backgroundSize","backgroundImage","backgroundRepeat","SectionTitle","MaxButton","onClick","ButtonBase","opacity","PriceSection","symbol","forceDisplay","amtBN","gt","toNumber","Comment","styled","MyCheckBox","text","checked","onCheck","theme","useTheme","CheckBoxWrapper","Checkbox","onChange","margin","props","surfaceContentSecondary","fm","bn","STATUS_MAP","status","accountStatus","unlocked","AccountPageHeader","accountVTDBalance","accountVTDSBalance","totalVTDSSupply","accountStagedBalance","accountBondedBalance","flexWrap","alignItems","justifyContent","notify","v","console","log","testnetUSDCAbi","UINT256_MAX","connect","getAccounts","addresses","enable","checkConnectedAndGetAddress","approve","tokenAddr","oToken","send","from","on","hash","advance","tryAdvance","deposit","withdraw","unbondUnderlying","purchaseCoupons","redeemCoupons","recordVote","voteType","vote","commit","depositPool","callback","withdrawPool","bondPool","unbondPool","claimPool","claim","providePool","provide","BigNumberInput","setter","adornment","disabled","TextInput","adornmentPosition","wide","isNegative","target","onBlur","WithdrawDeposit","poolAddress","user","stagedBalance","peg","useState","depositAmount","setDepositAmount","withdrawAmount","setWithdrawAmount","Box","heading","paddingTop","comparedTo","width","minWidth","Button","icon","IconCirclePlus","IconLock","pair","flexBasis","IconCircleMinus","addr","TextBlock","BondUnbond","staged","bonded","lockup","bondAmount","setBondAmount","unbondAmount","setUnbondAmount","IconCaution","textAlign","PoolPageHeader","accountUNIBalance","accountRewardedVTDBalance","accountClaimableVTDBalance","poolTotalBonded","accountPoolStatus","xs","sm","Claim","claimable","claimAmount","setClaimAmount","IconArrowDown","Provide","rewarded","pairBalanceVTD","pairBalancePeg","userPEGBalance","userPEGAllowance","provideAmount","setProvideAmount","usdcAmount","setUsdcAmount","PEGToVTDRatio","onChangeAmountVTD","amountVTD","amountVTDBN","amountVTDBU","newAmountPEG","IconArrowUp","isGreaterThan","initialPeggedTokens","name","oracle","usdcPair","enabled","stats","vtdBalance","pegBalance","poolReward","poolClaimable","price","usdcPrice","initialTotals","totalLPSupply","totalLPBonded","circulating","totalCoupon","MainContext","React","createContext","MainStoreProvider","children","peggedTokens","setPeggedTokenPools","totals","setTotals","updateTotals","totalSupplyStr","totalBondedStr","totalStagedStr","totalRedeemableStr","totalDebtStr","totalCouponsStr","poolTotal","totalLiquidityPoolSupply","forEach","newTotals","Provider","updatePools","multiplier","rawUsdcPrice","_peg","Pool","override","useParams","setPoolAddress","userUNIBalance","setUserUNIBalance","userUNIAllowance","setUserUNIAllowance","setUserPEGBalance","setUserPEGAllowance","userStagedBalance","setUserStagedBalance","userBondedBalance","setUserBondedBalance","userRewardedBalance","setUserRewardedBalance","userClaimableBalance","setUserClaimableBalance","userStatus","setUserStatus","userStatusUnlocked","setUserStatusUnlocked","tokensPanelOpened","setTokensPanelOpened","rewardPanelOpened","setRewardPanelOpened","downMD","useContext","useMediaQuery","match","useEffect","isCancelled","updateUserInfo","poolAddressStr","usdcBalance","usdcAllowance","bondedBalance","rewardedBalance","claimableBalance","fluidUntilStr","id","setInterval","clearInterval","background","palette","accents_1","Container","gap","justify","md","y","size","ghost","open","SidePanel","title","opened","onClose","EmptyPool","flexDirection","EpochContext","EpochStoreProvider","regulations","setRegulations","updateRegulations","allRegulations","_regs","result","index","momentumPrice","deltaRedeemable","deltaDebt","deltaBonded","MomentumHeader","downLG","upSM","regs","reverse","slice","prices","reg","labels","x","nextChange","price_data","datasets","backgroundColor","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","borderWidth","hoverBackgroundColor","hoverBorderColor","options","scales","yAxes","ticks","xAxes","span","height","legend","shadow","color","Footer","EpochDetail","setEpoch","setEpochTime","setNextEpochTimestamp","setCurrentEpochLength","advanceMode","setAdvanceMode","endDate","calcAdvanceMode","now","Date","currentEpochLengthFmt","d","h","floor","m","s","secondsToHms","epochStr","epochTimeStr","nextEpochTimestampStr","currentEpochLengthStr","marginTop","Content","Subtitle","accents_4","Timer","showEmpty","format","end","Status","Text","Actions","auto","Wallet","sidePanelOpened","setSidePanelOpened","userVTDBalance","setUserVTDBalance","userVTDAllowance","setUserVTDAllowance","userVTDSBalance","setUserVTDSBalance","setTotalVTDSSupply","vtdAllowance","vtdsBalance","vtdsSupply","lockedUntilStr","max","accents_2","ONE_COUPON","Stats","setCouponPremium","marketcap","totalYield","delta","daoYield","compound","rate","days","real_rate","LPYield","share","supply","vtdPrice","lp_size","calcLinearYield","couponPremiumStr","peggedToken","hasOwnProperty","marginLeft","CouponMarketHeader","debt","premium","redeemable","PurchaseCoupons","purchaseAmount","setPurchaseAmount","setPremium","updatePremium","lte","purchaseAmountBase","premiumFormatted","maxPurchaseAmount","PurchaseHistory","hideRedeemed","setEpochs","page","setPage","initialized","setInitialized","epochsFromEvents","epochNumbers","couponsExpirations","expiration","DataView","fields","entries","entriesPerPage","onPageChange","renderEntry","ModalWarning","storedShowWarning","showWarning","setShowWarning","Modal","visible","closeButton","warning","warningSurfaceContent","CouponMarket","storedHideRedeemed","setBalance","setAllowance","setSupply","setCoupons","setRedeemable","setDebt","setHideRedeemed","balanceStr","allowanceStr","userBalance","supplyStr","debtStr","couponsStr","redeemableStr","alignSelf","CheckBox","GovernanceHeader","stake","totalStake","proposalStatus","period","reject","total","canPropose","plausibleCandidate","test","ProposeCandidate","setCandidate","IconToken","formatProposals","proposals","currentTotalStake","p","initializeds","approves","rejecteds","at","supplyAts","CandidateHistory","history","useHistory","setProposals","allProposals","formattedProposals","proposal","IconRight","push","Governance","setStake","setTotalStake","setImplementation","statusStr","stakeStr","totalStakeStr","implementationStr","VOTE_TYPE_MAP","Vote","IconRotateLeft","IconCircleCheck","IconProhibited","participation","dividedToIntegerBy","VoteHeader","showParticipation","NumberBlock","num","numNum","CommitHeader","periodEpoch","Commit","approved","IconUpload","IconHeader","marginRight","primary","Candidate","setApproveFor","setRejectFor","setVote","setStatus","userStake","setUserStake","setStartEpoch","setPeriodEpoch","voteStr","userStakeStr","approveForStr","rejectForStr","startForStr","periodForStr","epochN","startN","periodN","endsAfter","className","RegulationHeader","daoTotalSupply","Distribution","items","item","percentage","formatPrice","epochtype","formatMomentumPrice","formatDeltaRedeemable","newRedeemable","formatDeltaDebt","lessDebt","newDebt","formatDeltaBonded","newBonded","RegulationHistory","Regulation","setTotalSupply","setTotalBonded","setTotalStaged","setTotalRedeemable","setTotalDebt","setTotalCoupons","Split","secondary","MainButton","description","tag","Tag","HomePageNoWeb3","location","vtdTheme","ActiveLink","memo","href","useMemo","subtitle","listen","pathname","accents_5","accents_7","success","successLight","SideItem","sides","side","localeName","layout","breakpointMobile","border","url","waitTransaction","txnHash","interval","blocksToWait","transactionReceiptAsync","resolve","receipt","getTransactionReceipt","setTimeout","resolvedReceipt","getBlock","block","number","getTransaction","Error","Array","isArray","promises","oneTxHash","PendingTxButton","pendingTxVisible","setPendingTxVisible","pendingTxStr","setPendingTxStr","opener","setOpener","handleOpenerRef","useCallback","node","_tx","removeItem","tick","ref","fontFamily","borderRadius","LoadingRing","TransactionProgress","transactionHashUrl","SideGroup","Sidebar","boxRef","useRef","PendingTx","TabbarMobile","accents_6","ConnectModal","onConnect","wallet","useWallet","zIndex","src","alt","ConnectButton","hasWeb3","setUser","reset","isModalOpen","setModalOpen","connectWeb3","disconnectWeb3","toggleModal","minHeight","IconConnect","Layout","expanded","setExpanded","top","App","setHasWeb3","chainId","connectors","walletconnect","rpcUrl","walletlink","appName","appLogoUrl","Theme","path","Boolean","hostname","Moment","locale","momentLocalizer","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.82055f7e.chunk.js","sourcesContent":["/**\n * Get value by key\n * @param {string} key\n * @param {string} defaultValue\n */\nexport function getPreference(key:string, defaultValue:string): string {\n  return localStorage.getItem(key) || defaultValue;\n}\n\n/**\n * store value to storage\n * @param {string} key\n * @param {string} value\n */\nexport function storePreference(key:string, value:string):void {\n  localStorage.setItem(key, value);\n}\n","import Web3 from 'web3';\n\nimport BigNumber from 'bignumber.js';\nimport { UniswapV2Router02 } from '../constants/contracts';\nimport { VTD} from '../constants/tokens';\nimport { POOL_EXIT_LOCKUP_EPOCHS } from '../constants/values';\n\nconst dollarAbi = require('../constants/abi/Dollar.json');\nconst daoAbi = require('../constants/abi/Implementation.json');\nconst oldRegulationsAbi = require('../constants/abi/OldRegulationsDao.json');\nconst oracleAbi = require('../constants/abi/Oracle.json');\nconst poolAbi = require('../constants/abi/Pool.json');\nconst uniswapRouterAbi = require('../constants/abi/UniswapV2Router02.json');\nconst uniswapPairAbi = require('../constants/abi/UniswapV2Pair.json');\n\nlet web3;\n// eslint-disable-next-line no-undef\nif (window.ethereum !== undefined) {\n  // eslint-disable-next-line no-undef\n  web3 = new Web3(ethereum);\n}\n\n/**\n *\n * @param {string} token address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getTokenBalance = async (token, account) => {\n  if (account === '') return '0';\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\n  return tokenContract.methods.balanceOf(account).call();\n};\n\nexport const getTokenTotalSupply = async (token) => {\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\n  return tokenContract.methods.totalSupply().call();\n};\n\n/**\n *\n * @param {string} token\n * @param {string} account\n * @param {string} spender\n * @return {Promise<string>}\n */\nexport const getTokenAllowance = async (token, account, spender) => {\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\n  return tokenContract.methods.allowance(account, spender).call();\n};\n\n// Døllar Protocol\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getBalanceBonded = async (dao, account) => {\n  if (account === '') return '0';\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.balanceOfBonded(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getBalanceOfStaged = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.balanceOfStaged(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getStatusOf = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.statusOf(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getFluidUntil = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.fluidUntil(account).call();\n  return ''\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getLockedUntil = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.lockedUntil(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getEpoch = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.epoch().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getEpochTime = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.epochTime().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getNextEpochTimestamp = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.nextEpochTimestamp().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getCurrentEpochLength = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.currentEpochLength().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalDebt = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalDebt().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalRedeemable = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalRedeemable().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalCoupons = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalCoupons().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalBonded = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalBonded().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalStaged = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalStaged().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number} epoch number\n * @return {Promise<string>}\n */\nexport const getTotalBondedAt = async (dao, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalBondedAt(epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getApproveFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.approveFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getRejectFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.rejectFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getStartFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.startFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getPeriodFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.periodFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<boolean>}\n */\nexport const getIsInitialized = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.isInitialized(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getRecordedVote = async (dao, account, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.recordedVote(account, candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @param {number} epoch number\n * @return {Promise<string>}\n */\nexport const getBalanceOfCoupons = async (dao, account, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.balanceOfCoupons(account, epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @param {number[]} epochs number[]\n * @return {Promise<string[]>}\n */\nexport const getBatchBalanceOfCoupons = async (dao, account, epochs) => {\n  const calls = epochs.map((epoch) => getBalanceOfCoupons(dao, account, epoch));\n  return Promise.all(calls);\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number} epoch address\n * @return {Promise<string>}\n */\nexport const getOutstandingCoupons = async (dao, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.outstandingCoupons(epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number} epoch number\n * @return {Promise<string>}\n */\nexport const getCouponsExpiration = async (dao, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.couponsExpiration(epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number[]} epochs number[]\n * @return {Promise<string[]>}\n */\nexport const getBatchCouponsExpiration = async (dao, epochs) => {\n  const calls = epochs.map((epoch) => getCouponsExpiration(dao, epoch));\n  return Promise.all(calls);\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string|BigNumber} amount uint256\n * @return {Promise<string>}\n */\nexport const getCouponPremium = async (dao, amount) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.couponPremium(new BigNumber(amount).toFixed()).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getImplementation = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.implementation().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getPool = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.pool().call();\n};\n\n/**\n *\n * @param {string} dao\n * @param {string} account\n * @return {Promise<any[]>}\n */\nexport const getCouponEpochs = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  const purchaseP = daoContract.getPastEvents('CouponPurchase', {\n    filter: { account },\n    fromBlock: 0,\n  });\n  const transferP = daoContract.getPastEvents('CouponTransfer', {\n    filter: { to: account },\n    fromBlock: 0,\n  });\n  const [bought, given] = await Promise.all([purchaseP, transferP]);\n  const events = bought.map((e) => ({epoch: e.returnValues.epoch, amount: e.returnValues.couponAmount}))\n    .concat(given.map((e) => ({epoch: e.returnValues.epoch, amount: 0})));\n\n  const couponEpochs = [\n    ...events.reduce(\n      (map, event) => {\n        const { epoch, amount } = event;\n        const prev = map.get(epoch);\n\n        if (prev) {\n          map.set(epoch, { epoch, coupons: prev.coupons.plus(new BigNumber(amount)) });\n        } else {\n          map.set(epoch, { epoch, coupons: new BigNumber(amount) });\n        }\n\n        return map;\n      },\n      new Map(),\n    ).values(),\n  ];\n\n  return couponEpochs.sort((a, b) => a - b);\n};\n\n/**\n *\n * @param {string} dao\n * @return {Promise<any[]>}\n */\nexport const getAllProposals = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  const payload = (await daoContract.getPastEvents('Proposal', {\n    fromBlock: 0,\n  })).map((event) => {\n    const prop = event.returnValues;\n    prop.blockNumber = event.blockNumber;\n    return prop;\n  });\n  return payload.sort((a, b) => b.blockNumber - a.blockNumber);\n};\n\n/**\n *\n * @param {string} dao\n * @return {Promise<any[]>}\n */\nexport const getAllRegulations = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  const oldDaoContract = new web3.eth.Contract(oldRegulationsAbi, dao);\n  \n  const increaseP = daoContract.getPastEvents('SupplyIncrease', { fromBlock: 0 });\n  const decreaseP = daoContract.getPastEvents('SupplyDecrease', { fromBlock: 0 });\n  const neutralP = daoContract.getPastEvents('SupplyNeutral', { fromBlock: 0 });\n\n  let [increase, decrease, neutral] = await Promise.all([increaseP, decreaseP, neutralP]);\n\n  const oincreaseP = oldDaoContract.getPastEvents('SupplyIncrease', { fromBlock: 0 });\n  const odecreaseP = oldDaoContract.getPastEvents('SupplyDecrease', { fromBlock: 0 });\n  const oneutralP = oldDaoContract.getPastEvents('SupplyNeutral', { fromBlock: 0 });\n\n  const [oincrease, odecrease, oneutral] = await Promise.all([oincreaseP, odecreaseP, oneutralP]);\n\n  increase= increase.concat(oincrease)\n  decrease= decrease.concat(odecrease)\n  neutral = neutral.concat(oneutral)\n\n\n  const events = increase.map((e) => ({ type: 'INCREASE', data: e.returnValues }))\n    .concat(decrease.map((e) => ({ type: 'DECREASE', data: e.returnValues })))\n    .concat(neutral.map((e) => ({ type: 'NEUTRAL', data: e.returnValues })));\n\n  const sorted = events.sort((a, b) => b.data.epoch - a.data.epoch);\n  return sorted;\n};\n\n/**\n *\n * @param {string} dao\n * @return {Promise<any>}\n */\nexport const getPoolDistributions = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.updateLiquidityForAllPools().call();;\n};\n\n/**\n *\n * @param {string} oracle\n * @return {Promise<any>}\n */\nexport const getOracleTwap = async (oracle) => {\n  const oracleContract = new web3.eth.Contract(oracleAbi, oracle);\n  return oracleContract.methods.getLastPrice().call();;\n};\n\n// Uniswap Protocol\n\nexport const getCost = async (amount, counterTokenAddr) => {\n  const exchange = new web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  // eslint-disable-next-line no-unused-vars\n  const [inputAmount, _] = await exchange.methods.getAmountsIn(\n    new BigNumber(amount).toFixed(),\n    [counterTokenAddr, VTD.addr],\n  ).call();\n  return inputAmount;\n};\n\nexport const getProceeds = async (amount, counterTokenAddr) => {\n  const exchange = new web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  // eslint-disable-next-line no-unused-vars\n  const [_, outputAmount] = await exchange.methods.getAmountsOut(\n    new BigNumber(amount).toFixed(),\n    [VTD.addr, counterTokenAddr],\n  ).call();\n  return outputAmount;\n};\n\nexport const getReserves = async (pairAddress) => {\n  const exchange = new web3.eth.Contract(uniswapPairAbi, pairAddress);\n  return exchange.methods.getReserves().call();\n};\n\n// export const getTWAP = async () => {\n//   const exchange = new web3.eth.Contract(uniswapPairAbi, UNI.addr);\n//   // const [_, price0] = await exchange.methods.price0CumulativeLast().call();\n//   // const [_, price1] = await exchange.methods.price1CumulativeLast().call();\n\n// };\n\nexport const getInstantaneousPrice = async (counterTokenAddr, pairAddress) => {\n  const [reserve, token0] = await Promise.all([getReserves(pairAddress), getToken0(pairAddress)]);\n  const token0Balance = new BigNumber(reserve._reserve0);\n  const token1Balance = new BigNumber(reserve._reserve1);\n  if (token0.toLowerCase() === counterTokenAddr.toLowerCase()) {\n    // TODO set to DSD amounts\n    return token0Balance.dividedBy(token1Balance);\n    // return token0Balance.multipliedBy(new BigNumber(10).pow(12)).dividedBy(token1Balance);\n\n  }\n  return token1Balance.dividedBy(token0Balance);\n  // return token1Balance.multipliedBy(new BigNumber(10).pow(12)).dividedBy(token0Balance);\n\n};\n\nexport const getToken0 = async (pairAddress) => {\n  const exchange = new web3.eth.Contract(uniswapPairAbi, pairAddress);\n  return exchange.methods.token0().call();\n};\n\n// Pool\n\nexport const getPoolStatusOf = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.statusOf(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfBonded = async (pool, account) => {\n  if (account === '') return '0';\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfBonded(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfStaged = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfStaged(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfRewarded = async (pool, account) => {\n  if (account === '') return '0';\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfRewarded(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfClaimable = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfClaimable(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolTotalBonded = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.totalBonded().call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolTotalRewarded = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.totalRewarded().call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolTotalClaimable = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.totalClaimable().call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolFluidUntil = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n\n  // no need to look back further than the pool lockup period\n  const blockNumber = await web3.eth.getBlockNumber();\n  const fromBlock = blockNumber - (POOL_EXIT_LOCKUP_EPOCHS + 1) * 8640;\n  const bondP = poolContract.getPastEvents('Bond', {\n    filter: {account: account}, fromBlock: fromBlock });\n  const unbondP = poolContract.getPastEvents('Unbond', {\n    filter: {account: account}, fromBlock: fromBlock });\n\n  const [bond, unbond] = await Promise.all([bondP, unbondP]);\n  const events = bond.map((e) => e.returnValues)\n    .concat(unbond.map((e) => e.returnValues));\n\n  const startEpoch = events.reduce(\n    (epoch, event) => {\n      if (epoch > event.start)\n        return epoch\n      else\n        return event.start\n    }, 0);\n\n  // these contract events report the start epoch as one more than the active\n  // epoch when the event is emitted, so we subtract 1 here to adjust\n  return (parseInt(startEpoch, 10) + POOL_EXIT_LOCKUP_EPOCHS - 1).toString();\n};\n\n/**\n *\n * @param {string} pool address\n * @return {Promise<any[]>}\n */\nexport const getAllPoolBondings = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n\n  const payload = (await poolContract.getPastEvents('Unbond', {\n    fromBlock: 0,\n  })).map((event) => {\n    const prop = event.returnValues;\n    prop.blockNumber = event.blockNumber;\n    return prop;\n  });\n  return payload.sort((a, b) => b.blockNumber < a.blockNumber);\n};\n\nexport const getAllDaoBondings = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n\n  const payload = (await daoContract.getPastEvents('Unbond', {\n    fromBlock: 0,\n  })).map((event) => {\n    const prop = event.returnValues;\n    prop.blockNumber = event.blockNumber;\n    return prop;\n  });\n  return payload.sort((a, b) => b.blockNumber < a.blockNumber);\n};\n\n","export const VTD = {\n  addr: '0xf0E3543744AFcEd8042131582f2A19b6AEb82794',\n  decimals: 18,\n  symbol: 'VTD',\n};\n\nexport const VTDD = {\n  addr: '0x530608409991C36Ba922B69623BEc57e22B8d331',\n  decimals: 18,\n  symbol: 'VTDD',\n};\n\nexport const PeggedTokens = [\n  {\n    name: 'dsd',\n    pair: {\n      addr: '0x2008dDa1Ad792b156599cE55D12Eb82808C80f01',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0xBD2F0Cd039E0BFcf88901C98c0bFAc5ab27566e3',\n    decimals: 18,\n    symbol: 'DSD',\n    pool: '0x623EA23a36bF98a065701B08Be1Ad17246d0E337',\n    oracle: '0x5e3485B75cdD6Ba8C71Df43b7e8e62dB37357a13',\n    usdcPair: '0x66e33d2605c5fb25ebb7cd7528e7997b0afa55e8',\n    enabled: true\n  },\n\n  {\n    name: 'weth',\n    pair: {\n      addr: '0xbAFA2D6db3256c7B2478F130D511759046cE7a9A',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',\n    decimals: 18,\n    symbol: 'ETH',\n    pool: '0x26C6ee0F68f9D6cE8dd9d9A8dD972B04D7b94289',\n    oracle: '0x22d1EFAE32841FA741B1DD30eA6E8cF514D57DE9',\n    usdcPair: '0xb4e16d0168e52d35cacd2c6185b44281ec28c9dc',\n    enabled: true\n  },\n\n  {\n    name: 'usdt',\n    pair: {\n      addr: '0xe6f3FA003EA33962A4b71095165375bb9Eb42A4c',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0xdAC17F958D2ee523a2206206994597C13D831ec7',\n    decimals: 6, //IMPORTANT\n    symbol: 'USDT',\n    pool: '0x649f1A91a9693C94747e95C9CE3d9A952Ef652A9',\n    oracle: '0xB518894Be07239C2e78323244617765aDf593E86',\n    usdcPair: '0x3041cbd36888becc7bbcbc0045e3b1f144466f5f',\n    enabled: false\n  },\n\n\n  {\n    name: 'usdc',\n    pair: {\n      addr: '0xBB20875B900BFcf7BcC80A9C11C59a1264a4Bb8c',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',\n    decimals: 6, //IMPORTANT\n    symbol: 'USDC',\n    pool: '0xD3DD32395271bAC888dAAF58Aa7FAF635D6d459F',\n    oracle: '0x3121a778536FaBCe3AC903FE2df242097b79eefD',\n    usdcPair: null,\n    enabled: false\n  },\n\n  {\n    name: 'wbtc',\n    pair: {\n      addr: '0x9C57623199024B20b2157Ef6667C412688006A82',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599',\n    decimals: 18,\n    symbol: 'WBTC',\n    pool: '0x8951303cB54F013b41Bcf762F6210bdc9292c1Ac',\n    oracle: '0xa86b4cf024a49CB47eEa037874bF0B1ae7702F21',\n    usdcPair: '0x004375dff511095cc5a197a54140a24efef3a416',\n    enabled: false\n  }\n]","import BigNumber from 'bignumber.js';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const MAX_UINT256 = new BigNumber(2).pow(256).minus(1);\nexport const GOVERNANCE_QUORUM = new BigNumber('0.20');\nexport const SUPERMAJORITY = new BigNumber('0.50');\nexport const GOVERNANCE_PERIOD = 8\nexport const GOVERNANCE_PROPOSAL_THRESHOLD = new BigNumber('0.005');\nexport const COUPON_EXPIRATION = 180\nexport const DAO_EXIT_LOCKUP_EPOCHS = 18\nexport const POOL_EXIT_LOCKUP_EPOCHS = 9\n","import BigNumber from 'bignumber.js';\n\n/**\n * Convert 10.999 to 10999000\n */\nexport function toBaseUnitBN(rawAmt:string| number| BigNumber, decimals: number):BigNumber {\n  const raw = new BigNumber(rawAmt);\n  const base = new BigNumber(10);\n  const decimalsBN = new BigNumber(decimals);\n  return raw.times(base.pow(decimalsBN)).integerValue();\n}\n\n/**\n * Convert 10999000 to 10.999\n */\nexport const toTokenUnitsBN = (tokenAmount:string|number|BigNumber, tokenDecimals:number): BigNumber => {\n  const amt = new BigNumber(tokenAmount);\n  const digits = new BigNumber(10).pow(new BigNumber(tokenDecimals));\n  return amt.div(digits);\n};\n\nexport const isPos = (amount: BigNumber): boolean => {\n  return !amount.isZero() && amount.isPositive();\n};\n\nexport const ownership = (balance: BigNumber, totalSupply: BigNumber): BigNumber => {\n  return balance.multipliedBy(new BigNumber(100)).dividedBy(totalSupply);\n}\n\n/**\n * BigNumber string formatting\n */\n\nexport const formatBN = (amount: BigNumber, position: number): string => {\n  if (amount.isLessThan(new BigNumber(1))) {\n    return pad(amount.precision(position, BigNumber.ROUND_FLOOR).toFixed(), position);\n\n  }\n  return delineate(amount.toFixed(position, BigNumber.ROUND_FLOOR));\n}\n\nfunction delineate(bnStr) {\n  const parts = bnStr.split('.');\n  return parts[0].toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \".\" + parts[1];\n}\n\nfunction pad(bnStr, position) {\n  if (!bnStr.includes(\".\")) {\n    bnStr += \".\";\n  }\n\n  const parts = bnStr.split(\".\");\n  for (let i = 0; i < position - parts[1].length; i++) {\n    bnStr += \"0\";\n  }\n\n  return bnStr\n}\n\nexport function formatMoney(n) {\n  n = n.toPrecision(3)\n  return Math.abs(Number(n)) >= 1.0e+9\n    ? Math.abs(Number(n)) / 1.0e+9 + \"B\"\n    : Math.abs(Number(n)) >= 1.0e+6\n      ? Math.abs(Number(n)) / 1.0e+6 + \"MM\"\n      : Math.abs(Number(n)) >= 1.0e+3\n        ? Math.abs(Number(n)) / 1.0e+3 + \"K\"\n        : Math.abs(Number(n));\n}","import React from 'react';\nimport { IdentityBadge } from '@aragon/ui';\n\ntype AddressBlockProps = {\n  label:string,\n  address: string\n}\n\nfunction AddressBlock({ label, address }: AddressBlockProps) {\n  return (\n    <>\n      <div style={{ fontSize: 16, padding: 3 }}>{label}</div>\n      <div style={{ padding: 5 }}>\n        <IdentityBadge entity={address} shorten />\n      </div>\n    </>\n  );\n}\n\nexport default AddressBlock;\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\nimport {formatBN} from \"../../utils/number\";\n\ntype BlanceBlockProps = {\n  asset: string,\n  balance: BigNumber | string | number\n  suffix?: string\n}\n\nfunction BalanceBlock({ asset, balance, suffix=\"\"}: BlanceBlockProps) {\n  let integer = '0';\n  let digits = '0';\n  const balanceBN = new BigNumber(balance);\n  if (balanceBN.gte(new BigNumber(0))) {\n    const tokens = formatBN(balanceBN, 2).split('.')\n    integer = tokens[0];\n    digits = tokens[1];\n  }\n\n  return (\n    <>\n      <div style={{ fontSize: 14, padding: 3 }}>{asset}</div>\n      <div style={{ padding: 3 }}>\n        <span style={{ fontSize: 24 }}>{integer}</span>\n        .\n        <span style={{ fontSize: 18 }}>\n          {' '}\n          {digits}\n          {' '}\n        </span>\n        {suffix === \"\" ? '' : <span style={{ fontSize: 18 }}>{suffix}</span> }\n      </div>\n    </>\n  );\n}\n\nexport default BalanceBlock;\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\nimport {formatBN} from \"../../utils/number\";\n\ntype BlanceBlockProps = {\n  asset: string,\n  value: BigNumber | string | number\n  suffix?: string,\n}\n\nfunction StatsRowItem({ asset, value, suffix=\"\"}: BlanceBlockProps) {\n  return (\n    <div style={{display: 'flex'}}>\n      <div style={{ fontSize: 12, lineHeight: 2}}>{asset}</div>\n      <div style={{ \n        flex: '1 1 0%',\n        backgroundPosition: 'center bottom',\n        backgroundSize: '0.5rem 0.0625rem',\n        backgroundImage: 'linear-gradient(to right, rgba(225, 225, 225, 0.4) 20%, rgba(255, 255, 255, 0) 0%)',\n        backgroundRepeat: 'repeat-x'\n      }}></div>\n      <div style={{ fontSize: 12, lineHeight: 2}}>\n        <span>{value}</span><span> {suffix}</span>\n      </div>\n    </div>\n  );\n}\n\nexport default StatsRowItem;\n","import React from 'react';\n\nfunction SectionTitle({ title }:{title: string}) {\n  return <div style={{ padding: 10, fontSize: 20 }}>{title}</div>;\n}\n\nexport default SectionTitle;\n","import React from 'react';\n\nimport {\n  ButtonBase,\n} from '@aragon/ui';\n\nfunction MaxButton({ onClick }:{ onClick: Function }) {\n  return (\n    <div style={{ padding: 3 }}>\n      <ButtonBase onClick={onClick}>\n        <span style={{ opacity: 0.5 }}> Max </span>\n      </ButtonBase>\n    </div>\n  );\n}\n\nexport default MaxButton;\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\n\nfunction PriceSection({\n  label, amt, symbol = '', forceDisplay = false,\n}:{label:string, amt: string|number|BigNumber, symbol?:string, forceDisplay?:boolean }) {\n  const amtBN = new BigNumber(amt);\n  if (amtBN.gt(new BigNumber(0)) || forceDisplay) {\n    return (\n      <div style={{ padding: 3, opacity: 0.5 }}>\n        <span style={{ fontSize: 13 }}>{label}</span>\n        <span style={{ fontSize: 13 }}>{amtBN.toNumber().toFixed(5)}</span>\n        <span style={{ fontSize: 13 }}>{symbol}</span>\n      </div>\n    );\n  }\n  return <div style={{ padding: 3, opacity: 0.5 }} />;\n}\n\n\nexport default PriceSection;\n","import React, { ReactChild } from 'react';\n\ntype commentProps = {\n  text: string | ReactChild\n}\n\nfunction Comment({ text }: commentProps) {\n  return (\n    <div style={{ padding: 5, opacity: 0.5 }}>\n      {text}\n    </div>\n  );\n}\n\nexport default Comment;\n","import styled from 'styled-components';\n\nconst FlexWrapper = styled.div`\n  // display: flex;\n  padding-left: 20%;\n  padding-right: 20%;\n`;\n\nexport default FlexWrapper;\n","import React from 'react';\nimport { Checkbox, useTheme } from '@aragon/ui';\nimport styled from 'styled-components';\n\ntype checkBoxProps = {\n  text: string,\n  checked: boolean,\n  onCheck: Function\n}\n\nfunction MyCheckBox({ text, checked, onCheck }: checkBoxProps) {\n  const theme = useTheme();\n  return (\n    <CheckBoxWrapper theme={theme}>\n      <Checkbox\n        checked={checked}\n        onChange={onCheck}\n      />\n      <span style={{ margin: '4px' }}>\n        {text}\n      </span>\n      <br />\n    </CheckBoxWrapper>\n  );\n}\n\nexport default MyCheckBox;\n\nconst CheckBoxWrapper = styled.div`{\n  display: flex;\n  font-size: 14px;\n  color: ${(props) => props.theme.surfaceContentSecondary}\n}`;","import React from 'react';\nimport BigNumber from 'bignumber.js';\n\nimport { StatsRowItem } from '../common/index';\nimport TextBlock from \"../common/TextBlock\";\nimport {ownership} from \"../../utils/number\";\nimport {formatBN} from \"../../utils/number\";\n\ntype AccountPageHeaderProps = {\n  accountVTDBalance: BigNumber,\n  accountVTDSBalance: BigNumber,\n  totalVTDSSupply: BigNumber,\n  accountStagedBalance: BigNumber,\n  accountBondedBalance: BigNumber,\n  accountStatus: number,\n  unlocked: number,\n};\n\nfunction fm(bn){\n  let num = (formatBN(bn, 2))\n  return num;\n}\n\nconst STATUS_MAP = [\"Unlocked\", \"Locked\", \"Locked\"];\n\nfunction status(accountStatus, unlocked) {\n  return STATUS_MAP[accountStatus] + (accountStatus === 0 ? \"\" : \" until epoch:\" + unlocked)\n}\n\nconst AccountPageHeader = ({\n  accountVTDBalance, accountVTDSBalance, totalVTDSSupply, accountStagedBalance, accountBondedBalance, accountStatus, unlocked\n}: AccountPageHeaderProps) => (\n\n<div style={{display: 'flex'}}>\n     \n  <div style={{ flex: '1 0 50%',  padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center', justifyContent: 'space-between' }}>\n      <div style={{ flex: '1 0 50%'}}>\n      <StatsRowItem asset=\"Balance\" value={fm(accountVTDBalance)} suffix={\" VTD\"}/>\n      <StatsRowItem asset=\"Staged\" value={fm(accountStagedBalance)}  suffix={\" VTD\"}/>\n      <StatsRowItem asset=\"Bonded\" value={fm(accountBondedBalance)}  suffix={\" VTD\"}/>\n      </div>\n  </div>\n  <div style={{ flex: '1 0 50%', padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center', justifyContent: 'space-between' }}>\n      <div style={{flex: '1 0 50%'}}>\n          <StatsRowItem asset=\"Dao Ownership\" value={fm(ownership(accountVTDSBalance, totalVTDSSupply))} suffix={\"%\"} />\n          <StatsRowItem asset=\"Dao status\" value={status(accountStatus, unlocked)}  suffix={\"\"}/>\n      </div>\n  </div>\n</div>\n);\n\n\nexport default AccountPageHeader;\n","export const notify = {\n  hash: (v) => {\n    console.log(v)\n    localStorage.setItem('pendingtx', v);\n  }\n}","/* eslint-disable camelcase */\nimport Web3 from 'web3';\nimport BigNumber from 'bignumber.js';\n\nimport { notify } from './txNotifier.ts';\nimport { UniswapV2Router02 } from '../constants/contracts';\n\nimport { VTD } from '../constants/tokens';\n\nconst uniswapRouterAbi = require('../constants/abi/UniswapV2Router02.json');\nconst testnetUSDCAbi = require('../constants/abi/TestnetUSDC.json');\nconst daoAbi = require('../constants/abi/Implementation.json');\nconst poolAbi = require('../constants/abi/Pool.json');\n\nconst DEADLINE_FROM_NOW = 60 * 15;\nconst UINT256_MAX = '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff';\n\n/**\n * Connection Utilities\n */\n\nexport const updateModalMode = async (theme) => {\n  window.darkMode = theme === 'dark';\n};\n\nexport const connect = async (ethereum) => {\n  window.web3 = new Web3(ethereum);\n  let addresses = await window.web3.eth.getAccounts();\n  if (!addresses.length) {\n    try {\n      addresses = await window.ethereum.enable();\n    } catch (e) {\n      console.log(e);\n      return false;\n    }\n  }\n\n  return addresses.length ? addresses[0].toLowerCase() : null;\n};\n\n// eslint-disable-next-line consistent-return\nexport const checkConnectedAndGetAddress = async () => {\n  let addresses = await window.web3.eth.getAccounts();\n  if (!addresses.length) {\n    try {\n      addresses = await window.ethereum.enable();\n      // eslint-disable-next-line no-empty\n    } catch (e) { }\n  }\n\n  return addresses[0];\n};\n\n/**\n * ERC20 Utilities\n */\n\nexport const approve = async (tokenAddr, spender, amt = UINT256_MAX) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new window.web3.eth.Contract(testnetUSDCAbi, tokenAddr);\n  await oToken.methods\n    .approve(spender, amt)\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n\nexport const checkTxStatus = async (hash, callback) => {\n  new window.web3.eth.getTransactionReceipt(hash, callback);\n};\n\n\n// export const mintTestnetUSDC = async (amount) => {\n//   const account = await checkConnectedAndGetAddress();\n//   const dsd = new window.web3.eth.Contract(testnetUSDCAbi, DSD.addr);\n\n//   await dsd.methods.mint(account, new BigNumber(amount).toFixed())\n//     .send({ from: account })\n//     .on('transactionHash', (hash) => {\n//       notify.hash(hash);\n//     });\n// };\n\n/**\n * Uniswap Protocol\n */\n\nexport const buyVTD = async (buyAmount, maxInputAmount, inputTokenAddr) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n\n  await router.methods.swapTokensForExactTokens(\n    buyAmount,\n    maxInputAmount,\n    [inputTokenAddr, VTD.addr],\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const sellVTD = async (sellAmount, minOutputAmount, outputTokenAddr) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n\n  await router.methods.swapExactTokensForTokens(\n    sellAmount,\n    minOutputAmount,\n    [VTD.addr, outputTokenAddr],\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const addLiquidity = async (amountVTD, amountPeg, slippage, counterTokenAddr) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n  const slippageBN = new BigNumber(slippage);\n  const minAmountVTD = new BigNumber(amountVTD)\n    .multipliedBy(new BigNumber(1).minus(slippageBN))\n    .integerValue(BigNumber.ROUND_FLOOR);\n  const minAmountUSDC = new BigNumber(amountPeg)\n    .multipliedBy(new BigNumber(1).minus(slippageBN))\n    .integerValue(BigNumber.ROUND_FLOOR);\n\n  await router.methods.addLiquidity(\n    VTD.addr,\n    counterTokenAddr,\n    new BigNumber(amountVTD).toFixed(),\n    new BigNumber(amountPeg).toFixed(),\n    minAmountVTD,\n    minAmountUSDC,\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const removeLiquidity = async (liquidityAmount, minAmountVTD, minAmountPeg, pegAddress) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n\n  await router.methods.removeLiquidity(\n    VTD.addr,\n    pegAddress,\n    new BigNumber(liquidityAmount).toFixed(),\n    new BigNumber(minAmountVTD).toFixed(),\n    new BigNumber(minAmountPeg).toFixed(),\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n * Døllar Protocol\n */\n\nexport const advance = async (dao) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .tryAdvance()\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const deposit = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  console.log(account)\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  console.log(daoContract)\n  await daoContract.methods\n    .deposit(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const withdraw = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .withdraw(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const bond = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .bond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const unbond = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .unbond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const unbondUnderlying = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .unbondUnderlying(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const purchaseCoupons = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .purchaseCoupons(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const redeemCoupons = async (dao, epoch, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .redeemCoupons(epoch, new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const recordVote = async (dao, candidate, voteType) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .vote(candidate, voteType)\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const commit = async (dao, candidate) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .commit(candidate)\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/* UNI-V2 Incentivization Pool */\nexport const depositPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .deposit(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const withdrawPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .withdraw(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const bondPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .bond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const unbondPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .unbond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const claimPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .claim(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const providePool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .provide(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\nimport {\n  TextInput,\n} from '@aragon/ui';\n\ntype BigNumberInputProps = {\n  value: BigNumber,\n  setter: (value: BigNumber) => void\n  adornment?: any,\n  disabled?: boolean\n}\n\nfunction BigNumberInput({ value, setter, adornment, disabled=false }: BigNumberInputProps) {\n  return (\n    <>\n      <TextInput\n        type=\"number\"\n        adornmentPosition=\"end\"\n        adornment={adornment}\n        wide\n        value={value.isNegative() ? '' : value.toFixed()}\n        onChange={(event) => {\n          if (event.target.value) {\n            setter(new BigNumber(event.target.value));\n          } else {\n            setter(new BigNumber(-1));\n          }\n        }}\n        onBlur={() => {\n          if (value.isNegative()) {\n            setter(new BigNumber(0))\n          }\n        }}\n        disabled={disabled}\n      />\n    </>\n  );\n}\n\nexport default BigNumberInput;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconLock\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {approve, depositPool, withdrawPool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {MAX_UINT256} from \"../../constants/values\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype WithdrawDepositProps = {\n  poolAddress: string\n  user: string\n  balance: BigNumber,\n  allowance: BigNumber,\n  stagedBalance: BigNumber,\n  status: number,\n  peg: any\n};\n\nfunction WithdrawDeposit({\n  poolAddress, user, balance, allowance, stagedBalance, status, peg\n}: WithdrawDepositProps) {\n  const [depositAmount, setDepositAmount] = useState(new BigNumber(0));\n  const [withdrawAmount, setWithdrawAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Stage\" style={{ paddingTop: '2%'}}>\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\n        <div>\n          {/* total Issued */}\n          <div>\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"UNI-V2\"}/>\n          </div>\n          {/* Deposit UNI-V2 into Pool */}\n          <div>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"UNI-V2\"\n                    value={depositAmount}\n                    setter={setDepositAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setDepositAmount(balance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCirclePlus/> : <IconLock/>}\n                  label=\"Deposit\"\n                  onClick={() => {\n                    depositPool(\n                      poolAddress,\n                      toBaseUnitBN(depositAmount, peg.pair.decimals),\n                      (hash) => setDepositAmount(new BigNumber(0))\n                    );\n                  }}\n                  disabled={poolAddress === '' || status !== 0 || !isPos(depositAmount)}\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Withdraw Døllar from DAO */}\n          <div style={{paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"UNI-V2\"\n                    value={withdrawAmount}\n                    setter={setWithdrawAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setWithdrawAmount(stagedBalance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCircleMinus/> : <IconLock/>}\n                  label=\"Withdraw\"\n                  onClick={() => {\n                    withdrawPool(\n                      poolAddress,\n                      toBaseUnitBN(withdrawAmount, peg.pair.decimals),\n                      (hash) => setWithdrawAmount(new BigNumber(0))\n                    );\n                  }}\n                  disabled={poolAddress === '' || status !== 0 || !isPos(withdrawAmount)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        :\n        <div style={{}}>\n          {/* total Issued */}\n          <div >\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"UNI-V2\"}/>\n          </div>\n          <div/>\n          {/* Approve Pool to spend UNI-V2 */}\n          <div style={{ paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus />}\n              label=\"Approve\"\n              onClick={() => {\n                approve(peg.pair.addr, peg.pool);\n              }}\n              disabled={peg.pool === '' || user === ''}\n            />\n          </div>\n        </div>\n      }\n    </Box>\n  );\n}\n\nexport default WithdrawDeposit;\n","import React from 'react';\n\ntype TextBlockProps = {\n  label: string,\n  text: string\n}\n\nfunction TextBlock({ label, text }: TextBlockProps) {\n  return (\n    <>\n      <div style={{ fontSize: 16, padding: 3 }}>{label}</div>\n      <div style={{ fontSize: 16, padding: 3 }}>{text}</div>\n    </>\n  );\n}\n\nexport default TextBlock;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconCaution\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {bondPool, unbondPool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport BigNumberInput from \"../common/BigNumberInput\";\nimport TextBlock from \"../common/TextBlock\";\n\ntype BondUnbondProps = {\n  poolAddress: string,\n  staged: BigNumber,\n  bonded: BigNumber,\n  status: number,\n  lockup: number,\n  peg: any\n};\n\nfunction BondUnbond({\n  poolAddress, staged, bonded, status, lockup, peg\n}: BondUnbondProps) {\n  const [bondAmount, setBondAmount] = useState(new BigNumber(0));\n  const [unbondAmount, setUnbondAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Bond\">\n      <div>\n        {/* Total bonded */}\n        <div>\n          <BalanceBlock asset=\"Bonded\" balance={bonded} suffix={\"UNI-V2\"} />\n        </div>\n        {/* Exit lockup */}\n        <div>\n          <TextBlock label=\"Exit Lockup\" text={lockup === 0 ? \"\" : lockup === 1 ? \"1 epoch\" : `${lockup} epochs`}/>\n        </div>\n        {/* Bond UNI-V2 within Pool */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  adornment=\"UNI-V2\"\n                  value={bondAmount}\n                  setter={setBondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setBondAmount(staged);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCirclePlus/> : <IconCaution/>}\n                label=\"Bond\"\n                onClick={() => {\n                  bondPool(\n                    poolAddress,\n                    toBaseUnitBN(bondAmount, peg.pair.decimals),\n                    (hash) => setBondAmount(new BigNumber(0))\n                  );\n                }}\n                disabled={poolAddress === '' || !isPos(bondAmount)}\n              />\n            </div>\n          </div>\n        </div>\n        <div style={{flexBasis: '2%'}}/>\n        {/* Unbond UNI-V2 within Pool */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  adornment=\"UNI-V2\"\n                  value={unbondAmount}\n                  setter={setUnbondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setUnbondAmount(bonded);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCircleMinus/> : <IconCaution/>}\n                label=\"Unbond\"\n                onClick={() => {\n                  unbondPool(\n                    poolAddress,\n                    toBaseUnitBN(unbondAmount, peg.pair.decimals),\n                    (hash) => setUnbondAmount(new BigNumber(0))\n                  );\n                }}\n                disabled={poolAddress === '' || !isPos(unbondAmount)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> Bonding events will restart the lockup timer </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default BondUnbond;\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\n\nimport { BalanceBlock,StatsRowItem } from '../common/index';\n\nimport {Grid} from '@geist-ui/react'\nimport {ownership} from \"../../utils/number\";\nimport {formatBN} from \"../../utils/number\";\n\ntype PoolPageHeaderProps = {\n  accountUNIBalance: BigNumber,\n  accountStagedBalance: BigNumber,\n  accountBondedBalance: BigNumber,\n  accountRewardedVTDBalance: BigNumber,\n  accountClaimableVTDBalance: BigNumber,\n  poolTotalBonded: BigNumber,\n  accountPoolStatus: number,\n  unlocked: number,\n};\n\nconst STATUS_MAP = [\"Unlocked\", \"Locked\"];\n\nfunction status(accountStatus, unlocked) {\n  return STATUS_MAP[accountStatus] + (accountStatus === 0 ? \"\" : \" until \" + unlocked)\n}\n\nfunction fm(bn){\n  let num = (formatBN(bn, 2))\n  return num;\n}\n\n\n\nconst PoolPageHeader = ({\n  accountUNIBalance, accountStagedBalance, accountBondedBalance, accountRewardedVTDBalance, accountClaimableVTDBalance, poolTotalBonded, accountPoolStatus, unlocked\n}: PoolPageHeaderProps) => (\n  <>\n    <Grid xs={24} sm={12}>\n        <StatsRowItem asset=\"Balance\" value={fm(accountUNIBalance)} suffix={\" UNI-V2\"}/>\n        <StatsRowItem asset=\"Staged\" value={fm(accountStagedBalance)}  suffix={\" UNI-V2\"}/>\n        <StatsRowItem asset=\"Bonded\" value={fm(accountBondedBalance)}  suffix={\" UNI-V2\"}/>\n     </Grid>\n     <Grid xs={24} sm={12}>\n\n            <StatsRowItem asset=\"Rewarded\" value={fm(accountRewardedVTDBalance)}  suffix={\" VTD\"}/>\n            <StatsRowItem asset=\"Claimable\" value={fm(accountClaimableVTDBalance)}  suffix={\" VTD\"}/>\n            <StatsRowItem asset=\"Pool Ownership\" value={fm(ownership(accountBondedBalance, poolTotalBonded))} suffix={\"%\"} />\n            <StatsRowItem asset=\"Pool status\" value={status(accountPoolStatus, unlocked)}  suffix={\"\"}/>\n    </Grid>\n  </>\n);\n\n\nexport default PoolPageHeader;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconArrowDown\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {claimPool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {VTD} from \"../../constants/tokens\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype ClaimProps = {\n  poolAddress: string\n  claimable: BigNumber,\n  status: number\n};\n\nfunction Claim({\n  poolAddress, claimable, status\n}: ClaimProps) {\n  const [claimAmount, setClaimAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Claim\">\n      <div>\n        {/* total Issued */}\n        <div>\n          <BalanceBlock asset=\"Claimable\" balance={claimable} suffix={\"VTD\"} />\n        </div>\n        {/* Deposit UNI-V2 into Pool */}\n        <div/>\n        <div style={{paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  adornment=\"VTD\"\n                  value={claimAmount}\n                  setter={setClaimAmount}\n                  disabled={status !== 0}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setClaimAmount(claimable);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '6em'}}>\n              <Button\n                wide\n                icon={<IconArrowDown/>}\n                label=\"Claim\"\n                onClick={() => {\n                  claimPool(\n                    poolAddress,\n                    toBaseUnitBN(claimAmount, VTD.decimals),\n                    (hash) => setClaimAmount(new BigNumber(0))\n                  );\n                }}\n                disabled={poolAddress === '' || status !== 0 || !isPos(claimAmount)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> Unbond to make rewards claimable after your status is Unlocked </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default Claim;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconArrowUp, IconCirclePlus\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton, PriceSection,\n} from '../common/index';\nimport {approve, providePool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN, toTokenUnitsBN} from '../../utils/number';\nimport {VTD} from \"../../constants/tokens\";\nimport {MAX_UINT256} from \"../../constants/values\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype ProvideProps = {\n  poolAddress: string,\n  user: string,\n  rewarded: BigNumber,\n  pairBalanceVTD: BigNumber,\n  pairBalancePeg: BigNumber,\n  userPEGBalance: BigNumber,\n  userPEGAllowance: BigNumber,\n  status: number,\n  peg: any,\n};\n\nfunction Provide({\n  poolAddress, user, rewarded, pairBalanceVTD, pairBalancePeg, userPEGBalance, userPEGAllowance, status, peg\n}: ProvideProps) {\n  const [provideAmount, setProvideAmount] = useState(new BigNumber(0));\n  const [usdcAmount, setUsdcAmount] = useState(new BigNumber(0));\n\n  const PEGToVTDRatio = pairBalancePeg.isZero() ? new BigNumber(1) : pairBalancePeg.div(pairBalanceVTD);\n\n  const onChangeAmountVTD = (amountVTD) => {\n    if (!amountVTD) {\n      setProvideAmount(new BigNumber(0));\n      setUsdcAmount(new BigNumber(0));\n      return;\n    }\n\n    const amountVTDBN = new BigNumber(amountVTD)\n    setProvideAmount(amountVTDBN);\n\n    const amountVTDBU = toBaseUnitBN(amountVTDBN, VTD.decimals);\n    const newAmountPEG = toTokenUnitsBN(\n      amountVTDBU.multipliedBy(PEGToVTDRatio).integerValue(BigNumber.ROUND_FLOOR),\n      VTD.decimals);\n    setUsdcAmount(newAmountPEG);\n  };\n\n  return (\n    <Box heading=\"Provide\">\n      {userPEGAllowance.comparedTo(MAX_UINT256.dividedBy(2)) > 0 ?\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total rewarded */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset=\"Rewarded\" balance={rewarded} suffix={\"VTD\"} />\n          </div>\n          <div style={{flexBasis: '33%'}}>\n            <BalanceBlock asset={`${peg.symbol} Balance`} balance={userPEGBalance} suffix={peg.symbol} />\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Provide liquidity using Pool rewards */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"VTD\"\n                    value={provideAmount}\n                    setter={onChangeAmountVTD}\n                    disabled={status === 1}\n                  />\n                  <PriceSection label=\"Requires \" amt={usdcAmount} symbol={peg.symbol}/>\n                  <MaxButton\n                    onClick={() => {\n                      onChangeAmountVTD(rewarded);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '6em'}}>\n                <Button\n                  wide\n                  icon={<IconArrowUp/>}\n                  label=\"Provide\"\n                  onClick={() => {\n                    providePool(\n                      poolAddress,\n                      toBaseUnitBN(provideAmount, VTD.decimals),\n                      (hash) => setProvideAmount(new BigNumber(0))\n                    );\n                  }}\n                  disabled={poolAddress === '' || status !== 0 || !isPos(provideAmount) || usdcAmount.isGreaterThan(userPEGBalance)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        :\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total rewarded */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset=\"Rewarded\" balance={rewarded} suffix={\"VTD\"} />\n          </div>\n          <div style={{flexBasis: '33%'}}>\n            <BalanceBlock asset={`${peg.symbol} Balance`} balance={userPEGBalance} suffix={peg.symbol}/>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Approve Pool to spend DSD */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus/>}\n              label=\"Approve\"\n              onClick={() => {\n                approve(peg.addr, poolAddress);\n              }}\n              disabled={poolAddress === '' || user === ''}\n            />\n          </div>\n        </div>\n      }\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> Zap your rewards directly to LP by providing more ${peg.symbol} </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default Provide;\n","import React from 'react';\nimport {VTD, VTDD, PeggedTokens} from \"../constants/tokens\";\nimport BigNumber from 'bignumber.js';\nimport {\n  getPoolBalanceOfBonded, getPoolBalanceOfClaimable,\n  getPoolBalanceOfRewarded,\n  getPoolBalanceOfStaged,\n  getPoolStatusOf, getPoolTotalBonded,\n  getTokenAllowance,\n  getTokenBalance,\n  getPoolFluidUntil,\n  getPoolDistributions,\n  getInstantaneousPrice,\n  getPoolTotalClaimable, getPoolTotalRewarded,\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged,\n  getEpoch, getEpochTime, getNextEpochTimestamp, getCurrentEpochLength,\n} from '../utils/infura';\nimport { toTokenUnitsBN } from '../utils/number';\n\nexport interface ITodo {\n  id: number\n  title: string\n  description: string\n  status: boolean\n}\n\nexport interface IPeggedToken {\n  name: string,\n  pair: {\n    addr: string,\n    decimals: number,\n    symbol: string,\n  },\n  addr: string,\n  decimals: number,\n  symbol: string,\n  pool: string,\n  oracle: string,\n  enabled: boolean,\n  usdcPair: string,\n  usdcPrice: BigNumber,\n  stats: PegStats\n}\n\nexport interface PegStats {\n  vtdBalance: BigNumber,\n  pegBalance: BigNumber,\n  poolReward: BigNumber,\n  poolClaimable: BigNumber,\n  poolTotalBonded: BigNumber,\n  price: BigNumber\n}\n\nexport type ContextType = {\n  peggedTokens: IPeggedToken[],\n  totals: {\n    totalSupply: BigNumber,\n    totalBonded: BigNumber,\n    totalStaged: BigNumber,\n    totalLPSupply: BigNumber,\n    totalLPBonded: BigNumber,\n    circulating: BigNumber,\n    totalRedeemable: BigNumber,\n    totalDebt: BigNumber,\n    totalCoupon: BigNumber\n  },\n  updatePools: () => void,\n  updateTotals: () => {}\n}\n\n//@ts-ignore\nconst initialPeggedTokens: IPeggedToken[] = PeggedTokens.map((peg) => {\n  peg.stats = {\n    vtdBalance: new BigNumber(0),\n    pegBalance: new BigNumber(0),\n    poolReward: new BigNumber(0),\n    poolClaimable: new BigNumber(0),\n    poolTotalBonded: new BigNumber(0),\n    price: new BigNumber(0),\n  } \n\n  peg.usdcPrice = new BigNumber(0)\n  return peg\n})\n\nconst initialTotals = {\n  totalSupply: new BigNumber(0),\n  totalBonded: new BigNumber(0),\n  totalStaged: new BigNumber(0),\n  totalLPSupply: new BigNumber(0),\n  totalLPBonded: new BigNumber(0),\n  circulating: new BigNumber(0),\n  totalRedeemable: new BigNumber(0),\n  totalDebt: new BigNumber(0),\n  totalCoupon: new BigNumber(0)\n}\n\nexport const MainContext = React.createContext<ContextType | null>(null);\n\nexport const MainStoreProvider: React.FC<React.ReactNode> = ({ children }) => {\n  const [peggedTokens, setPeggedTokenPools] = React.useState<IPeggedToken[]>(initialPeggedTokens);\n  const [totals, setTotals] = React.useState(initialTotals);\n\n  const updatePools = () => {\n    let pegs: IPeggedToken[] = []\n    peggedTokens.forEach(async (peg) =>  { \n      if (peg.enabled) {\n        let [vtdBalance, pegBalance, poolReward, poolClaimable, totalBonded] = await Promise.all([\n          getTokenBalance(VTD.addr, peg.pair.addr),\n          getTokenBalance(peg.addr, peg.pair.addr),\n          getPoolTotalRewarded(peg.pool),\n          getPoolTotalClaimable(peg.pool),\n          getPoolTotalBonded(peg.pool),\n          ]);\n        \n        let usdcPrice = new BigNumber(1e18);\n        if (!(peg.symbol === 'USDC')) {\n           let multiplier = peg.decimals == 18 ? 1e12 : 1;\n           const [rawUsdcPrice] = await Promise.all([getInstantaneousPrice('0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48', peg.usdcPair)])\n           usdcPrice = rawUsdcPrice.multipliedBy(new BigNumber(multiplier));\n        }\n\n        peg.stats = {\n          vtdBalance: toTokenUnitsBN(vtdBalance, VTD.decimals),\n          pegBalance: toTokenUnitsBN(pegBalance, peg.decimals),\n          poolReward: toTokenUnitsBN(poolReward, VTD.decimals),\n          poolClaimable: toTokenUnitsBN(poolClaimable, VTD.decimals),\n          poolTotalBonded: toTokenUnitsBN(totalBonded, VTD.decimals),\n          price: toTokenUnitsBN(pegBalance, peg.decimals).dividedBy(toTokenUnitsBN(vtdBalance, VTD.decimals)),\n        }\n\n        peggedTokens.filter((_peg: IPeggedToken) => {\n          if (_peg.symbol === peg.symbol) {\n            _peg.stats = peg.stats;\n            _peg.usdcPrice = usdcPrice;\n            setPeggedTokenPools([...peggedTokens]);\n          }\n        });\n      }\n    })\n  };\n\n  const updateTotals = async () => {\n    const [\n      totalSupplyStr,\n      totalBondedStr, totalStagedStr, totalRedeemableStr,\n      totalDebtStr, totalCouponsStr\n      ] = await Promise.all([\n      getTokenTotalSupply(VTD.addr),\n\n      getTotalBonded(VTDD.addr),\n      getTotalStaged(VTDD.addr),\n      getTotalRedeemable(VTDD.addr),\n\n      getTotalDebt(VTDD.addr),\n      getTotalCoupons(VTDD.addr)\n\n      ]);\n\n    let poolTotal = new BigNumber(0);\n    let totalLiquidityPoolSupply = new BigNumber(0);\n    peggedTokens.forEach((peg) => {\n      totalLiquidityPoolSupply = totalLiquidityPoolSupply.plus(peg.stats.poolReward)\n        .plus(peg.stats.poolClaimable)\n        poolTotal = poolTotal.plus(peg.stats.vtdBalance)\n    })\n\n    const newTotals = {\n      totalSupply: toTokenUnitsBN(totalSupplyStr, VTD.decimals),\n      totalBonded: toTokenUnitsBN(totalBondedStr, VTD.decimals),\n      totalStaged: toTokenUnitsBN(totalStagedStr, VTD.decimals),\n      totalLPSupply: totalLiquidityPoolSupply,\n      totalLPBonded: poolTotal,\n      circulating: new BigNumber(0),\n      totalRedeemable: toTokenUnitsBN(totalRedeemableStr, VTD.decimals),\n      totalDebt: toTokenUnitsBN(totalDebtStr, VTD.decimals),\n      totalCoupon: toTokenUnitsBN(totalCouponsStr, VTD.decimals)\n    }\n    newTotals.circulating = newTotals.totalSupply.minus(newTotals.totalLPBonded)\n                                                 .minus(newTotals.totalBonded)\n                                                 .minus(newTotals.totalStaged)\n                                                 .minus(newTotals.totalLPSupply)\n    setTotals(newTotals);\n  }\n\n  return (\n    <MainContext.Provider value={{peggedTokens, totals, updatePools, updateTotals }}>\n      {children}\n    </MainContext.Provider>\n  );\n};\n\nexport default MainStoreProvider;\n","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport BigNumber from 'bignumber.js';\nimport {\n  getPoolBalanceOfBonded, getPoolBalanceOfClaimable,\n  getPoolBalanceOfRewarded,\n  getPoolBalanceOfStaged,\n  getPoolStatusOf, getPoolTotalBonded,\n  getTokenAllowance,\n  getTokenBalance,\n  getPoolFluidUntil,\n  getPoolDistributions\n} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {formatBN} from \"../../utils/number\";\nimport {POOL_EXIT_LOCKUP_EPOCHS} from \"../../constants/values\";\nimport { toTokenUnitsBN } from '../../utils/number';\nimport { SidePanel } from '@aragon/ui';\nimport { ButtonGroup, Button, Card, Divider, useTheme, Grid, useMediaQuery, Link } from '@geist-ui/react'\nimport { X } from '@geist-ui/react-icons'\n\nimport WithdrawDeposit from \"./WithdrawDeposit\";\nimport BondUnbond from \"./BondUnbond\";\nimport PoolPageHeader from \"./Header\";\nimport Claim from \"./Claim\";\nimport Provide from \"./Provide\";\nimport { MainContext, ContextType } from \"../../store/MainStore\";\n\n// import Migrate from \"./Migrate\";\n// import {DollarPool4} from \"../../constants/contracts\";\n\ntype PoolProps = {user: string, peg: any};\n\nfunction Pool({ user, peg }: PoolProps) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n  const theme = useTheme();\n  const [poolAddress, setPoolAddress] = useState(\"\");\n  const [userUNIBalance, setUserUNIBalance] = useState(new BigNumber(0));\n  const [userUNIAllowance, setUserUNIAllowance] = useState(new BigNumber(0));\n  const [userPEGBalance, setUserPEGBalance] = useState(new BigNumber(0));\n  const [userPEGAllowance, setUserPEGAllowance] = useState(new BigNumber(0));\n  const [userStagedBalance, setUserStagedBalance] = useState(new BigNumber(0));\n  const [userBondedBalance, setUserBondedBalance] = useState(new BigNumber(0));\n  const [userRewardedBalance, setUserRewardedBalance] = useState(new BigNumber(0));\n  const [userClaimableBalance, setUserClaimableBalance] = useState(new BigNumber(0));\n  const [userStatus, setUserStatus] = useState(0);\n  const [userStatusUnlocked, setUserStatusUnlocked] = useState(0);\n  const [lockup, setLockup] = useState(0);\n  const [tokensPanelOpened, setTokensPanelOpened] = useState(false)\n  const [rewardPanelOpened, setRewardPanelOpened] = useState(false)\n  const { updatePools } = React.useContext(MainContext) as ContextType;\n  const downMD = useMediaQuery('sm', { match: 'down' })\n\n  function fm(bn){\n    let num = (formatBN(bn, 2))\n    return num;\n  }\n  //Update User balances\n  useEffect(() => {\n    if (user === '') {\n      setPoolAddress(\"\");\n      setUserUNIBalance(new BigNumber(0));\n      setUserUNIAllowance(new BigNumber(0));\n      setUserPEGBalance(new BigNumber(0));\n      setUserPEGAllowance(new BigNumber(0));\n      setUserStagedBalance(new BigNumber(0));\n      setUserBondedBalance(new BigNumber(0));\n      setUserRewardedBalance(new BigNumber(0));\n      setUserClaimableBalance(new BigNumber(0));\n      setUserStatus(0);\n      setUserStatusUnlocked(0);\n      \n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const poolAddressStr = await peg.pool;\n\n      const [\n        balance, usdcBalance,\n        allowance, usdcAllowance, stagedBalance, bondedBalance,\n        rewardedBalance, claimableBalance, status, fluidUntilStr\n      ] = await Promise.all([\n        getTokenBalance(peg.pair.addr, user),\n        getTokenBalance(peg.addr, user),\n\n        getTokenAllowance(peg.pair.addr, user, poolAddressStr),\n        getTokenAllowance(peg.addr, user, poolAddressStr),\n        getPoolBalanceOfStaged(poolAddressStr, user),\n        getPoolBalanceOfBonded(poolAddressStr, user),\n\n        getPoolBalanceOfRewarded(poolAddressStr, user),\n        getPoolBalanceOfClaimable(poolAddressStr, user),\n        getPoolStatusOf(poolAddressStr, user),\n        getPoolFluidUntil(poolAddressStr, user),\n        // getPoolDistributions(VTDD.address)\n      ]);\n      \n      const userUNIBalance = toTokenUnitsBN(balance, peg.pair.decimals);\n      const userPEGBalance = toTokenUnitsBN(usdcBalance, peg.decimals);\n      const userStagedBalance = toTokenUnitsBN(stagedBalance, peg.pair.decimals);\n      const userBondedBalance = toTokenUnitsBN(bondedBalance, peg.pair.decimals);\n      const userRewardedBalance = toTokenUnitsBN(rewardedBalance, VTD.decimals);\n      const userClaimableBalance = toTokenUnitsBN(claimableBalance, VTD.decimals);\n      const userStatus = parseInt(status, 10);\n      const fluidUntil = parseInt(fluidUntilStr, 10);\n\n      if (!isCancelled) {\n        setPoolAddress(poolAddressStr);\n        setUserUNIBalance(new BigNumber(userUNIBalance));\n        setUserUNIAllowance(new BigNumber(allowance));\n        setUserPEGAllowance(new BigNumber(usdcAllowance));\n        setUserPEGBalance(new BigNumber(userPEGBalance));\n        setUserStagedBalance(new BigNumber(userStagedBalance));\n        setUserBondedBalance(new BigNumber(userBondedBalance));\n        setUserRewardedBalance(new BigNumber(userRewardedBalance));\n        setUserClaimableBalance(new BigNumber(userClaimableBalance));\n        setUserStatus(userStatus);\n        setUserStatusUnlocked(fluidUntil);\n        // setLockup(poolAddressStr === DollarPool4 ? POOL_EXIT_LOCKUP_EPOCHS : 1);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n  // Check for error in .call()\n  return (\n    <>\n      <Card type=\"lite\" style={{margin: '10px 0', background: `${theme.palette.accents_1}`}}>\n        <Grid.Container gap={2} justify=\"center\">\n          <Grid xs={12} md={12}>\n            {peg.symbol}/\n            <div style={{fontSize: '10px'}}>\n              VTD\n            </div> \n          </Grid>\n          <Grid xs={12} md={4}>\n            <div>\n            Price: \n            </div>\n            <div style={{fontSize: '10px'}}>\n              {fm(peg.stats.price)} {peg.symbol} / {fm(peg.stats.price.multipliedBy(peg.usdcPrice))} USD \n            </div>  \n          </Grid>\n          <Grid xs={12} md={4}>\n            <div>\n            VTD Pooled: \n            </div>\n            <div style={{fontSize: '12px'}}>\n              {fm(peg.stats.vtdBalance)}\n            </div>   \n          </Grid>\n          <Grid xs={12} md={4}>\n            <div>\n            {peg.symbol} Pooled: \n            </div>\n            <div style={{fontSize: '12px'}}>\n              {fm(peg.stats.pegBalance)}\n            </div>  \n          </Grid>\n          <Divider y={0} />\n          \n            <PoolPageHeader\n              accountUNIBalance={userUNIBalance}\n              accountStagedBalance={userStagedBalance}\n              accountBondedBalance={userBondedBalance}\n              accountRewardedVTDBalance={userRewardedBalance}\n              accountClaimableVTDBalance={userClaimableBalance}\n              poolTotalBonded={peg.stats.poolTotalBonded}\n              accountPoolStatus={userStatus}\n              unlocked={userStatusUnlocked}\n            />\n          <Grid xs>\n            <ButtonGroup size={downMD? 'mini' : 'medium'} type=\"success\" ghost>\n              <Button\n              type=\"success\"\n                onClick={() => setTokensPanelOpened(true)}\n              >Bond/Unbond Tokens</Button>\n              <Button\n              type=\"success\"\n              // icon={<IconPlus />}\n              onClick={() => setRewardPanelOpened(true)}\n            >Claim/Provide Rewards</Button>\n            </ButtonGroup>\n          </Grid>\n          <Grid xs>\n            <ButtonGroup size={downMD? 'mini' : 'medium'} ghost>\n            <Button \n                onClick={() => window.open(`https://app.uniswap.org/#/swap?inputCurrency=${peg.addr}&outputCurrency=${VTD.addr}`, '_blank')}\n                ghost>Trade VTD/{peg.symbol}</Button>\n              <Button \n              // icon={<IconPlus />}\n              onClick={() => window.open(`https://app.uniswap.org/#/add/${VTD.addr}/${peg.addr}`, '_blank')}\n              ghost>Add Uniswap Liquidity</Button>\n            </ButtonGroup>\n          </Grid>\n          </Grid.Container>\n        </Card>\n        <SidePanel\n          title=\"Add/Remove Liquidity\"\n          opened={tokensPanelOpened}\n          onClose={() => setTokensPanelOpened(false)}\n        >\n          <Link onClick={() => setTokensPanelOpened(false)}><X /></Link>\n          <WithdrawDeposit\n          poolAddress={poolAddress}\n          user={user}\n          balance={userUNIBalance}\n          allowance={userUNIAllowance}\n          stagedBalance={userStagedBalance}\n          status={userStatus}\n          peg={peg}\n        />\n\n        <BondUnbond\n          poolAddress={poolAddress}\n          staged={userStagedBalance}\n          bonded={userBondedBalance}\n          status={userStatus}\n          lockup={lockup}\n          peg={peg}\n        />\n    \n        \n      </SidePanel>\n\n      <SidePanel\n        title=\"Claim/Zap Rewards\"\n        opened={rewardPanelOpened}\n        onClose={() => setRewardPanelOpened(false)}\n      >\n          <Link onClick={() => setRewardPanelOpened(false)}><X /></Link>\n        \n        <Claim\n          poolAddress={poolAddress}\n          claimable={userClaimableBalance}\n          status={userStatus}\n        />\n\n        <Provide\n          poolAddress={poolAddress}\n          user={user}\n          rewarded={userRewardedBalance}\n          status={userStatus}\n          pairBalanceVTD={peg.stats.vtdBalance}\n          pairBalancePeg={peg.stats.pegBalance}\n          userPEGBalance={userPEGBalance}\n          userPEGAllowance={userPEGAllowance}\n          peg={peg}\n        />\n        \n      </SidePanel>\n    </>\n  );\n}\n\nexport default Pool;\n","import React, { useState, useEffect } from 'react';\nimport { Card, useTheme } from '@geist-ui/react'\n\n// import Migrate from \"./Migrate\";\n// import {DollarPool4} from \"../../constants/contracts\";\n\ntype PoolProps = {peg: any};\n\nfunction EmptyPool({ peg }: PoolProps) {\n  const theme = useTheme();\n  \n  return (\n    <>\n    <Card type=\"lite\" style={{margin: '10px 0', opacity: '30%', background: theme.palette.accents_1}}>\n            <div style={{display: 'flex', flexDirection: 'row', justifyContent: 'space-between', flexBasis:'100%'}}>\n              <div>\n                <div>\n                {peg.symbol}/\n                </div>\n                <div style={{fontSize: '10px'}}>\n                  VTD\n                </div> \n              </div>\n                <div style={{flexBasis: '30%'}}/>\n                <div style={{flexBasis: '20%'}}>\n                <div >\n                Coming Soon\n                </div>\n                <div style={{fontSize: '12px'}}>\n                  \n                </div>    \n              </div>\n            </div>\n          </Card>\n    </>\n  );\n}\n\nexport default EmptyPool;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconLock\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {approve, deposit, withdraw} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {MAX_UINT256} from \"../../constants/values\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype WithdrawDepositProps = {\n  user: string\n  balance: BigNumber,\n  allowance: BigNumber,\n  stagedBalance: BigNumber,\n  status: number\n};\n\nfunction WithdrawDeposit({\n  user, balance, allowance, stagedBalance, status\n}: WithdrawDepositProps) {\n  const [depositAmount, setDepositAmount] = useState(new BigNumber(0));\n  const [withdrawAmount, setWithdrawAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Stage\" style={{ paddingTop: '2%'}}>\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\n        <div>\n          {/* total Issued */}\n          <div>\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"VTD\"}/>\n          </div>\n          {/* Deposit Døllar into DAO */}\n          <div style={{ paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    value={depositAmount}\n                    setter={setDepositAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setDepositAmount(balance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '6em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCirclePlus/> : <IconLock/>}\n                  label=\"Deposit\"\n                  onClick={() => {\n                    deposit(\n                      VTDD.addr,\n                      toBaseUnitBN(depositAmount, VTD.decimals),\n                    );\n                  }}\n                  disabled={status === 1 || !isPos(depositAmount) || depositAmount.isGreaterThan(balance)}\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Withdraw Døllar from DAO */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '7em'}}>\n                <>\n                  <BigNumberInput\n                    value={withdrawAmount}\n                    setter={setWithdrawAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setWithdrawAmount(stagedBalance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCircleMinus/> : <IconLock/>}\n                  label=\"Withdraw\"\n                  onClick={() => {\n                    withdraw(\n                      VTDD.addr,\n                      toBaseUnitBN(withdrawAmount, VTD.decimals),\n                    );\n                  }}\n                  disabled={status === 1 || !isPos(withdrawAmount) || withdrawAmount.isGreaterThan(stagedBalance)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        :\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total Issued */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"VTD\"}/>\n          </div>\n          <div style={{flexBasis: '35%'}}/>\n          {/* Approve DAO to spend Døllar */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus />}\n              label=\"Approve\"\n              onClick={() => {\n                approve(VTD.addr, VTDD.addr);\n              }}\n              disabled={user === ''}\n            />\n          </div>\n        </div>\n      }\n    </Box>\n  );\n}\n\nexport default WithdrawDeposit;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconCaution\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport { bond, unbondUnderlying } from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport { VTD, VTDD } from \"../../constants/tokens\";\nimport BigNumberInput from \"../common/BigNumberInput\";\nimport TextBlock from \"../common/TextBlock\";\n\ntype BondUnbondProps = {\n  staged: BigNumber,\n  bonded: BigNumber,\n  status: number,\n  lockup: number,\n};\n\nfunction BondUnbond({\n  staged, bonded, status, lockup\n}: BondUnbondProps) {\n  const [bondAmount, setBondAmount] = useState(new BigNumber(0));\n  const [unbondAmount, setUnbondAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Bond VTD\">\n      <div>\n        {/* Total bonded */}\n        <div style={{flexBasis: '16%'}}>\n          <BalanceBlock asset=\"Bonded\" balance={bonded} suffix={\"VTD\"}/>\n        </div>\n        {/* Total bonded */}\n        <div style={{flexBasis: '16%'}}>\n          <TextBlock label=\"Exit Lockup\" text={lockup === 0 ? \"\" : lockup === 1 ? \"1 epoch\" : `${lockup} epochs`}/>\n        </div>\n        {/* Bond Døllar within DAO */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  value={bondAmount}\n                  setter={setBondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setBondAmount(staged);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCirclePlus/> : <IconCaution/>}\n                label=\"Bond\"\n                onClick={() => {\n                  bond(\n                    VTDD.addr,\n                    toBaseUnitBN(bondAmount, VTD.decimals),\n                  );\n                }}\n                disabled={status === 2 || !isPos(bondAmount) || bondAmount.isGreaterThan(staged)}\n              />\n            </div>\n          </div>\n        </div>\n        <div style={{width: '2%'}}/>\n        {/* Unbond Døllar within DAO */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n      \n                  value={unbondAmount}\n                  setter={setUnbondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setUnbondAmount(bonded);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCircleMinus/> : <IconCaution/>}\n                label=\"Unbond\"\n                onClick={() => {\n                  unbondUnderlying(\n                    VTDD.addr,\n                    toBaseUnitBN(unbondAmount, VTD.decimals),\n                  );\n                }}\n                disabled={status === 2 || !isPos(unbondAmount) || unbondAmount.isGreaterThan(bonded)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> Bonding events will restart the lockup timer </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default BondUnbond;\n","import React from 'react';\nimport {VTD, VTDD, PeggedTokens} from \"../constants/tokens\";\nimport BigNumber from 'bignumber.js';\nimport {\n  getPoolBalanceOfBonded, getPoolBalanceOfClaimable,\n  getPoolBalanceOfRewarded,\n  getPoolBalanceOfStaged,\n  getPoolStatusOf, getPoolTotalBonded,\n  getTokenAllowance,\n  getTokenBalance,\n  getPoolFluidUntil,\n  getPoolDistributions,\n  getInstantaneousPrice,\n  getPoolTotalClaimable, getPoolTotalRewarded,\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged,\n  getEpoch, getEpochTime, getNextEpochTimestamp, getCurrentEpochLength, getAllRegulations\n} from '../utils/infura';\nimport { toTokenUnitsBN } from '../utils/number';\n\nexport type ContextType = {\n  regulations: IEpochs[],\n  updateRegulations: () => void,\n}\n\nexport const EpochContext = React.createContext<ContextType | null>(null);\n\nexport type IEpochs = {\n    type: string;\n    epoch: number;\n    price: BigNumber;\n    momentumPrice?: BigNumber;\n    deltaRedeemable: BigNumber;\n    deltaDebt: BigNumber;\n    deltaBonded: BigNumber;\n  }\n  \n\nexport const EpochStoreProvider: React.FC<React.ReactNode> = ({ children }) => {\n  const [regulations, setRegulations] = React.useState<IEpochs[]>([]);\n  const updateRegulations = async () => {\n    const [allRegulations] = await Promise.all([\n        getAllRegulations(VTDD.addr),\n      ]);\n\n      const _regs = allRegulations.map((result, index) => {\n        const data = result.data;\n        const epochtype = result.type;\n        return {\n            type: epochtype,\n            // @ts-ignore\n            epoch: Number(data.epoch),\n            // @ts-ignore\n            price: toTokenUnitsBN(data.price, VTD.decimals),\n            // @ts-ignore\n            momentumPrice: data.momentumPrice ? toTokenUnitsBN(data.momentumPrice, VTD.decimals) : new BigNumber(0),\n            // @ts-ignore\n            deltaRedeemable: toTokenUnitsBN(data.deltaRedeemable, VTD.decimals),\n            // @ts-ignore\n            deltaDebt: toTokenUnitsBN(data.deltaDebt, VTD.decimals),\n            // @ts-ignore\n            deltaBonded: toTokenUnitsBN(data.deltaBonded, VTD.decimals)\n        }\n      })\n      setRegulations(_regs)\n  }\n\n  return (\n    <EpochContext.Provider value={{regulations, updateRegulations}}>\n      {children}\n    </EpochContext.Provider>\n  );\n};\n\nexport default EpochStoreProvider;\n","import { Line } from 'react-chartjs-2';\n\nimport React, { useContext, useEffect } from 'react';\nimport BigNumber from 'bignumber.js';\n\nimport {Card, Row, Col, Divider, useMediaQuery} from '@geist-ui/react'\nimport { StatsRowItem } from '../common/index';\nimport {formatBN} from \"../../utils/number\";\nimport {EpochContext, ContextType } from \"../../store/EpochStore\";\nimport { createVoidZero } from 'typescript';\n\nfunction fm(bn){\n  let num = (formatBN(bn, 2))\n  return num;\n}\n\nconst MomentumHeader = ({ user }: {user: string}) => {\nconst downLG = useMediaQuery('lg', { match: 'down' })\nconst upSM = useMediaQuery('sm', { match: 'up' })\nconst { regulations, updateRegulations} = React.useContext(EpochContext) as ContextType;\nlet regs = regulations.reverse().slice(-15)\nconst prices = regs.map((reg) => Number(reg.price.toNumber().toFixed(2)));\nconst momentumPrice = regs.map((reg) =>  reg.momentumPrice ? Number(reg.momentumPrice.toNumber().toFixed(2)): 0);\nconst labels = regs.map((x) => x.epoch)\n// @ts-ignore\nconst nextChange = momentumPrice.length > 1 ? (momentumPrice[momentumPrice.length-1].toFixed(2) > prices[momentumPrice.length-1].toFixed(2) ? 'Contraction' : 'Expansion' ) : ''\nconst price_data = {\n    labels: labels,\n    datasets: [\n      {\n        label: 'Price ($)',\n        data: prices,\n        backgroundColor: 'rgba(75,192,192,0.4)',\n        borderColor: 'rgba(75,192,192,1)',\n        borderCapStyle: 'butt',\n        borderDash: [],\n        borderDashOffset: 0.0,\n        borderJoinStyle: 'miter',\n        pointBorderColor: 'rgba(75,192,192,1)',\n        pointBackgroundColor: '#fff',\n        pointBorderWidth: 1,\n        pointHoverRadius: 5,\n        pointHoverBackgroundColor: 'rgba(75,192,192,1)',\n        pointHoverBorderColor: 'rgba(220,220,220,1)',\n        pointHoverBorderWidth: 2,\n        pointRadius: 3,\n      },\n      {\n        label: 'Momentum ($)',\n        borderDash: [5,15],\n        backgroundColor: 'rgba(255,99,132,0.2)',\n\t\tborderColor: 'rgba(255,99,132,1)',\n\t\tborderWidth: 1,\n\t\thoverBackgroundColor: 'rgba(255,99,132,0.4)',\n\t\thoverBorderColor: 'rgba(255,99,132,1)',\n        data: momentumPrice\n      }\n    ]\n  };\nconst options = {\n  scales: {\n    yAxes: [{\n      display: downLG ? false :true,\n      position: 'right',\n      ticks: {\n        callback: function(label, index, labels) {\n            return '$' + label;\n        }\n    },\n    }],\n    xAxes: [{\n      display: downLG ? false :true,\n      ticks: {\n        callback: function(label, index, labels) {\n            return 'Ep ' + label;\n        }\n      }\n    }]\n  }\n}\n\nuseEffect(() => {\n    updateRegulations();\n},[user])\nreturn (\n    <Card style={{display: 'flex'}}>\n        {upSM ? \n        <Row>\n            <Col span={20}>\n                <Line height={65}\n                        legend={{display: false}}\n                        data={price_data}\n                        options={options}/> \n            </Col> \n\n            <Col span={4}>\n                <Card type=\"success\" shadow style={{height: '100%', fontSize: '12px'}}>\n                    {/* @ts-ignore */}\n                    Momentum Price <span style={{color: '#000', fontSize: '12px'}}>${momentumPrice[momentumPrice.length -1]?.toFixed(2) || 0}</span>\n                    <Card.Footer>\n                    Next Epoch: \n                    <Divider/>\n                    <span style={{color: '#000', fontSize: '12px'}}> {nextChange}</span>\n                    </Card.Footer>\n                </Card>\n            </Col>\n        </Row> : \n        <Card type=\"success\" shadow style={{fontSize: '12px'}}>\n            {/* @ts-ignore */}\n            Momentum Price: <span style={{color: '#000', fontSize: '12px'}}>${momentumPrice[momentumPrice.length -1]?.toFixed(2) || 0}</span>\n            <Card.Footer>\n            <div>Next Epoch: </div>\n            <Divider/>\n            <div style={{color: '#000', fontSize: '12px'}}> {nextChange}</div>\n            </Card.Footer>\n        </Card>}\n    </Card>\n)\n};\n\n\nexport default MomentumHeader;\n","import React, { useState, useEffect } from 'react';\nimport {\n  Box, IconCirclePlus, Timer,\n  Table, TableHeader, TableRow, TableCell, Text, Help\n} from '@aragon/ui';\n\nimport {Fieldset, Button, Divider, useTheme} from '@geist-ui/react'\nimport { SkipForward } from '@geist-ui/react-icons'\nimport {getEpoch, getEpochTime, getNextEpochTimestamp, getCurrentEpochLength\n} from '../../utils/infura';\nimport {advance} from '../../utils/web3';\nimport {VTDD} from \"../../constants/tokens\";\n// import AdvanceEpoch from './AdvanceEpoch';\n// import EpochPageHeader from \"./Header\";\nimport IconHeader from \"../common/IconHeader\";\n\ntype ButtonTypes =\n  | 'default'\n  | 'secondary'\n  | 'success'\n  | 'warning'\n  | 'error'\n  | 'abort'\n  | 'secondary-light'\n  | 'success-light'\n  | 'warning-light'\n  | 'error-light'\n\n\nfunction EpochDetail({ user }: {user: string}) {\n  const [epoch, setEpoch] = useState(0);\n  const [epochTime, setEpochTime] = useState(0);\n  const [nextEpochTimestamp, setNextEpochTimestamp] = useState(0);\n  const [currentEpochLength, setCurrentEpochLength] = useState(0);\n  const [advanceMode, setAdvanceMode] = useState<ButtonTypes>('success');\n  const theme = useTheme();\n  var endDate = nextEpochTimestamp*1000\n  var safetyEnd = (nextEpochTimestamp+91)\n\n  function secondsToHms(d) {\n    d = Number(d);\n    var h = Math.floor(d / 3600);\n    var m = Math.floor(d % 3600 / 60);\n    var s = Math.floor(d % 3600 % 60);\n\n    var hDisplay = h > 0 ? h + (h == 1 ? \" hour, \" : \" hours, \") : \"\";\n    var mDisplay = m > 0 ? m + (m == 1 ? \" minute, \" : \" minutes, \") : \"\";\n    var sDisplay = s > 0 ? s + (s == 1 ? \" second\" : \" seconds\") : \"\";\n    return hDisplay + mDisplay + sDisplay; \n  }\n\n  function calcAdvanceMode() {\n    const now = Date.now()/1000 \n    if (now < nextEpochTimestamp) {\n      setAdvanceMode('error');\n    } else {\n      setAdvanceMode('success');\n    }\n  }\n\n  var currentEpochLengthFmt = secondsToHms(currentEpochLength)\n\n  useEffect(() => {\n    let isCancelled = false;\n    async function updateUserInfo() {\n      const [epochStr, epochTimeStr, nextEpochTimestampStr, currentEpochLengthStr] = await Promise.all([\n        getEpoch(VTDD.addr),\n        getEpochTime(VTDD.addr),\n        getNextEpochTimestamp(VTDD.addr),\n        getCurrentEpochLength(VTDD.addr)\n\n      ]);\n\n      if (!isCancelled) {\n        setEpoch(parseInt(epochStr, 10));\n        setEpochTime(parseInt(epochTimeStr, 10));\n        setNextEpochTimestamp(parseInt(nextEpochTimestampStr, 10));\n        setCurrentEpochLength(parseInt(currentEpochLengthStr, 10));\n        calcAdvanceMode();\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 1200);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <Fieldset style={{marginTop: '10px'}}>\n      <Divider y={0} />\n      <Fieldset.Content>\n        <Fieldset.Subtitle>Current Epoch:  <span style={{color: theme.palette.accents_4}}>{epoch}</span></Fieldset.Subtitle>\n        <Fieldset.Subtitle>Epoch Length: <span style={{color: theme.palette.accents_4}}>{currentEpochLengthFmt}</span></Fieldset.Subtitle>\n        <Fieldset.Subtitle>Next Epoch In: </Fieldset.Subtitle>\n        <Timer showEmpty={true} format='hms' end={endDate} /> \n      </Fieldset.Content>\n      <Fieldset.Footer>\n        <Fieldset.Footer.Status>\n          <Text type=\"error\">Advance the Epoch for reward:</Text>\n        </Fieldset.Footer.Status>\n        <Fieldset.Footer.Actions>\n          <Button icon={<SkipForward />} auto size=\"mini\" type={advanceMode}\n               onClick={() => {\n                advance(VTDD.addr);\n              }}\n          >Advance</Button>\n        </Fieldset.Footer.Actions>\n      </Fieldset.Footer>\n    </Fieldset>\n  );\n}\n\nexport default EpochDetail;\n","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport BigNumber from 'bignumber.js';\nimport {\n  getBalanceBonded,\n  getBalanceOfStaged, getFluidUntil, getLockedUntil,\n  getStatusOf, getTokenAllowance,\n  getTokenBalance, getTokenTotalSupply,\n} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport { toTokenUnitsBN } from '../../utils/number';\n\nimport AccountPageHeader from \"./Header\";\nimport Pool from \"../Pool\";\nimport EmptyPool from \"../Pool/EmptyPool\";\n\nimport WithdrawDeposit from \"./WithdrawDeposit\";\nimport BondUnbond from \"./BondUnbond\";\nimport MomentumHeader from \"./MomentumHeader\";\n\nimport EpochDetail from \"../EpochDetail\";\n\nimport { SidePanel} from '@aragon/ui'\nimport { useTheme, Grid, Card, Button, Divider, Link } from '@geist-ui/react'\nimport { X } from '@geist-ui/react-icons'\n\nimport { MainContext, ContextType } from \"../../store/MainStore\";\n\nfunction Wallet({ user }: {user: string}) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n  const theme = useTheme();\n  const [sidePanelOpened, setSidePanelOpened] = useState(false)\n  const [userVTDBalance, setUserVTDBalance] = useState(new BigNumber(0));\n  const [userVTDAllowance, setUserVTDAllowance] = useState(new BigNumber(0));\n  const [userVTDSBalance, setUserVTDSBalance] = useState(new BigNumber(0));\n  const [totalVTDSSupply, setTotalVTDSSupply] = useState(new BigNumber(0));\n  const [userStagedBalance, setUserStagedBalance] = useState(new BigNumber(0));\n  const [userBondedBalance, setUserBondedBalance] = useState(new BigNumber(0));\n  const [userStatus, setUserStatus] = useState(0);\n  const [userStatusUnlocked, setUserStatusUnlocked] = useState(0);\n  const [lockup, setLockup] = useState(0);\n  const [selectedTab, setSelectedTab] = useState(0)\n  \n  const { peggedTokens, updatePools } = React.useContext(MainContext) as ContextType;\n\n  //Update User balances\n  useEffect(() => {\n    if (user === '') {\n      setUserVTDBalance(new BigNumber(0));\n      setUserVTDAllowance(new BigNumber(0));\n      setUserVTDSBalance(new BigNumber(0));\n      setTotalVTDSSupply(new BigNumber(0));\n      setUserStagedBalance(new BigNumber(0));\n      setUserBondedBalance(new BigNumber(0));\n      setUserStatus(0);\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [\n        vtdBalance, vtdAllowance, vtdsBalance, vtdsSupply, stagedBalance, bondedBalance, status,\n        fluidUntilStr, lockedUntilStr\n      ] = await Promise.all([\n        getTokenBalance(VTD.addr, user),\n        getTokenAllowance(VTD.addr, user, VTDD.addr),\n        getTokenBalance(VTDD.addr, user),\n        getTokenTotalSupply(VTDD.addr),\n        getBalanceOfStaged(VTDD.addr, user),\n        getBalanceBonded(VTDD.addr, user),\n        getStatusOf(VTDD.addr, user),\n\n        getFluidUntil(VTDD.addr, user),\n        getLockedUntil(VTDD.addr, user),\n      ]);\n\n      const userVTDBalance = toTokenUnitsBN(vtdBalance, VTD.decimals);\n      const userVTDSBalance = toTokenUnitsBN(vtdsBalance, VTDD.decimals);\n      const totalVTDSSupply = toTokenUnitsBN(vtdsSupply, VTDD.decimals);\n      const userStagedBalance = toTokenUnitsBN(stagedBalance, VTDD.decimals);\n      const userBondedBalance = toTokenUnitsBN(bondedBalance, VTDD.decimals);\n      const userStatus = parseInt(status, 10);\n      const fluidUntil = parseInt(fluidUntilStr, 10);\n      const lockedUntil = parseInt(lockedUntilStr, 10);\n\n      if (!isCancelled) {\n        setUserVTDBalance(new BigNumber(userVTDBalance));\n        setUserVTDAllowance(new BigNumber(vtdAllowance));\n        setUserVTDSBalance(new BigNumber(userVTDSBalance));\n        setTotalVTDSSupply(new BigNumber(totalVTDSSupply));\n        setUserStagedBalance(new BigNumber(userStagedBalance));\n        setUserBondedBalance(new BigNumber(userBondedBalance));\n        setUserStatus(userStatus);\n        setUserStatusUnlocked(Math.max(fluidUntil, lockedUntil))\n        // setLockup(poolAddress === DollarPool4 ? DAO_EXIT_LOCKUP_EPOCHS : 1);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 10000);\n    updatePools();\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n\n  return (\n    <>\n    <Grid.Container gap={2} justify=\"center\">\n      <Grid xs={24} md={18}>\n         <MomentumHeader user={user}/> \n         <Card type=\"lite\" style={{margin: '10px 0', background: `${theme.palette.accents_2}`}}>\n            DAO\n            <Divider y={0} />\n            <AccountPageHeader\n              accountVTDBalance={userVTDBalance}\n              accountVTDSBalance={userVTDSBalance}\n              totalVTDSSupply={totalVTDSSupply}\n              accountStagedBalance={userStagedBalance}\n              accountBondedBalance={userBondedBalance}\n              accountStatus={userStatus}\n              unlocked={userStatusUnlocked}\n            />\n            <Divider y={0} />\n\n                  <Button\n                  // icon={<IconPlus />}\n                  onClick={() => setSidePanelOpened(true)}\n                >Bond/Unbond Tokens </Button>\n\n          </Card>\n\n          {peggedTokens.map((peg, index) => \n            peg.enabled ? <Pool user={user} peg={peg} /> : <EmptyPool peg={peg} />\n          )}\n      </Grid>\n      <Grid xs={24} md={6}>\n      <EpochDetail user={user}/>\n      \n      </Grid>\n    </Grid.Container>\n            \n      \n      <SidePanel\n        title=\"Add/Withdraw VTD\"\n        opened={sidePanelOpened}\n        onClose={() => setSidePanelOpened(false)}\n      >\n          <Link onClick={() => setSidePanelOpened(false)}><X /></Link>\n        \n            <WithdrawDeposit\n            user={user}\n            balance={userVTDBalance}\n            allowance={userVTDAllowance}\n            stagedBalance={userStagedBalance}\n            status={userStatus}\n          />\n    \n          <BondUnbond\n            staged={userStagedBalance}\n            bonded={userBondedBalance}\n            status={userStatus}\n            lockup={lockup}\n          />\n\n        \n      </SidePanel>\n    </>\n  );\n}\n\nexport default Wallet;\n","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport {Grid} from '@geist-ui/react'\nimport BigNumber from 'bignumber.js';\nimport {\n  getBalanceBonded,\n  getBalanceOfStaged, getFluidUntil, getLockedUntil,\n  getStatusOf, getTokenAllowance,\n  getTokenBalance,\n  getCouponPremium,\n  getPoolTotalClaimable, getPoolTotalRewarded,\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged,\n  getEpoch, getEpochTime, getNextEpochTimestamp, getCurrentEpochLength,\n} from '../../utils/infura';\n\nimport {formatBN, ownership} from \"../../utils/number\";\n\nimport {VTD, VTDD} from \"../../constants/tokens\";\n\nimport {BalanceBlock, StatsRowItem} from \"../common/index\";\n\nimport {DAO_EXIT_LOCKUP_EPOCHS, GOVERNANCE_PERIOD, POOL_EXIT_LOCKUP_EPOCHS} from \"../../constants/values\";\nimport { toTokenUnitsBN } from '../../utils/number';\n\nimport { MainContext, ContextType, IPeggedToken} from \"../../store/MainStore\";\n\nconst ONE_COUPON = new BigNumber(10).pow(18);\n\nfunction Stats({ user }: {user: string}) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\n  const [epoch, setEpoch] = useState(0);\n  const [epochTime, setEpochTime] = useState(0);\n  const [nextEpochTimestamp, setNextEpochTimestamp] = useState(0);\n  const [currentEpochLength, setCurrentEpochLength] = useState(0);\n  const [_pegs, setPegs] = useState([]);\n  const { peggedTokens, totals, updatePools, updateTotals} = React.useContext(MainContext) as ContextType;\n  \n  let price =  new BigNumber(0);\n  peggedTokens.filter((_peg) => {\n    if (_peg.symbol === 'ETH') {\n      price = _peg.stats.price.multipliedBy(_peg.usdcPrice)\n    }\n  })\n  \n  const marketcap = totals.totalSupply.multipliedBy(price);\n  const currentEpochLengthFmt = secondsToM(currentEpochLength);\n  const infinity = '\\u221E'; \n\n  function secondsToM(d) {\n    d = Number(d);\n    var m = Math.floor(d / 60);\n    return m;\n  }\n\n  function fm(bn){\n    let num = (formatBN(bn, 2));\n    return num;\n  }\n\n  function inUsdc(amount, rate) {\n    return amount.multipliedBy(rate)\n  }\n\n  function totalYield() {\n      var delta = (price.toNumber()-1)/12\n      delta = delta > 0.1 ? 0.1 : delta\n      delta = epoch > 36 ? delta : 0.06\n      return (totals.totalSupply.toNumber())*delta\n  }\n\n  function daoYield(){\n    return (totalYield()*0.6/totals.totalBonded.toNumber()*100).toFixed(3)\n  }\n\n  function compound(rate, days) {\n      let epochs_per_day = 24*60/currentEpochLengthFmt\n      let times = days*epochs_per_day\n      let real_rate =((1+rate/100)**times -1)*100 \n      return real_rate < 5000000 ? real_rate.toFixed(3) : infinity\n  }\n\n  function LPYield(share, peg){\n    const supply = peg.stats.vtdBalance;\n    const vtdPrice = peg.stats.price.multipliedBy(peg.usdcPrice)\n    const pegValue = peg.stats.pegBalance.multipliedBy(peg.usdcPrice)\n    let lp_size = supply.multipliedBy(vtdPrice).multipliedBy(2)\n    return (totalYield()*price.toNumber()*0.4/lp_size.toNumber()*share.toNumber()).toFixed(3)\n  }\n\n  function calcLinearYield(rate, days) {\n    let epochs_per_day = 24*60/currentEpochLengthFmt\n    let times = days*epochs_per_day\n    return (rate*times).toFixed(3)\n  }\n  //Update User balances\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n        const [epochStr, epochTimeStr, nextEpochTimestampStr, currentEpochLengthStr] = await Promise.all([\n            getEpoch(VTDD.addr),\n            getEpochTime(VTDD.addr),\n            getNextEpochTimestamp(VTDD.addr),\n            getCurrentEpochLength(VTDD.addr),\n        ]);\n\n        if (!isCancelled) {\n            setEpoch(parseInt(epochStr, 10));\n            setEpochTime(parseInt(epochTimeStr, 10));\n            setNextEpochTimestamp(parseInt(nextEpochTimestampStr, 10));\n            setCurrentEpochLength(parseInt(currentEpochLengthStr, 10));\n\n            if (totals.totalDebt.isGreaterThan(ONE_COUPON)) {\n            const couponPremiumStr = await getCouponPremium(VTDD.addr, ONE_COUPON)\n            setCouponPremium(toTokenUnitsBN(couponPremiumStr, VTD.decimals));\n            } else {\n            setCouponPremium(new BigNumber(0));\n            }\n            // setLockup(poolAddress === DollarPool4 ? DAO_EXIT_LOCKUP_EPOCHS : 1);\n            \n        }\n    }\n    updateUserInfo(); \n    updatePools(); \n    updateTotals();\n  }, [user]);\n\n\n  return (\n    <>\n    <Grid.Container gap={5} justify=\"center\">\n        <Grid xs={24} sm={8}>\n        <BalanceBlock asset=\"Epoch Length\" balance={currentEpochLengthFmt} suffix={\" min\"}/>\n\n        </Grid>\n        <Grid xs={24} sm={8}>\n        <BalanceBlock asset=\"Epoch #\" balance={epoch}  suffix={\"\"}/>\n\n        </Grid>\n        <Grid xs={24} sm={8}>\n        <BalanceBlock asset=\"Spot Price (USD)\" balance={price} suffix={\"\"} />\n        </Grid>\n\n    <Grid xs={24} sm={12}>\n\n      <StatsRowItem asset=\"Market Cap ($)\" value={fm(marketcap)} suffix={\" USD\"}/>\n      <StatsRowItem asset=\"Tokens\" value={fm(totals.totalSupply)}  suffix={\"\"}/>\n    </Grid>\n    <Grid xs={24} sm={12}>\n      <StatsRowItem asset=\"Coupon\" value={fm(totals.totalCoupon)} suffix={\"\"} />\n      <StatsRowItem asset=\"Coupon Premium\" value={fm(couponPremium)}  suffix={\"%\"}/>\n    </Grid>\n    <Grid xs={24} sm={12}>\n      <div style={{ fontSize: 14, lineHeight: 2}}>Stats</div>\n        <StatsRowItem asset=\"Circulating Supply\" value={fm(totals.circulating)}  suffix={\"\"}/>\n        <StatsRowItem asset=\"DAO Staged\" value={fm(totals.totalStaged)} suffix={\"\"} />\n        <StatsRowItem asset=\"DAO Bonded\" value={fm(totals.totalBonded)}  suffix={\"\"}/>\n    </Grid>\n    <Grid xs={24} sm={12}>\n          <div style={{ fontSize: 14, lineHeight: 2}}>DAO Yield</div>\n\n      <StatsRowItem asset=\"Day Yield\" value={compound(daoYield(), 1)} suffix={\"%\"}/>\n      <StatsRowItem asset=\"Month Yield\" value={compound(daoYield(),30)}  suffix={\"%\"}/>\n      <StatsRowItem asset=\"Annual Yield\" value={compound(daoYield(), 365)} suffix={\"%\"} />\n    </Grid>\n\n     {\n    //  @ts-ignore\n    peggedTokens.map((peggedToken) =>\n    //@ts-ignore\n      peggedToken.hasOwnProperty('stats') && peggedToken.enabled ?\n      <Grid xs={24} sm={12}>\n        <div style={{ fontSize: 14, lineHeight: 2}}>{peggedToken.symbol} Pool: <small>{`1 ${peggedToken.symbol} = ${peggedToken.usdcPrice.toFixed(2)} USD`}</small></div>\n        <StatsRowItem asset=\"Price\" value={fm(peggedToken.stats.pegBalance.dividedBy(peggedToken.stats.vtdBalance))} suffix={peggedToken.symbol}/>\n        <StatsRowItem asset=\"VTD Bonded\" value={fm(peggedToken.stats.vtdBalance)} suffix={\"VTD\"}/>\n        <StatsRowItem asset={`${peggedToken.symbol} Bonded`} value={fm(peggedToken.stats.pegBalance)} suffix={peggedToken.symbol}/>\n        <div style={{marginTop: '10px', marginLeft: '20px'}}>\n          <StatsRowItem asset=\"LP Rewarded\" value={fm(peggedToken.stats.poolReward)} suffix={\"\"} />\n          <StatsRowItem asset=\"LP Claimable\" value={fm(peggedToken.stats.poolClaimable)} suffix={\"\"}/>\n          <StatsRowItem asset=\"% LP Rewards\" value={fm(ownership(peggedToken.stats.vtdBalance, totals.totalLPBonded))} suffix={\"%\"}/>\n\n          <div style={{ fontSize: 14, lineHeight: 2}}>LP Yield (in USD)</div>\n\n          <StatsRowItem asset=\"Day Yield\" value={calcLinearYield(LPYield(ownership(peggedToken.stats.vtdBalance,totals.totalLPBonded), peggedToken),1)} suffix={\"%\"}/>\n          <StatsRowItem asset=\"Month Yield\" value={calcLinearYield(LPYield(ownership(peggedToken.stats.vtdBalance,totals.totalLPBonded), peggedToken),30)}  suffix={\"%\"}/>\n          <StatsRowItem asset=\"Annual Yield\" value={calcLinearYield(LPYield(ownership(peggedToken.stats.vtdBalance,totals.totalLPBonded), peggedToken), 365)} suffix={\"%\"} />\n        </div>\n        </Grid> : <></>\n     )}\n          <Grid xs={24} sm={12}>\n\n                <div style={{ fontSize: 14, lineHeight: 2}}>Info:</div>\n\n              <StatsRowItem asset=\"DAO Lockup\" value={DAO_EXIT_LOCKUP_EPOCHS} suffix={\"\"}/>\n              <StatsRowItem asset=\"LP Lockup\" value={POOL_EXIT_LOCKUP_EPOCHS}  suffix={\"\"}/>\n              <StatsRowItem asset=\"Governance Period\" value={GOVERNANCE_PERIOD} suffix={\"\"} />\n          </Grid>\n          <Grid xs={24} sm={12}>\n\n                <div style={{ fontSize: 14, lineHeight: 2}}>Current Settings:</div>\n\n                <StatsRowItem asset=\"Max Expansion\" value={10} suffix={\"%\"}/>\n                <StatsRowItem asset=\"Advance Reward\" value='Reverse Dutch Auction'  suffix={\"\"}/>\n                <StatsRowItem asset=\"Current Pegged Token\" value={'DSD'} suffix={\"\"} />\n          </Grid>\n    </Grid.Container>\n    </>\n  );\n}\n\nexport default Stats;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\nimport { BalanceBlock } from \"../common\";\nimport {ownership} from \"../../utils/number\";\n\ntype CouponMarketHeaderProps = {\n  debt: BigNumber,\n  supply: BigNumber,\n  coupons: BigNumber,\n  premium: BigNumber,\n  redeemable: BigNumber,\n};\n\nconst CouponMarketHeader = ({\n  debt, supply, coupons, premium, redeemable\n}: CouponMarketHeaderProps) => (\n  <div style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Debt Ratio\" balance={ownership(debt, supply)} suffix={\"%\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Total Debt\" balance={debt} suffix={\"VTD\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Coupons\" balance={coupons} />\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Premium\" balance={premium.multipliedBy(100)} suffix={\"%\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Redeemable\" balance={redeemable}/>\n    </div>\n  </div>\n);\n\n\nexport default CouponMarketHeader;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton, PriceSection,\n} from '../common/index';\nimport {approve, purchaseCoupons} from '../../utils/web3';\n\nimport {isPos, toBaseUnitBN, toTokenUnitsBN} from '../../utils/number';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {MAX_UINT256} from \"../../constants/values\";\nimport {getCouponPremium} from \"../../utils/infura\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype PurchaseCouponsProps = {\n  user: string,\n  allowance: BigNumber,\n  balance: BigNumber,\n  debt: BigNumber,\n};\n\nfunction PurchaseCoupons({\n  user, balance, allowance, debt,\n}: PurchaseCouponsProps) {\n  const [purchaseAmount, setPurchaseAmount] = useState(new BigNumber(0));\n  const [premium, setPremium] = useState(new BigNumber(0));\n\n  const updatePremium = async (purchaseAmount) => {\n    if (purchaseAmount.lte(new BigNumber(0))) {\n      setPremium(new BigNumber(0));\n      return;\n    }\n    const purchaseAmountBase = toBaseUnitBN(purchaseAmount, VTD.decimals);\n    const premium = await getCouponPremium(VTDD.addr, purchaseAmountBase)\n    const premiumFormatted = toTokenUnitsBN(premium, VTD.decimals);\n    setPremium(premiumFormatted);\n  };\n\n  return (\n    <Box heading=\"Purchase\">\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* User balance */}\n          <div style={{flexBasis: '30%'}}>\n            <BalanceBlock asset={`Balance`} balance={balance} suffix={\" VTD\"}/>\n          </div>\n          <div style={{flexBasis: '38%'}}/>\n          {/* Purchase coupons */}\n          <div style={{flexBasis: '32%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"VTD\"\n                    value={purchaseAmount}\n                    setter={(value) => {\n                      setPurchaseAmount(value);\n                      isPos(value) ? updatePremium(value) : updatePremium(new BigNumber(0));\n                    }}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      const maxPurchaseAmount = debt.comparedTo(balance) > 0 ? balance : debt\n                      setPurchaseAmount(maxPurchaseAmount);\n                      updatePremium(maxPurchaseAmount);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '6em'}}>\n                <Button\n                  wide\n                  icon={<IconCircleMinus/>}\n                  label=\"Burn\"\n                  onClick={() => {\n                    purchaseCoupons(\n                      VTDD.addr,\n                      toBaseUnitBN(purchaseAmount, VTD.decimals),\n                    );\n                  }}\n                  disabled={user === '' || debt.isZero() || balance.isZero() || !isPos(purchaseAmount)}\n                />\n              </div>\n            </div>\n            <PriceSection label=\"Coupons \" amt={purchaseAmount.plus(premium)}/>\n          </div>\n        </div>\n        :\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* User balance */}\n          <div style={{flexBasis: '30%'}}>\n            <BalanceBlock asset={`Døllar Balance`} balance={balance}/>\n          </div>\n          <div style={{flexBasis: '40%'}}/>\n          {/* Approve DAO to spend Døllar */}\n          <div style={{flexBasis: '30%', paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus/>}\n              label=\"Approve\"\n              onClick={() => {\n                approve(VTD.addr, VTDD.addr);\n              }}\n              disabled={user === ''}\n            />\n          </div>\n        </div>\n      }\n    </Box>\n  );\n}\n\nexport default PurchaseCoupons;\n","import React, {useEffect, useState} from 'react';\nimport {\n  DataView, Button, IconCirclePlus\n} from '@aragon/ui';\n\nimport {getBatchBalanceOfCoupons, getBatchCouponsExpiration, getCouponEpochs} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {formatBN, toBaseUnitBN, toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport {redeemCoupons} from \"../../utils/web3\";\n\ntype PurchaseHistoryProps = {\n  user: string,\n  hideRedeemed: boolean,\n  totalRedeemable: BigNumber\n};\n\nfunction PurchaseHistory({\n  user, hideRedeemed, totalRedeemable\n}: PurchaseHistoryProps) {\n  const [epochs, setEpochs] = useState([]);\n  const [page, setPage] = useState(0)\n  const [initialized, setInitialized] = useState(false)\n\n  //Update User balances\n  useEffect(() => {\n    if (user === '') return;\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const epochsFromEvents = await getCouponEpochs(VTDD.addr, user);\n      const epochNumbers = epochsFromEvents.map(e => parseInt(e.epoch));\n      const balanceOfCoupons = await getBatchBalanceOfCoupons(VTDD.addr, user, epochNumbers);\n      const couponsExpirations = await getBatchCouponsExpiration(VTDD.addr, epochNumbers);\n\n      const couponEpochs = epochsFromEvents.map((epoch, i) => {\n        epoch.balance = new BigNumber(balanceOfCoupons[i]);\n        epoch.expiration = couponsExpirations[i];\n        return epoch;\n      });\n\n      if (!isCancelled) {\n        // @ts-ignore\n        setEpochs(couponEpochs);\n        setInitialized(true);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user, totalRedeemable]);\n\n  return (\n    <DataView\n      fields={['Epoch', 'Purchased', 'Balance', 'Expires', '']}\n      status={ initialized ? 'default' : 'loading' }\n      // @ts-ignore\n      entries={hideRedeemed ? epochs.filter((epoch) => !epoch.balance.isZero()) : epochs}\n      entriesPerPage={10}\n      page={page}\n      onPageChange={setPage}\n      renderEntry={(epoch) => [\n        epoch.epoch.toString(),\n        formatBN(toTokenUnitsBN(epoch.coupons, VTD.decimals), 2),\n        formatBN(toTokenUnitsBN(epoch.balance, VTD.decimals), 2),\n        epoch.expiration.toString(),\n        <Button\n          icon={<IconCirclePlus />}\n          label=\"Redeem\"\n          onClick={() => redeemCoupons(\n            VTDD.addr,\n            epoch.epoch,\n            epoch.balance.isGreaterThan(toBaseUnitBN(totalRedeemable, VTD.decimals))\n              ? toBaseUnitBN(totalRedeemable, VTD.decimals)\n              : epoch.balance\n          )}\n          disabled={epoch.balance.isZero()}\n        />\n      ]}\n    />\n  );\n}\n\nexport default PurchaseHistory;\n","import React, { useState } from 'react';\nimport { Modal, Button, useTheme } from '@aragon/ui';\nimport { getPreference, storePreference } from \"../../utils/storage\";\nimport { COUPON_EXPIRATION } from \"../../constants/values\";\n\nfunction ModalWarning() {\n  const storedShowWarning = getPreference('showCouponWarning', '1');\n  const [showWarning, setShowWarning] = useState(storedShowWarning === '1');\n  const theme = useTheme();\n\n  return (\n    <Modal visible={showWarning} closeButton={false}>\n      <div style={{ width: '100%' }}>\n        <div style={{ fontSize: 24, padding: 3, color: theme.warning }}>\n          Warning\n        </div>\n\n        <div style={{\n          marginLeft: '3%',\n          fontSize: 16,\n          padding: 5\n        }}>\n          <div>\n            By purchasing coupons the buyer incurs significant risk of loss.\n            Coupons will only become redeemable during the next supply\n            expansion. Each expansionary epoch, a tranche of rewards are\n            reserved for coupon redemptions by the DAO. At that time, the\n            redemption process is first come, first served. Coupon redemption\n            is not guaranteed.\n          </div>\n\n          <div style={{\n            padding: 10,\n            textAlign: 'center',\n            color: theme.warningSurfaceContent\n          }}>\n            Coupons will expire worthless if not redeemed\n            within {COUPON_EXPIRATION} epochs.\n          </div>\n        </div>\n\n        <div style={{ textAlign: 'right' }}>\n          <Button\n            label={'I understand'}\n            onClick={() => {\n              storePreference('showCouponWarning', '0');\n              setShowWarning(false);\n            }}\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default ModalWarning;\n","import React, { useState, useEffect } from 'react';\nimport { Header, Box } from '@aragon/ui';\nimport { useParams } from 'react-router-dom';\n\nimport {\n  getCouponPremium,\n  getTokenAllowance,\n  getTokenBalance,\n  getTokenTotalSupply, getTotalCoupons,\n  getTotalDebt, getTotalRedeemable,\n} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport CouponMarketHeader from \"./Header\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport PurchaseCoupons from \"./PurchaseCoupons\";\nimport PurchaseHistory from \"./PurchaseHistory\";\nimport ModalWarning from \"./ModalWarning\";\nimport IconHeader from \"../common/IconHeader\";\nimport {getPreference, storePreference} from \"../../utils/storage\";\nimport {CheckBox} from \"../common\";\n\nconst ONE_COUPON = new BigNumber(10).pow(18);\n\nfunction CouponMarket({ user }: {user: string}) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n\n  const storedHideRedeemed = getPreference('hideRedeemedCoupons', '0');\n\n  const [balance, setBalance] = useState(new BigNumber(0));\n  const [allowance, setAllowance] = useState(new BigNumber(0));\n  const [supply, setSupply] = useState(new BigNumber(0));\n  const [coupons, setCoupons] = useState(new BigNumber(0));\n  const [redeemable, setRedeemable] = useState(new BigNumber(0));\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\n  const [debt, setDebt] = useState(new BigNumber(0));\n  const [hideRedeemed, setHideRedeemed] = useState(storedHideRedeemed === '1');\n\n  useEffect(() => {\n    if (user === '') {\n      setBalance(new BigNumber(0));\n      setAllowance(new BigNumber(0));\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [balanceStr, allowanceStr] = await Promise.all([\n        getTokenBalance(VTD.addr, user),\n        getTokenAllowance(VTD.addr, user, VTDD.addr),\n      ]);\n\n      const userBalance = toTokenUnitsBN(balanceStr, VTD.decimals);\n\n      if (!isCancelled) {\n        setBalance(new BigNumber(userBalance));\n        setAllowance(new BigNumber(allowanceStr));\n        (new BigNumber(allowanceStr));\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [supplyStr, debtStr, couponsStr, redeemableStr] = await Promise.all([\n        getTokenTotalSupply(VTD.addr),\n        getTotalDebt(VTDD.addr),\n        getTotalCoupons(VTDD.addr),\n        getTotalRedeemable(VTDD.addr),\n      ]);\n\n      const totalSupply = toTokenUnitsBN(supplyStr, VTD.decimals);\n      const totalDebt = toTokenUnitsBN(debtStr, VTD.decimals);\n      const totalCoupons = toTokenUnitsBN(couponsStr, VTD.decimals);\n      const totalRedeemable = toTokenUnitsBN(redeemableStr, VTD.decimals);\n\n      if (!isCancelled) {\n        setSupply(new BigNumber(totalSupply));\n        setDebt(new BigNumber(totalDebt));\n        setCoupons(new BigNumber(totalCoupons));\n        setRedeemable(new BigNumber(totalRedeemable));\n\n        if (totalDebt.isGreaterThan(new BigNumber(1))) {\n          const couponPremiumStr = await getCouponPremium(VTDD.addr, ONE_COUPON)\n          setCouponPremium(toTokenUnitsBN(couponPremiumStr, VTD.decimals));\n        } else {\n          setCouponPremium(new BigNumber(0));\n        }\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <ModalWarning/>\n\n      <Box>\n\n      <CouponMarketHeader\n        debt={debt}\n        supply={supply}\n        coupons={coupons}\n        premium={couponPremium}\n        redeemable={redeemable}\n      />\n      </Box>\n\n      <h5 style={{\n                    fontSize: '10px',\n                    margin: '10px 0'\n                  }}\n                  >Purchase Coupons</h5>\n\n      <PurchaseCoupons\n        user={user}\n        allowance={allowance}\n        balance={balance}\n        debt={debt}\n      />\n\n      <div style={{ display: 'flex' }}>\n        <h5 style={{\n                    fontSize: '10px',\n                    margin: '10px 0'\n                  }}\n                  >Your Coupons</h5>\n        <div style={{ marginLeft: 'auto', alignSelf: 'flex-end' }}>\n          <CheckBox\n            text=\"Hide Redeemed\"\n            onCheck={(checked) => {\n              storePreference('hideRedeemedCoupons', checked ? '1' : '0');\n              setHideRedeemed(checked);\n            }}\n            checked={hideRedeemed}\n          />\n        </div>\n      </div>\n\n      <PurchaseHistory\n        user={user}\n        hideRedeemed={hideRedeemed}\n        totalRedeemable={redeemable}\n      />\n    </>\n  );\n}\n\nexport default CouponMarket;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\nimport {AddressBlock, BalanceBlock} from \"../common\";\nimport TextBlock from \"../common/TextBlock\";\nimport {ownership} from \"../../utils/number\";\nimport {GOVERNANCE_PROPOSAL_THRESHOLD} from \"../../constants/values\";\n\ntype GovernanceHeaderProps = {\n  stake: BigNumber,\n  totalStake: BigNumber,\n  accountStatus: number,\n  implementation: string\n};\n\nconst STATUS_MAP = [\"Frozen\", \"Fluid\", \"Locked\"];\n\nconst GovernanceHeader = ({\n  stake, totalStake, accountStatus, implementation\n}: GovernanceHeaderProps) => (\n  <div style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n    <div style={{ flexBasis: '25%' }}>\n      <BalanceBlock asset=\"DAO Ownership\" balance={ownership(stake, totalStake)} suffix=\"%\" />\n    </div>\n    <div style={{ flexBasis: '25%' }}>\n      <BalanceBlock asset=\"Proposal Threshold\" balance={GOVERNANCE_PROPOSAL_THRESHOLD.multipliedBy(100)} suffix=\"%\" />\n    </div>\n    <div style={{ flexBasis: '25%' }}>\n      <TextBlock label=\"Status\" text={STATUS_MAP[accountStatus]}/>\n    </div>\n    <div style={{ flexBasis: '25%' }}>\n      <AddressBlock label=\"Implementation\" address={implementation} />\n    </div>\n  </div>\n);\n\n\nexport default GovernanceHeader;\n","import {GOVERNANCE_PROPOSAL_THRESHOLD, GOVERNANCE_QUORUM, SUPERMAJORITY} from \"../constants/values\";\nimport BigNumber from \"bignumber.js\";\n\nexport function proposalStatus(epoch, start, period, initialized, approve, reject, total): string {\n  if (start === 0) {\n    return \"N/A\";\n  }\n  if (epoch < start) {\n    return \"Unknown\";\n  }\n  if (initialized) {\n    return \"Committed\"\n  }\n  if (approve.plus(reject).dividedBy(total).comparedTo(SUPERMAJORITY) > 0) {\n    return \"Fast Trackable\"; // Didn't meet quorum\n  }\n  if (epoch < (start + period)) {\n    return \"Voting\"\n  }\n  if (epoch < (start + period)) {\n    return \"Rejected\"; // Not ended\n  }\n  if (approve.plus(reject).dividedBy(total).comparedTo(GOVERNANCE_QUORUM) < 0) {\n    return \"Rejected\"; // Didn't meet quorum\n  }\n  return approve.comparedTo(reject) > 0 ? \"Approved\" : \"Rejected\";\n}\n\nexport function canPropose(stake: BigNumber, totalStake: BigNumber): boolean {\n  return stake.div(totalStake).comparedTo(GOVERNANCE_PROPOSAL_THRESHOLD) >= 0;\n}","import React, { useState } from 'react';\nimport {\n  Box, TextInput, Button, IconToken,\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {recordVote} from '../../utils/web3';\n\nimport {VTDD} from \"../../constants/tokens\";\nimport {canPropose} from \"../../utils/gov\";\n\ntype ProposeCandidateProps = {\n  user: string,\n  stake: BigNumber,\n  totalStake: BigNumber,\n  accountStatus: number\n};\n\nfunction plausibleCandidate(candidate: string): boolean {\n  return (/^(0x)[0-9a-fA-F]{40}$/i.test(candidate));\n}\n\nfunction ProposeCandidate({\n  user, stake, totalStake, accountStatus,\n}: ProposeCandidateProps) {\n  const [candidate, setCandidate] = useState(\"0x\");\n\n  return (\n    <Box heading=\"Propose\">\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\n        {/* User balance */}\n        <div style={{flexBasis: '62%', paddingTop: '2%'}}>\n          <>\n            <TextInput\n              wide\n              value={candidate}\n              onChange={(event) => {\n                if (event.target.value) {\n                  setCandidate(event.target.value);\n                } else {\n                  setCandidate(\"0x\");\n                }\n              }}\n            />\n          </>\n        </div>\n        <div style={{flexBasis: '6%'}}/>\n        {/* Purchase coupons */}\n        <div style={{flexBasis: '32%', paddingTop: '2%'}}>\n          <Button\n            wide\n            icon={<IconToken/>}\n            label=\"Propose\"\n            onClick={() => {\n              recordVote(\n                VTDD.addr,\n                candidate,\n                1 // APPROVE\n              );\n            }}\n            disabled={user === '' || !canPropose(stake, totalStake) || !plausibleCandidate(candidate) || accountStatus === 1}\n          />\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nexport default ProposeCandidate;\n","import React, {useEffect, useState} from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Button, IconRight, DataView\n} from '@aragon/ui';\n\nimport {\n  getAllProposals,\n  getApproveFor,\n  getEpoch,\n  getIsInitialized,\n  getRejectFor,\n  getTokenTotalSupply, getTotalBondedAt\n} from '../../utils/infura';\nimport {VTDD} from \"../../constants/tokens\";\nimport {AddressBlock} from \"../common\";\nimport {proposalStatus} from \"../../utils/gov\";\nimport BigNumber from \"bignumber.js\";\n\ntype CandidateHistoryProps = {\n  user: string;\n};\n\ntype Proposal = {\n  index: number\n  candidate: string,\n  account: string,\n  start: number,\n  period: number,\n  status: string\n}\n\nasync function formatProposals(epoch: number, proposals: any[]): Promise<Proposal[]> {\n  const currentTotalStake = await getTokenTotalSupply(VTDD.addr);\n  const initializeds = await Promise.all(proposals.map((p) => getIsInitialized(VTDD.addr, p.candidate)));\n  const approves = await Promise.all(proposals.map((p) => getApproveFor(VTDD.addr, p.candidate)));\n  const rejecteds = await Promise.all(proposals.map((p) => getRejectFor(VTDD.addr, p.candidate)));\n  const supplyAts = await Promise.all(proposals.map(async (p) => {\n    const at = (p.start + p.period - 1);\n    if (epoch > at) {\n      return await getTotalBondedAt(VTDD.addr, at);\n    }\n    return currentTotalStake;\n  }));\n\n  for (let i = 0; i < proposals.length; i++) {\n    proposals[i].index = (proposals.length - i);\n    proposals[i].start = parseInt(proposals[i].start);\n    proposals[i].period = parseInt(proposals[i].period);\n    proposals[i].status = proposalStatus(\n      epoch,\n      proposals[i].start,\n      proposals[i].period,\n      initializeds[i],\n      new BigNumber(approves[i]),\n      new BigNumber(rejecteds[i]),\n      new BigNumber(supplyAts[i])\n    );\n  }\n  return proposals\n}\n\nfunction CandidateHistory({user}: CandidateHistoryProps) {\n  const history = useHistory();\n  const [proposals, setProposals] = useState<Proposal[]>([]);\n  const [page, setPage] = useState(0)\n  const [initialized, setInitialized] = useState(false)\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [epochStr, allProposals] = await Promise.all([\n        getEpoch(VTDD.addr),\n        getAllProposals(VTDD.addr),\n      ]);\n\n      if (!isCancelled) {\n        const formattedProposals = await formatProposals(parseInt(epochStr), allProposals);\n        setProposals(formattedProposals);\n        setInitialized(true);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <DataView\n      fields={['Proposal', 'Candidate', 'Proposed', 'Complete', 'Proposer', 'Status', '']}\n      status={ initialized ? 'default' : 'loading' }\n      // @ts-ignore\n      entries={proposals}\n      entriesPerPage={10}\n      page={page}\n      onPageChange={setPage}\n      renderEntry={(proposal) => [\n        \"#\" + proposal.index,\n        <AddressBlock label=\"\" address={proposal.candidate} />,\n        proposal.start.toString(),\n        (proposal.start + proposal.period).toString(),\n        <AddressBlock label=\"\" address={proposal.account} />,\n        proposal.status,\n        <Button\n          wide\n          icon={<IconRight />}\n          label=\"Go To\"\n          onClick={() => {\n            history.push(`/governance/candidate/${proposal.candidate}`);\n          }}\n        />\n      ]}\n    />\n  );\n}\n\nexport default CandidateHistory;\n","import React, { useState, useEffect } from 'react';\nimport { Header, Box } from '@aragon/ui';\n\nimport {\n  getImplementation,\n  getStatusOf,\n  getTokenBalance,\n  getTokenTotalSupply,\n} from '../../utils/infura';\nimport {VTDD} from \"../../constants/tokens\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport GovernanceHeader from \"./Header\";\nimport ProposeCandidate from \"./ProposeCandidate\";\nimport CandidateHistory from \"./CandidateHistory\";\nimport IconHeader from \"../common/IconHeader\";\nimport {canPropose} from \"../../utils/gov\";\n\nfunction Governance({ user }: {user: string}) {\n\n  const [stake, setStake] = useState(new BigNumber(0));\n  const [totalStake, setTotalStake] = useState(new BigNumber(0));\n  const [userStatus, setUserStatus] = useState(0);\n  const [implementation, setImplementation] = useState(\"0x\");\n\n  useEffect(() => {\n    if (user === '') {\n      setStake(new BigNumber(0));\n      setUserStatus(0);\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [statusStr, stakeStr] = await Promise.all([\n        getStatusOf(VTDD.addr, user),\n        getTokenBalance(VTDD.addr, user),\n      ]);\n\n      if (!isCancelled) {\n        setStake(toTokenUnitsBN(stakeStr, VTDD.decimals));\n        setUserStatus(parseInt(statusStr, 10));\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [totalStakeStr, implementationStr] = await Promise.all([\n        getTokenTotalSupply(VTDD.addr),\n        getImplementation(VTDD.addr),\n      ]);\n\n      if (!isCancelled) {\n        setTotalStake(toTokenUnitsBN(totalStakeStr, VTDD.decimals));\n        setImplementation(implementationStr)\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <Box>\n      <GovernanceHeader\n        stake={stake}\n        totalStake={totalStake}\n        accountStatus={userStatus}\n        implementation={implementation}\n      />\n      </Box>\n\n      {\n        canPropose(stake, totalStake) ?\n          <>\n        <h5 style={{\n          fontSize: '10px',\n          margin: '10px 0'\n        }}\n        >Propose Upgrade Candidate</h5>\n            <ProposeCandidate\n              user={user}\n              stake={stake}\n              totalStake={totalStake}\n              accountStatus={userStatus}\n            />\n          </>\n          :\n          ''\n      }\n\n      <h5 style={{\n          fontSize: '10px',\n          margin: '10px 0'\n        }}\n        >Proposals</h5>\n\n      <CandidateHistory user={user}/>\n    </>\n  );\n}\n\nexport default Governance;\n","import React from 'react';\nimport {\n  Box, Button, IconRotateLeft, IconCircleCheck, IconProhibited\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock,\n} from '../common/index';\nimport {recordVote} from '../../utils/web3';\n\nimport {VTDD} from \"../../constants/tokens\";\nimport TextBlock from \"../common/TextBlock\";\n\ntype VoteProps = {\n  candidate: string,\n  stake: BigNumber,\n  vote: number,\n  status: number\n};\n\nconst VOTE_TYPE_MAP = [\"Undecided\", \"Approve\", \"Reject\"]\n\nfunction Vote({\n  candidate, stake, vote, status\n}: VoteProps) {\n  return (\n    <Box heading=\"Vote\">\n      <div style={{display: 'flex'}}>\n        {/* User stake */}\n        <div style={{width: '20%'}}>\n          <BalanceBlock asset=\"My Stake\" balance={stake} suffix={ \"VTDD\"}/>\n        </div>\n        <div style={{width: '20%'}}>\n          <TextBlock label=\"My Vote\" text={VOTE_TYPE_MAP[vote]}/>\n        </div>\n        {/* Remove vote for candidate */}\n        <div style={{width: '18%', paddingTop: '2%'}}>\n          <Button\n            wide\n            icon={<IconRotateLeft/>}\n            label=\"Unvote\"\n            onClick={() => {\n              recordVote(\n                VTDD.addr,\n                candidate,\n                0 // UNDECIDED\n              );\n            }}\n            disabled={status === 1 || vote === 0 || stake.isZero()}\n          />\n        </div>\n        {/* Vote to approve candidate */}\n        <div style={{width: '3%'}} />\n        <div style={{width: '18%', paddingTop: '2%'}}>\n          <Button\n            wide\n            icon={<IconCircleCheck/>}\n            label=\"Accept\"\n            onClick={() => {\n              recordVote(\n                VTDD.addr,\n                candidate,\n                1 // APPROVE\n              );\n            }}\n            disabled={status === 1 || vote === 1 || stake.isZero()}\n          />\n        </div>\n        {/* Vote to reject candidate */}\n        <div style={{width: '3%'}} />\n        <div style={{width: '18%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n              <Button\n                wide\n                icon={<IconProhibited/>}\n                label=\"Reject\"\n                onClick={() => {\n                  recordVote(\n                    VTDD.addr,\n                    candidate,\n                    2 // REJECT\n                  );\n                }}\n                disabled={status === 1 || vote === 2 || stake.isZero()}\n              />\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nexport default Vote;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\nimport { BalanceBlock } from \"../common\";\n\ntype VoteHeaderProps = {\n  approveFor: BigNumber,\n  rejectFor: BigNumber,\n  totalStake: BigNumber,\n  showParticipation: boolean,\n};\n\nfunction approval(approve: BigNumber, reject: BigNumber): BigNumber {\n  return approve.multipliedBy(10000).dividedToIntegerBy(approve.plus(reject)).dividedBy(100)\n}\n\nfunction participation(approve: BigNumber, reject: BigNumber, totalStake: BigNumber): BigNumber {\n  return approve.plus(reject).multipliedBy(10000).dividedToIntegerBy(totalStake).dividedBy(100)\n}\n\nconst VoteHeader = ({\n  approveFor, rejectFor, totalStake, showParticipation\n}: VoteHeaderProps) => (\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\n    <div style={{ width: '25%' }}>\n      <BalanceBlock asset=\"Approve\" balance={approveFor} suffix={ \"VTDD\"}/>\n    </div>\n    <div style={{ width: '25%' }}>\n      <BalanceBlock asset=\"Reject\" balance={rejectFor} suffix={ \"VTDD\"}/>\n    </div>\n    <div style={{ width: '25%' }}>\n      <BalanceBlock asset=\"Approval\" balance={approval(approveFor, rejectFor)} suffix=\"%\" />\n    </div>\n    {showParticipation ?\n      <div style={{width: '25%'}}>\n        <BalanceBlock asset=\"Participation\" balance={participation(approveFor, rejectFor, totalStake)} suffix=\"%\"/>\n      </div> : ''\n    }\n  </div>\n);\n\n\nexport default VoteHeader;\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\n\ntype NumberBlockProps = {\n  title: string,\n  num: BigNumber | string | number\n}\n\nfunction NumberBlock({ title, num }: NumberBlockProps) {\n  const numNum = new BigNumber(num).toNumber();\n\n  return (\n    <>\n      <div style={{ fontSize: 14, padding: 3 }}>{title}</div>\n      <div style={{ fontSize: 24, padding: 3 }}>{numNum}</div>\n\n    </>\n  );\n}\n\nexport default NumberBlock;\n","import React from 'react';\n\nimport NumberBlock from \"../common/NumberBlock\";\n\ntype CommitHeaderProps = {\n  epoch: number\n  startEpoch: number,\n  periodEpoch: number,\n};\n\nconst CommitHeader = ({\n   epoch, startEpoch, periodEpoch,\n}: CommitHeaderProps) => (\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\n    <div style={{ width: '25%' }}>\n      <NumberBlock title=\"Epoch\" num={epoch} />\n    </div>\n    <div style={{ width: '25%' }}>\n      <NumberBlock title=\"Starts\" num={startEpoch} />\n    </div>\n    <div style={{ width: '25%' }}>\n      <NumberBlock title=\"Period\" num={periodEpoch} />\n    </div>\n  </div>\n);\n\n\nexport default CommitHeader;\n","import React from 'react';\nimport {\n  Box, Button, IconUpload\n} from '@aragon/ui';\nimport TextBlock from \"../common/TextBlock\";\nimport {VTDD} from \"../../constants/tokens\";\nimport {commit} from \"../../utils/web3\";\n\ntype CommitProps = {\n  user: string,\n  candidate: string,\n  epoch: number\n  startEpoch: number,\n  periodEpoch: number,\n  initialized: boolean,\n  approved: boolean\n};\n\nfunction Commit({\n  user, candidate, epoch, startEpoch, periodEpoch, initialized, approved,\n}: CommitProps) {\n  function status(epoch, startEpoch, periodEpoch, initialized, approved): string {\n    if (startEpoch === 0) {\n      return \"N/A\";\n    }\n    if (epoch < startEpoch) {\n      return \"Unknown\";\n    }\n    if (epoch < (startEpoch + periodEpoch)) {\n      return \"Voting\"\n    }\n    if (initialized) {\n      return \"Committed\"\n    }\n    if (approved) {\n      return \"Approved\"\n    }\n    return \"Rejected\"\n  }\n  const s = status(epoch, startEpoch, periodEpoch, initialized, approved);\n\n  return (\n    <Box heading=\"Commit\">\n      <div style={{display: 'flex'}}>\n        {/* Status */}\n        <div style={{ width: '30%' }}>\n          <TextBlock label=\"Status\" text={s} />\n        </div>\n        <div style={{width: '40%'}} />\n        {/* Commit candidate */}\n        <div style={{width: '30%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n              <Button\n                wide\n                icon={<IconUpload/>}\n                label=\"Commit\"\n                onClick={() => {\n                  commit(\n                    VTDD.addr,\n                    candidate\n                  );\n                }}\n                disabled={user === '' || s !== 'Approved'}\n              />\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nexport default Commit;\n","import React from 'react';\n\nimport {\n  Header,\n} from '@aragon/ui';\n\ntype IconHeaderProps = {\n  icon: any,\n  text: string\n}\n\nfunction IconHeader({ icon, text }: IconHeaderProps) {\n  return (\n    <>\n      <div style={{ padding: '1%', display: 'flex', alignItems: 'center' }}>\n        <div style={{ marginRight: '2%', fontSize: 48 }}>\n          {icon}\n        </div>\n        <div>\n          <Header primary={text} />\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default IconHeader;\n","import React, { useState, useEffect } from 'react';\nimport { Header, IdentityBadge } from '@aragon/ui';\nimport { useParams } from 'react-router-dom';\n\nimport {\n  getApproveFor, getEpoch, getIsInitialized, getPeriodFor,\n  getRecordedVote,\n  getRejectFor, getStartFor, getStatusOf,\n  getTokenBalance,\n  getTokenTotalSupply, getTotalBondedAt\n} from '../../utils/infura';\nimport {VTDD} from \"../../constants/tokens\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport Vote from \"./Vote\";\nimport VoteHeader from \"./VoteHeader\";\nimport CommitHeader from \"./CommitHeader\";\nimport Commit from \"./Commit\";\nimport IconHeader from \"../common/IconHeader\";\nimport {proposalStatus} from \"../../utils/gov\";\n\nfunction Candidate({ user }: {user: string}) {\n  const { candidate } = useParams();\n\n  const [approveFor, setApproveFor] = useState(new BigNumber(0));\n  const [rejectFor, setRejectFor] = useState(new BigNumber(0));\n  const [totalStake, setTotalStake] = useState(new BigNumber(0));\n  const [vote, setVote] = useState(0);\n  const [status, setStatus] = useState(0);\n  const [userStake, setUserStake] = useState(new BigNumber(0));\n  const [epoch, setEpoch] = useState(0);\n  const [startEpoch, setStartEpoch] = useState(0);\n  const [periodEpoch, setPeriodEpoch] = useState(0);\n  const [initialized, setInitialized] = useState(false);\n\n  useEffect(() => {\n    if (user === '') {\n      setVote(0);\n      setStatus(0);\n      setUserStake(new BigNumber(0));\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [\n        voteStr, statusStr, userStakeStr,\n      ] = await Promise.all([\n        getRecordedVote(VTDD.addr, user, candidate),\n        getStatusOf(VTDD.addr, user),\n        getTokenBalance(VTDD.addr, user),\n      ]);\n\n      if (!isCancelled) {\n        setVote(parseInt(voteStr, 10));\n        setStatus(parseInt(statusStr, 10));\n        setUserStake(toTokenUnitsBN(userStakeStr, VTDD.decimals));\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user, candidate]);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      let [\n        approveForStr, rejectForStr, totalStakeStr,\n        epochStr, startForStr, periodForStr, isInitialized\n      ] = await Promise.all([\n        getApproveFor(VTDD.addr, candidate),\n        getRejectFor(VTDD.addr, candidate),\n        getTokenTotalSupply(VTDD.addr),\n        getEpoch(VTDD.addr),\n        getStartFor(VTDD.addr, candidate),\n        getPeriodFor(VTDD.addr, candidate),\n        getIsInitialized(VTDD.addr, candidate),\n      ]);\n\n      const epochN = parseInt(epochStr, 10);\n      const startN = parseInt(startForStr, 10);\n      const periodN = parseInt(periodForStr, 10);\n\n      const endsAfter = (startN + periodN - 1);\n      if (epochN > endsAfter) {\n        totalStakeStr = await getTotalBondedAt(VTDD.addr, endsAfter);\n      }\n\n      if (!isCancelled) {\n        setApproveFor(toTokenUnitsBN(approveForStr, VTDD.decimals));\n        setRejectFor(toTokenUnitsBN(rejectForStr, VTDD.decimals));\n        setTotalStake(toTokenUnitsBN(totalStakeStr, VTDD.decimals));\n        setEpoch(epochN);\n        setStartEpoch(startN);\n        setPeriodEpoch(periodN);\n        setInitialized(isInitialized);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [candidate]);\n\n  return (\n    <>\n      <IconHeader icon={<i className=\"fas fa-poll\"/>} text=\"Candidate\"/>\n      <IdentityBadge entity={candidate} shorten={false} />\n\n      <VoteHeader\n        approveFor={approveFor}\n        rejectFor={rejectFor}\n        totalStake={totalStake}\n        showParticipation={startEpoch > 106}\n      />\n\n      <Header primary=\"Vote\" />\n      <Vote\n        candidate={candidate}\n        stake={userStake}\n        vote={vote}\n        status={status}\n      />\n\n      <Header primary=\"Commit\" />\n      <CommitHeader\n        epoch={epoch}\n        startEpoch={startEpoch}\n        periodEpoch={periodEpoch}\n      />\n\n      <Commit\n        user={user}\n        candidate={candidate}\n        epoch={epoch}\n        startEpoch={startEpoch}\n        periodEpoch={periodEpoch}\n        initialized={initialized}\n        approved={proposalStatus(epoch, startEpoch, periodEpoch, false, approveFor, rejectFor, totalStake) === \"Approved\"}\n      />\n    </>\n  );\n}\n\nexport default Candidate;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\n\nimport {Box, Distribution} from '@aragon/ui';\nimport {formatMoney, ownership} from \"../../utils/number\";\n\ntype RegulationHeaderProps = {\n  totalSupply: BigNumber,\n\n  totalBonded: BigNumber,\n  totalStaged: BigNumber,\n  totalRedeemable: BigNumber,\n\n  totalDebt: BigNumber,\n  totalCoupons: BigNumber,\n  couponPremium: BigNumber,\n};\n\nconst RegulationHeader = ({\n  totalSupply,\n  totalBonded, totalStaged, totalRedeemable,\n  totalDebt, totalCoupons, couponPremium\n}: RegulationHeaderProps) => {\n  const daoTotalSupply = totalBonded.plus(totalStaged).plus(totalRedeemable);\n  // const circulatingSupply = totalSupply.minus(daoTotalSupply).minus(poolTotalSupply);\n\n  return (\n    <>\n      <div>\n          <Box heading=\"Supply Allocation\">\n            <Distribution\n              heading={`v:${formatMoney(totalSupply.toNumber())}`}\n              items={[\n                { item: 'DAO', percentage: +(ownership(daoTotalSupply, totalSupply).toNumber().toFixed(2)) },\n                // { item: 'Uniswap', percentage: +(ownership(poolTotalSupply, totalSupply).toNumber().toFixed(2)) },\n                // { item: 'Circulating', percentage: +(ownership(circulatingSupply, totalSupply).toNumber().toFixed(2)) },\n              ]}\n            />\n          </Box>\n\n          <Box heading=\"DAO Breakdown\">\n            <Distribution\n              heading={`v:${formatMoney(daoTotalSupply.toNumber())}`}\n              items={[\n                { item: 'Bonded', percentage: +(ownership(totalBonded, daoTotalSupply).toNumber().toFixed(2)) },\n                { item: 'Staged', percentage: +(ownership(totalStaged, daoTotalSupply).toNumber().toFixed(2)) },\n                { item: 'Redeemable', percentage: +(ownership(totalRedeemable, daoTotalSupply).toNumber().toFixed(2)) },\n              ]}\n            />\n          </Box>\n\n\n          {/* <Box heading=\"Uniswap Breakdown\">\n            <Distribution\n              heading={`v:${formatMoney(poolTotalSupply.toNumber())}`}\n              items={[\n                { item: 'Liquidity', percentage: +(ownership(poolLiquidity, poolTotalSupply).toNumber().toFixed(2)) },\n                { item: 'Rewarded', percentage: +(ownership(poolRewarded, poolTotalSupply).toNumber().toFixed(2)) },\n                { item: 'Claimable', percentage: +(ownership(poolClaimable, poolTotalSupply).toNumber().toFixed(2)) },\n              ]}\n            />\n          </Box> */}\n\n      </div>\n    </>\n  );\n}\n\n\nexport default RegulationHeader;\n","import React, {useEffect, useState, useContext} from 'react';\nimport { DataView } from '@aragon/ui';\n\nimport {getAllRegulations} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {formatBN, toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport {EpochContext, ContextType, IEpochs } from \"../../store/EpochStore\";\n\ntype RegulationHistoryProps = {\n  user: string,\n};\n\ntype Regulation = {\n  type: string,\n  data: RegulationEntry\n}\n\ntype RegulationEntry = {\n  epoch: string;\n  price: string;\n  momentumPrice: string;\n  deltaRedeemable: string;\n  deltaDebt: string;\n  deltaBonded: string;\n}\n\nfunction formatPrice(reg) {\n  return reg.epochtype === 'NEUTRAL' ? '1.00' : formatBN(reg.price, 2)\n}\n\nfunction formatMomentumPrice(reg) {\n  return !!reg.momentumPrice.toNumber() ? formatBN(reg.momentumPrice, 2) : '-'\n}\nfunction formatDeltaRedeemable(reg) {\n  return reg.epochtype === 'INCREASE' ?\n    '+' + formatBN(reg.newRedeemable, 2) :\n    '+0.00';\n}\n\nfunction formatDeltaDebt(reg) {\n  return reg.epochtype === 'INCREASE' ?\n    '-' + formatBN(reg.lessDebt, 2) :\n    reg.epochtype === 'DECREASE' ?\n      '+' + formatBN(reg.newDebt, 2) :\n      '+0.00';\n}\n\nfunction formatDeltaBonded(reg) {\n  return reg.epochtype === 'INCREASE' ?\n    '+' + formatBN(reg.newBonded, 2) :\n    '+0.00';\n}\n\nfunction renderEntry(reg: IEpochs): string[] {\n  return [\n    reg.epoch.toString(),\n    formatPrice(reg),\n    formatMomentumPrice(reg),\n    formatDeltaRedeemable(reg),\n    formatDeltaDebt(reg),\n    formatDeltaBonded(reg),\n  ]\n}\n\nfunction RegulationHistory({\n  user,\n}: RegulationHistoryProps) {\n  const [page, setPage] = useState(0)\n  const [initialized, setInitialized] = useState(false)\n  const { regulations, updateRegulations} = React.useContext(EpochContext) as ContextType;\n\n  //Update User balances\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      updateRegulations();\n    }\n\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <DataView\n      fields={['Epoch', 'Price', 'Momentum Price', 'Δ Redeemable', 'Δ Debt', 'Δ Bonded']}\n      status={ initialized ? 'default' : 'loading' }\n      entries={regulations}\n      entriesPerPage={10}\n      page={page}\n      onPageChange={setPage}\n      renderEntry={renderEntry}\n    />\n  );\n}\n\nexport default RegulationHistory;\n","import React, { useState, useEffect } from 'react';\nimport { Header, Split } from '@aragon/ui';\n\nimport {\n  getCouponPremium,\n  getPoolTotalClaimable, getPoolTotalRewarded, getTokenBalance,\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged,\n} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport RegulationHeader from \"./Header\";\nimport RegulationHistory from \"./RegulationHistory\";\nimport IconHeader from \"../common/IconHeader\";\n\nconst ONE_COUPON = new BigNumber(10).pow(18);\n\nfunction Regulation({ user }: {user: string}) {\n\n  const [totalSupply, setTotalSupply] = useState(new BigNumber(0));\n  const [totalBonded, setTotalBonded] = useState(new BigNumber(0));\n  const [totalStaged, setTotalStaged] = useState(new BigNumber(0));\n  const [totalRedeemable, setTotalRedeemable] = useState(new BigNumber(0));\n  const [poolLiquidity, setPoolLiquidity] = useState(new BigNumber(0));\n  const [poolTotalRewarded, setPoolTotalRewarded] = useState(new BigNumber(0));\n  const [poolTotalClaimable, setPoolTotalClaimable] = useState(new BigNumber(0));\n  const [legacyPoolTotalRewarded, setLegacyPoolTotalRewarded] = useState(new BigNumber(0));\n  const [legacyPoolTotalClaimable, setLegacyPoolTotalClaimable] = useState(new BigNumber(0));\n  const [totalDebt, setTotalDebt] = useState(new BigNumber(0));\n  const [totalCoupons, setTotalCoupons] = useState(new BigNumber(0));\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\n\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n\n      const [\n        totalSupplyStr,\n        totalBondedStr, totalStagedStr, totalRedeemableStr,\n        totalDebtStr, totalCouponsStr\n      ] = await Promise.all([\n        getTokenTotalSupply(VTD.addr),\n\n        getTotalBonded(VTDD.addr),\n        getTotalStaged(VTDD.addr),\n        getTotalRedeemable(VTDD.addr),\n\n        // getTokenBalance(VTD.addr, UNI.addr),\n        // getPoolTotalRewarded(poolAddress),\n        // getPoolTotalClaimable(poolAddress),\n\n        // getPoolTotalRewarded(legacyPoolAddress),\n        // getPoolTotalClaimable(legacyPoolAddress),\n\n        getTotalDebt(VTDD.addr),\n        getTotalCoupons(VTDD.addr),\n      ]);\n\n      if (!isCancelled) {\n        setTotalSupply(toTokenUnitsBN(totalSupplyStr, VTD.decimals));\n\n        setTotalBonded(toTokenUnitsBN(totalBondedStr, VTD.decimals));\n        setTotalStaged(toTokenUnitsBN(totalStagedStr, VTD.decimals));\n        setTotalRedeemable(toTokenUnitsBN(totalRedeemableStr, VTD.decimals));\n\n        // setPoolLiquidity(toTokenUnitsBN(poolLiquidityStr, VTD.decimals));\n        // setPoolTotalRewarded(toTokenUnitsBN(poolTotalRewardedStr, VTD.decimals));\n        // setPoolTotalClaimable(toTokenUnitsBN(poolTotalClaimableStr, VTD.decimals));\n\n        // setLegacyPoolTotalRewarded(toTokenUnitsBN(legacyPoolTotalRewardedStr, VTD.decimals));\n        // setLegacyPoolTotalClaimable(toTokenUnitsBN(legacyPoolTotalClaimableStr, VTD.decimals));\n\n        setTotalDebt(toTokenUnitsBN(totalDebtStr, VTD.decimals));\n        setTotalCoupons(toTokenUnitsBN(totalCouponsStr, VTD.decimals));\n\n        if (new BigNumber(totalDebtStr).isGreaterThan(ONE_COUPON)) {\n          const couponPremiumStr = await getCouponPremium(VTDD.addr, ONE_COUPON)\n          setCouponPremium(toTokenUnitsBN(couponPremiumStr, VTD.decimals));\n        } else {\n          setCouponPremium(new BigNumber(0));\n        }\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <Split\n        primary={\n          <>\n          {/* <Header primary=\"Supply History\" /> */}\n\n          <RegulationHistory\n            user={user}\n          />\n          </>\n        }\n        secondary={\n          <RegulationHeader\n          totalSupply={totalSupply}\n  \n          totalBonded={totalBonded}\n          totalStaged={totalStaged}\n          totalRedeemable={totalRedeemable}\n  \n          totalDebt={totalDebt}\n          totalCoupons={totalCoupons}\n          couponPremium={couponPremium}\n        />\n        }\n      />\n    </>\n  );\n}\n\nexport default Regulation;\n","import React from 'react';\nimport {\n  Box, LinkBase, Tag,\n} from '@aragon/ui';\n\nfunction HomePageNoWeb3() {\n\n  return (\n    <>\n      <div style={{ padding: '1%', display: 'flex', alignItems: 'center' }}>\n        <MainButton\n          title=\"No web3 wallet detected\"\n          description=\"Click to get Metamask.\"\n          icon={<i className=\"fas fa-times-circle\"/>}\n          onClick={() => {\n            // @ts-ignore\n            window.location = 'https://www.metamask.io/';\n          }}\n        />\n      </div>\n    </>\n  );\n}\n\ntype MainButtonPropx = {\n  title: string,\n  description: string,\n  icon: any,\n  onClick: Function,\n  tag?:string\n}\n\nfunction MainButton({\n  title, description, icon, onClick, tag,\n}:MainButtonPropx) {\n  return (\n    <LinkBase onClick={onClick} style={{ width: '100%' }}>\n      <Box>\n        <div style={{ padding: 10, fontSize: 18 }}>\n          {title}\n          {tag ? <Tag>{tag}</Tag> : <></>}\n        </div>\n        <span style={{ fontSize: 48 }}>\n          {icon}\n        </span>\n        {/*<img alt=\"icon\" style={{ padding: 10, height: 64 }} src={iconUrl} />*/}\n        <div style={{ paddingTop: 5, opacity: 0.5 }}>\n          {' '}\n          {description}\n          {' '}\n        </div>\n\n      </Box>\n    </LinkBase>\n  );\n}\n\nexport default HomePageNoWeb3;\n","const vtdTheme = {\n    \"palette\": {\n      \"accents_1\": \"#111\",\n      \"accents_2\": \"#333\",\n      \"accents_3\": \"#444\",\n      \"accents_4\": \"#666\",\n      \"accents_5\": \"#888\",\n      \"accents_6\": \"#999\",\n      \"accents_7\": \"#eaeaea\",\n      \"accents_8\": \"#fafafa\",\n      \"background\": \"#212121\",\n      \"foreground\": \"#fff\",\n      \"selection\": \"#f81ce5\",\n      \"secondary\": \"#888\",\n      \"code\": \"#79ffe1\",\n      \"border\": \"#333\",\n      \"link\": \"#3291ff\"\n    },\n    \"expressiveness\": {\n      \"dropdownBoxShadow\": \"0 0 0 1px #333\",\n      \"shadowSmall\": \"0 0 0 1px #333\",\n      \"shadowMedium\": \"0 0 0 1px #333\",\n      \"shadowLarge\": \"0 0 0 1px #333\",\n      \"portalOpacity\": 0.75\n    }\n  }\n\nexport default vtdTheme;","import React, { useMemo, useEffect, useState } from 'react'\nimport { useTheme } from '@geist-ui/react'\nimport { useHistory } from 'react-router-dom';\nimport _JSXStyle from \"styled-jsx/style\"\n\nexport interface Props {\n  href: string\n  text: string\n}\n\nconst ActiveLink: React.FC<Props> = React.memo(({ href, text }) => {\n  const [page, setPage] = useState(\"\");\n  const theme = useTheme()\n  const history = useHistory()\n  const [title, subtitle] = useMemo(() => {\n    if (!/[\\u4E00-\\u9FA5]/.test(text)) return [text, null]\n    if (/zeit|ui|ZEIT|geist|Geist|UI/.test(text)) return [text, null]\n    return [text.replace(/[^\\u4E00-\\u9FA5]/g, ''), text.replace(/[^a-zA-Z]/g, '')]\n  }, [text])\n\n  useEffect(() => {\n    return history.listen((location) => {\n      setPage(location.pathname)\n    })\n  }, [history]);\n  \n  return (\n    <div className=\"link\">\n        <a onClick={() => history.push(href)} className={page.includes(href) ? 'active' : ''}>\n          {title}\n          {subtitle && <span>&nbsp;{subtitle}</span>}\n        </a>\n\n      <style jsx>{`\n        .link {\n          width: 100%;\n          color: ${theme.palette.accents_5};\n          display: flex;\n          height: 2.25rem;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          text-transform: capitalize;\n          padding-bottom: 1rem;\n        }\n\n        a {\n          color: ${theme.palette.accents_7};\n          font-size: 1rem;\n          transition: all 200ms ease;\n          font-weight: 400;\n          display: inline-flex;\n          align-items: baseline;\n        }\n\n        a.active {\n          color: ${theme.palette.success};\n          font-weight: 600;\n        }\n\n        a.active span {\n          color: ${theme.palette.successLight};\n        }\n\n        span {\n          font-size: 0.75rem;\n          color: ${theme.palette.accents_4};\n          font-weight: 400;\n        }\n      `}</style>\n    </div>\n  )\n})\n\nexport default ActiveLink\n","import React, { ReactElement } from 'react'\nimport { useTheme, Spacer } from '@geist-ui/react'\nimport ActiveLink from './active-link'\nimport _JSXStyle from \"styled-jsx/style\"\n\nexport type Sides = {\n  name: string\n  url?: string\n  localeName?: string\n  children?: Sides | Array<Sides>\n}\n\nexport interface SideItemProps {\n  sides: Array<Sides>\n}\n\nconst SideItem: React.FC<React.PropsWithChildren<SideItemProps>> = React.memo(\n  ({sides }) => {\n    const theme = useTheme()\n\n    return (\n      <>\n        {sides.map((side, index) => {\n          // const showChildren = side.children && children\n          return (\n            <div key={`${side.localeName || side.name}-${index}`} className=\"item\">\n              {side.url && <ActiveLink href={side.url} text={side.name} />}\n\n              {/* {showChildren && (\n                <div className=\"children\">\n                  {React.cloneElement(children as ReactElement, {\n                    sides: side.children,\n                  })}\n                </div>\n              )} */}\n            </div>\n          )\n        })}\n        <style jsx>{`\n          .item {\n            width: 100%;\n          }\n\n          .children {\n            display: flex;\n            justify-content: center;\n            align-items: flex-start;\n            flex-direction: column;\n            transition: all 0.2s ease-in-out;\n            position: relative;\n            margin-top: 0.5rem;\n          }\n\n          .active-title {\n            font-weight: bold;\n          }\n\n          @media only screen and (max-width: ${theme.layout.breakpointMobile}) {\n            .link {\n              border-bottom: 1px solid ${theme.palette.border};\n              height: 3.5rem;\n            }\n          }\n        `}</style>\n      </>\n    )\n  },\n)\n\nexport default SideItem\n","/**\n * Wait transactions to be mined.\n *\n * Based on https://raw.githubusercontent.com/Kaisle/await-transaction-mined/master/index.js\n */\n\nimport Web3 from 'web3';\n\nconst DEFAULT_INTERVAL = 500;\n\nconst DEFAULT_BLOCKS_TO_WAIT = 0;\n\ninterface Options {\n  interval: number;\n  blocksToWait: number;\n}\n\n/**\n * Wait for one or multiple transactions to confirm.\n *\n * @param txnHash A transaction hash or list of those\n * @param options Wait timers\n * @return Transaction receipt\n */\nexport function waitTransaction(txnHash: string|string[], options?: Options): Promise<any> {\n    // @ts-ignore\n    const web3 = window.web3;\n    const interval = options && options.interval ? options.interval : DEFAULT_INTERVAL;\n    const blocksToWait = options && options.blocksToWait ? options.blocksToWait : DEFAULT_BLOCKS_TO_WAIT;\n    var transactionReceiptAsync = async function(txnHash, resolve, reject) {\n        try {\n            var receipt = web3.eth.getTransactionReceipt(txnHash);\n            if (!receipt) {\n                setTimeout(function () {\n                    transactionReceiptAsync(txnHash, resolve, reject);\n                }, interval);\n            } else {\n      \n                var resolvedReceipt = await receipt;\n                if (!resolvedReceipt || !resolvedReceipt.blockNumber) setTimeout(function () { transactionReceiptAsync(txnHash, resolve, reject);\n                }, interval);\n                else {\n                  try {\n                  var block = await web3.eth.getBlock(resolvedReceipt.blockNumber)\n                  var current = await web3.eth.getBlock('latest');\n                  if (current.number - block.number >= blocksToWait) {\n                    var txn = await web3.eth.getTransaction(txnHash)\n                    if (txn.blockNumber != null) resolve(resolvedReceipt);\n                    else reject(new Error('Transaction with hash: ' + txnHash + ' ended up in an uncle block.'));\n                  }\n                  else setTimeout(function () {\n                      transactionReceiptAsync(txnHash, resolve, reject);\n                  }, interval);\n                  }\n                  catch (e) {\n                    setTimeout(function () {\n                        transactionReceiptAsync(txnHash, resolve, reject);\n                    }, interval);\n                  }\n                }\n            }\n        } catch(e) {\n            reject(e);\n        }\n    };\n\n    // Resolve multiple transactions once\n    if (Array.isArray(txnHash)) {\n        var promises = [];\n        txnHash.forEach(function (oneTxHash) {\n            //@ts-ignore\n            promises.push(waitTransaction(oneTxHash, options));\n        });\n        return Promise.all(promises);\n    } else {\n        return new Promise(function (resolve, reject) {\n                transactionReceiptAsync(txnHash, resolve, reject);\n            });\n    }\n};\n\n\n/**\n * Check if the transaction was success based on the receipt.\n *\n * https://ethereum.stackexchange.com/a/45967/620\n *\n * @param receipt Transaction receipt\n */\nexport function isSuccessfulTransaction(receipt: any): boolean {\n  if(receipt.status == '0x1' || receipt.status == 1) {\n    return true;\n  } else {\n    return false;\n  }\n}","import React, { useState, useCallback } from 'react';\nimport { LoadingRing } from '@aragon/ui'\nimport {waitTransaction} from '../../../utils/txStatus'\nimport {\n  Button, TransactionProgress\n} from '@aragon/ui';\n\nfunction PendingTxButton() {\n    const [pendingTxVisible, setPendingTxVisible] = useState(false);\n    const [pendingTxStr, setPendingTxStr] = useState('');\n    const [opener, setOpener] = useState(null);\n    const handleOpenerRef = useCallback(node => {\n      setOpener(node)\n    }, [])\n    \n    async function tick(){\n        const _tx = localStorage.getItem('pendingtx')\n        if (_tx) {\n            setPendingTxStr(_tx);\n            var status = await waitTransaction(_tx);\n            console.log(status)\n            localStorage.removeItem('pendingtx');\n        } else {\n            setPendingTxStr('');\n            setPendingTxVisible(false);\n        }\n    };\n\n    setInterval(\n    () => tick(),\n    5000\n    );\n  return (\n    <div style={{display: 'flex', margin:'0 auto'}}>\n        {pendingTxStr ? \n        <div ref={handleOpenerRef} style={{display: 'flex'}}>\n            <Button style={{\n                background: 'rgb(181, 106, 52)',\n                fontSize: '14px',\n                fontFamily: 'aragon-ui',\n                borderRadius: '25px'\n            }} ref={handleOpenerRef} onClick={() => setPendingTxVisible(true)}><LoadingRing/>Pending Tx</Button>\n        </div>\n        : ''}\n\n            <TransactionProgress\n              transactionHashUrl={'https://etherscan.io/tx/' + pendingTxStr}\n              visible={pendingTxVisible}\n              onClose={() => setPendingTxVisible(false)}\n              opener={opener}\n            />\n    </div>\n  );\n}\n\n\nexport default PendingTxButton;\n","import React, { useRef } from 'react'\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport { useTheme, Spacer } from '@geist-ui/react'\nimport SideItem, { Sides } from './side-item'\nimport PendingTxButton from './PendingTx';\nimport _JSXStyle from \"styled-jsx/style\"\n\nexport interface Props {\n  hasWeb3: boolean,\n  user: string,\n  setUser: Function\n}\n\nexport type SideChildren = Sides | Array<Sides>\n\nexport const SideGroup: React.FC<{ sides?: SideChildren }> = React.memo(({ sides }) => {\n  if (!sides) return null\n  sides = Array.isArray(sides) ? sides : [sides]\n  return (\n    <SideItem sides={sides}>\n      <SideGroup />\n    </SideItem>\n  )\n})\n\nexport const Sidebar: React.FC<Props> = React.memo((props) => {\n  const theme = useTheme()\n  const boxRef = useRef<HTMLDivElement>(null)\n  const sides = [\n    {name: \"Core\", url: '/dao/', children: []},\n    {name: \"Supply\", url: '/supply/', children: []},\n    {name: \"Propose/Vote\", url: '/governance/', children: []},\n    {name: \"Debt\", url: '/coupons/', children: []},\n    {name: \"Tools\", url: '/tools/', children: []}  \n  ]\n\n  // const tabbarData = useMemo(() => {\n  //   const allSides = [Metadatas[locale]]\n  //   const currentSide = allSides.filter(side => side.name === tabbar)[0]\n  //   return (currentSide.children || []) as Array<Sides>\n  // }, [locale, tabbar])\n\n  // useEffect(() => {\n  //   Router.events.on('routeChangeStart', () => {\n  //     if (!boxRef.current) return\n  //     updateSidebarScrollHeight(boxRef.current.scrollTop || 0)\n  //   })\n  // }, [])\n\n  // useEffect(() => {\n  //   if (!boxRef.current) return\n  //   boxRef.current.scrollTo({ top: sidebarScrollHeight })\n  // }, [boxRef.current])\n\n  return (\n    <div ref={boxRef} className=\"sides box\">\n      <Spacer />\n      <SideItem sides={sides}>\n        {/* <SideGroup /> */}\n      </SideItem>\n      <Spacer />\n      <PendingTxButton />\n\n      <style jsx>{`\n        .sides {\n          width: 100%;\n          padding-bottom: ${theme.layout.gap};\n        }\n\n        .box {\n          overflow-y: auto;\n          overflow-x: hidden;\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n        }\n\n        .box::-webkit-scrollbar {\n          width: 0;\n          background-color: transparent;\n        }\n\n        .box > :global(.item) {\n          margin-bottom: ${theme.layout.gap};\n        }\n\n        @media only screen and (max-width: ${theme.layout.breakpointMobile}) {\n          .box {\n            padding: calc(3.5 * ${theme.layout.gap}) 15vw;\n            width: 100vw;\n            height: 100%;\n          }\n        }\n      `}</style>\n    </div>\n  )\n})\n\nexport default Sidebar\n","import React from 'react'\nimport { Button, useTheme } from '@geist-ui/react'\n// import SlidersIcon from '@geist-ui/react-icons/sliders'\nimport _JSXStyle from \"styled-jsx/style\"\n\ninterface Props {\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => void\n}\n\nconst TabbarMobile: React.FC<Props> = ({ onClick }) => {\n  const theme = useTheme()\n  const handler = (event: React.MouseEvent<HTMLButtonElement>) => {\n    onClick && onClick(event)\n  }\n\n  return (\n    <div className=\"tabbar\">\n      <Button className=\"toggle\" auto type=\"abort\" onClick={handler}>\n        menu\n        {/* <SlidersIcon size={16} /> */}\n      </Button>\n      <style jsx>{`\n        .tabbar {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          z-index: 950;\n          height: 3.7rem;\n          background-color: ${theme.palette.background};\n          display: flex;\n          align-items: center;\n          padding: 0 calc(${theme.layout.gap} * 2);\n          box-sizing: border-box;\n          justify-content: space-between;\n          border-bottom: 1px solid ${theme.palette.border};\n        }\n\n        .tabbar :global(.toggle) {\n          width: 40px;\n          height: 40px;\n          padding: 0;\n          display: inline-flex;\n          justify-content: center;\n          align-items: center;\n          color: ${theme.palette.accents_6};\n        }\n\n        span {\n          color: ${theme.palette.accents_7};\n          font-size: 0.75rem;\n          display: inline-flex;\n          text-transform: capitalize;\n        }\n\n        @media only screen and (min-width: ${theme.layout.breakpointMobile}) {\n          .tabbar {\n            display: none;\n            visibility: hidden;\n            top: -1000px;\n          }\n        }\n      `}</style>\n    </div>\n  )\n}\n\nexport default TabbarMobile\n","import React, { useEffect } from 'react';\nimport { Modal, Button, Header } from '@aragon/ui';\nimport { useWallet } from 'use-wallet';\n\ntype ConnectModalProps = {\n  visible: boolean,\n  onClose: Function,\n  onConnect: Function\n};\n\nfunction ConnectModal({\n  visible, onClose, onConnect\n}:ConnectModalProps) {\n  const wallet = useWallet();\n\n  const connectMetamask = () => {\n    wallet.connect(\"injected\");\n  };\n\n  const connectWalletConnect = () => {\n    wallet.connect(\"walletconnect\");\n  };\n\n  const connectCoinbase = () => {\n    wallet.connect(\"walletlink\");\n  };\n\n  useEffect(() => {\n    if (wallet.account) {\n      onConnect && onConnect(wallet);\n      onClose && onClose();\n    }\n  }, [wallet, onConnect, onClose]);\n\n  return (\n    <Modal visible={visible} onClose={onClose} style={{zIndex: '500', backgroundColor: '#000'}}>\n\n      <div style={{width: '50%', margin: 'auto', padding: '1%'}}>\n        <Button\n          wide\n          label={'Metamask'}\n          icon={<img src={`./wallets/metamask-fox.svg`} style={{ height: 24 }} alt=\"Metamask\"/>}\n          onClick={connectMetamask}\n        />\n      </div>\n      <div style={{width: '50%', margin: 'auto', padding: '1%'}}>\n        <Button\n          wide\n          label={'WalletConnect'}\n          icon={<img src={`./wallets/wallet-connect.svg`} style={{ height: 24 }} alt=\"WalletConnect\"/>}\n          onClick={connectWalletConnect}\n        />\n      </div>\n      <div style={{width: '50%', margin: 'auto', padding: '1%'}}>\n        <Button\n          wide\n          label={'Coinbase Wallet'}\n          icon={<img src={`./wallets/coinbase-wallet.png`} style={{ height: 24 }} alt=\"Coinbase Wallet\"/>}\n          onClick={connectCoinbase}\n        />\n      </div>\n    </Modal>\n  );\n}\n\nexport default ConnectModal;\n","import React, { useState } from 'react';\nimport { useWallet } from 'use-wallet';\nimport { LogOut } from '@geist-ui/react-icons'\nimport { Button, Spacer } from '@geist-ui/react'\n\nimport {\n  IdentityBadge, IconConnect, LinkBase,\n} from '@aragon/ui';\n\nimport { connect } from '../../../utils/web3';\n// import TotalBalance from \"./TotalBalance\";\nimport ConnectModal from './ConnectModal';\n\ntype connectButtonProps = {\n  hasWeb3: boolean,\n  user: string,\n  setUser: Function\n}\n\nfunction ConnectButton({ hasWeb3, user, setUser }: connectButtonProps) {\n  const { status, reset } = useWallet();\n\n  const [isModalOpen, setModalOpen] = useState(false);\n\n  const connectWeb3 = async (wallet) => {\n    connect(wallet.ethereum);\n    setUser(wallet.account);\n  };\n\n  const disconnectWeb3 = async () => {\n    setUser('');\n    reset();\n  };\n\n  const toggleModal = () => setModalOpen(!isModalOpen);\n\n  return status === 'connected' ? (\n    <div style={{display: 'flex', flexDirection: 'column', minHeight: '5rem', justifyContent: 'space-evenly'}}>\n      <IdentityBadge entity={user} />\n      <Spacer />\n      <LinkBase onClick={disconnectWeb3} style={{marginRight: '8px', height: '24px'}}>\n        <Button shadow icon={<LogOut />} auto size=\"small\">Log Out</Button>\n      </LinkBase>\n    </div>\n  ) : (\n    <>\n      <ConnectModal visible={isModalOpen} onClose={toggleModal} onConnect={connectWeb3}/>\n      <Button icon={<IconConnect />} onClick={toggleModal} disabled={!hasWeb3} auto size=\"small\"> Connect</Button>\n    </>\n  );\n}\n\n\nexport default ConnectButton;\n","import React, { useEffect, useState } from 'react'\nimport Sidebar from './sidebar'\nimport TabbarMobile from './sidebar/tabbar-mobile'\nimport { useTheme } from '@geist-ui/react'\nimport ConnectButton from './sidebar/ConnectButton';\nimport { useHistory } from 'react-router-dom';\nimport _JSXStyle from \"styled-jsx/style\"\n\nexport interface Props {\n  hasWeb3: boolean,\n  user: string,\n  setUser: Function,\n  getStaticProps?: any\n}\n\nexport const Layout: React.FC<React.PropsWithChildren<Props>> = React.memo((props, { children }) => {\n  const [expanded, setExpanded] = useState<boolean>(false)\n  const theme = useTheme()\n  const history = useHistory()\n  const mobileTabbarClickHandler = () => {\n    setExpanded(!expanded)\n  }\n  const logoUrl = `./logo/logo.jpeg` \n  useEffect(() => {})\n\n  return (\n    <div className=\"layout\">\n      <TabbarMobile onClick={mobileTabbarClickHandler} />\n      <aside className=\"sidebar\">\n        <div style={{\n                margin: '10px'\n              }}>\n          <a onClick={() => history.push('/')} style={{\n            marginRight: '16px', \n            height: '40px',\n            // background: '#0a133e'\n            \n            }}>\n\n            <img src={logoUrl} style={{\n              borderRadius: '50%',\n            }} height=\"25px\" alt=\"Variable Timing Dollar\"/>\n          </a>\n          <small style={{\n            position: 'absolute',\n            top: '10px'\n          }}\n          \n        >VTD</small>\n        </div>\n\n        <ConnectButton hasWeb3={props.hasWeb3} user={props.user} setUser={props.setUser} />\n        <Sidebar hasWeb3={props.hasWeb3} user={props.user} setUser={props.setUser} />\n      </aside>\n      <div className=\"side-shadow\" />\n      <main className=\"main\">\n       {props.children}\n      </main>\n      {/* @ts-ignore */}\n      <style jsx>{`\n        .layout {\n          min-height: calc(100vh - 108px);\n          max-width: 100vw;\n          margin: 0 auto;\n          padding: 0 ${theme.layout.gap};\n          display: flex;\n          box-sizing: border-box;\n          background: ${theme.palette.background};\n        }\n\n        .sidebar {\n          width: 120px;\n          margin-right: 20px;\n          -webkit-overflow-scrolling: touch;\n          -webkit-flex-shrink: 0;\n          height: calc(100% - 2rem - 10px + ${false ? '60px' : 0});\n          position: fixed;\n          top: 10px;\n          bottom: 2rem;\n          transform: translateY(${false ? '-60px' : 0});\n          transition: transform 200ms ease-out;\n          z-index: 100;\n        }\n\n        .side-shadow {\n          width: 140px;\n          flex-shrink: 0;\n          height: 100vh;\n        }\n\n        .main {\n          display: flex;\n          max-width: calc(100% - 140px);\n          flex-direction: column;\n          padding-left: 20px;\n          padding-top: 25px;\n          flex: 0 0 100%;\n          padding-bottom: 150px;\n        }\n\n        @media only screen and (max-width: ${theme.layout.breakpointMobile}) {\n          .layout {\n            max-width: 100%;\n            width: 100%;\n            padding: 5rem 1rem;\n          }\n\n          .sidebar {\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            z-index: 10;\n            width: 100vw;\n            height: ${expanded ? '100vh' : '0'};\n            background-color: ${theme.palette.background};\n            padding: 0;\n            overflow: hidden;\n            transition: height 250ms ease;\n          }\n\n          .main {\n            width: 90vw;\n            max-width: 90vw;\n            padding: 0;\n          }\n\n          .side-shadow {\n            display: none;\n            visibility: hidden;\n          }\n        }\n      `}</style>\n    </div>\n  )\n})\n\nexport default Layout\n","import React, {useEffect, useState, useContext} from 'react';\n\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport { Root, Viewport, Theme } from '@aragon/ui';\nimport { UseWalletProvider } from 'use-wallet';\nimport { updateModalMode } from './utils/web3';\nimport { storePreference, getPreference } from './utils/storage';\nimport NavBar from './components/NavBar';\nimport Wallet from \"./components/Wallet\";\nimport Stats from \"./components/Stats\";\n// import SellPressure from \"./components/Stats/sellpressure\";\nimport EpochDetail from \"./components/EpochDetail\";\nimport CouponMarket from \"./components/CouponMarket\";\nimport Governance from \"./components/Governance\";\nimport Candidate from \"./components/Candidate\";\nimport Regulation from \"./components/Regulation\";\nimport Pool from \"./components/Pool\";\nimport HomePageNoWeb3 from \"./components/HomePageNoWeb3\";\nimport vtdTheme from \"./theme/\";\nimport {MainStoreProvider} from \"./store/MainStore\";\nimport {EpochStoreProvider} from \"./store/EpochStore\";\nimport { ButtonGroup, Button, GeistProvider, Card, Divider, CssBaseline, Page } from '@geist-ui/react'\nimport Layout from \"./components/layout/layout\"\n\n\nfunction App() {\n  const storedTheme = getPreference('theme', 'dark');\n  const [hasWeb3, setHasWeb3] = useState(false);\n  const [user, setUser] = useState(''); // the current connected user\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      if (!isCancelled) {\n        // @ts-ignore\n        setHasWeb3(typeof window.ethereum !== 'undefined');\n      }\n    }\n\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <GeistProvider theme={vtdTheme} >\n    <Router>\n      <UseWalletProvider\n        chainId={1}\n        connectors={{\n          walletconnect: { rpcUrl: 'https://mainnet.eth.aragon.network/' },\n          walletlink: {\n            url: 'https://mainnet.eth.aragon.network/',\n            appName:'Coinbase Wallet',\n            appLogoUrl: ''\n          }\n        }}\n      >\n        {/* @ts-ignore */}\n        <MainStoreProvider><EpochStoreProvider>\n            <CssBaseline />\n\n            <Root.Provider>\n              <Viewport.Provider>\n                <Layout hasWeb3={hasWeb3} user={user} setUser={setUser}>\n                  <Theme theme={'dark'}>\n                  {\n                    hasWeb3 ?\n                      <Switch>\n                        <Route path=\"/dao/:override\"><Wallet user={user}/></Route>\n                        <Route path=\"/dao/\"><Wallet user={user}/></Route>\n                        <Route path=\"/epoch/\"><EpochDetail user={user}/></Route>\n                        <Route path=\"/coupons/:override\"><CouponMarket user={user}/></Route>\n                        <Route path=\"/coupons/\"><CouponMarket user={user}/></Route>\n                        <Route path=\"/governance/candidate/:candidate\"><Candidate user={user}/></Route>\n                        <Route path=\"/governance/\"><Governance user={user}/></Route>\n                        {/* <Route path=\"/trade/\"><Trade user={user}/></Route> */}\n                        <Route path=\"/supply/\"><Regulation user={user}/></Route>\n                        {/* <Route path=\"/pool/:override\"><Pool user={user}/></Route>\n                        <Route path=\"/pool/\"><Pool user={user}/></Route> */}\n                        <Route path=\"/tools/\"><Stats user={user}/></Route>\n                        {/* <Route path=\"/bondstats/\"><SellPressure/></Route> */}\n\n                        <Route path=\"/\"><Wallet user={user}/></Route>\n                      </Switch>\n                      :\n                      <Switch>\n                        <Route path=\"/\"><HomePageNoWeb3/></Route>\n                      </Switch>\n                  }\n                  </Theme>\n                </Layout>\n              </Viewport.Provider>\n            </Root.Provider>\n        </EpochStoreProvider></MainStoreProvider>\n      </UseWalletProvider>\n    </Router>\n    </GeistProvider>\n  );\n}\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'react-widgets/dist/css/react-widgets.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport Moment from 'moment'\nimport momentLocalizer from 'react-widgets-moment';\n\nMoment.locale('en')\nmomentLocalizer()\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}