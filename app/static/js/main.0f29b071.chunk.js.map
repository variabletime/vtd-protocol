{"version":3,"sources":["utils/infura.js","constants/tokens.js","constants/values.js","utils/number.ts","components/common/AddressBlock.tsx","components/common/BalanceBlock.tsx","components/common/StatsRowItem.tsx","components/common/SectionTitle.tsx","components/common/MaxButton.tsx","components/common/PriceSection.tsx","components/common/Comment.tsx","components/common/Wrapper.tsx","components/common/CheckBox.tsx","components/Wallet/Header.tsx","utils/txNotifier.ts","utils/web3.js","components/common/BigNumberInput.tsx","components/Pool/WithdrawDeposit.tsx","components/common/TextBlock.tsx","components/Pool/BondUnbond.tsx","components/Pool/Header.tsx","components/Pool/Claim.tsx","components/Pool/Provide.tsx","store/MainStore.tsx","components/Pool/index.tsx","components/Pool/EmptyPool.tsx","components/Wallet/WithdrawDeposit.tsx","components/Wallet/BondUnbond.tsx","store/EpochStore.tsx","components/Wallet/Playground.tsx","components/layout/overlay.tsx","components/Wallet/MomentumHeader.tsx","components/EpochDetail/index.tsx","components/Wallet/index.tsx","components/Stats/index.tsx","components/CouponMarket/Header.tsx","components/CouponMarket/PurchaseCoupons.tsx","components/CouponMarket/PurchaseHistory.tsx","utils/storage.ts","components/CouponMarket/ModalWarning.tsx","components/CouponMarket/index.tsx","components/Governance/Header.tsx","utils/gov.ts","components/Governance/ProposeCandidate.tsx","components/Governance/CandidateHistory.tsx","components/Governance/index.tsx","components/Candidate/Vote.tsx","components/Candidate/VoteHeader.tsx","components/common/NumberBlock.tsx","components/Candidate/CommitHeader.tsx","components/Candidate/Commit.tsx","components/common/IconHeader.tsx","components/Candidate/index.tsx","components/Regulation/Header.tsx","components/Regulation/RegulationHistory.tsx","components/Regulation/index.tsx","components/HomePageNoWeb3/index.tsx","theme/index.js","components/layout/sidebar/active-link.tsx","components/layout/sidebar/side-item.tsx","utils/txStatus.ts","components/layout/sidebar/PendingTx.tsx","components/layout/sidebar/index.tsx","components/layout/sidebar/tabbar-mobile.tsx","components/layout/sidebar/ConnectModal.tsx","components/layout/sidebar/ConnectButton.tsx","components/layout/layout.tsx","App.tsx","serviceWorker.js","index.tsx"],"names":["web3","VTD","VTDD","MAX_UINT256","BigNumber","pow","minus","GOVERNANCE_QUORUM","SUPERMAJORITY","GOVERNANCE_PROPOSAL_THRESHOLD","dollarAbi","require","daoAbi","oldRegulationsAbi","oracleAbi","poolAbi","uniswapPairAbi","undefined","window","ethereum","Web3","getTokenBalance","token","account","a","tokenContract","eth","Contract","methods","balanceOf","call","getTokenTotalSupply","totalSupply","getTokenAllowance","spender","allowance","getBalanceBonded","dao","daoContract","balanceOfBonded","getBalanceOfStaged","balanceOfStaged","getStatusOf","statusOf","getFluidUntil","fluidUntil","getLockedUntil","lockedUntil","getEpoch","epoch","getEpochTime","epochTime","getNextEpochTimestamp","nextEpochTimestamp","getCurrentEpochLength","currentEpochLength","getTotalDebt","totalDebt","getTotalRedeemable","totalRedeemable","getTotalCoupons","totalCoupons","getTotalBonded","totalBonded","getTotalStaged","totalStaged","getTotalBondedAt","totalBondedAt","getApproveFor","candidate","approveFor","getRejectFor","rejectFor","getStartFor","startFor","getPeriodFor","periodFor","getIsInitialized","isInitialized","getRecordedVote","recordedVote","getBalanceOfCoupons","balanceOfCoupons","getCouponPenalty","amount","couponRedemptionPenalty","getBatchBalanceOfCoupons","epochs","calls","map","Promise","all","getCouponsExpiration","couponsExpiration","getBatchCouponsExpiration","getCouponPremium","couponPremium","toFixed","getImplementation","implementation","getCouponEpochs","purchaseP","getPastEvents","filter","fromBlock","transferP","to","bought","given","events","e","returnValues","couponAmount","concat","couponEpochs","reduce","event","prev","get","set","coupons","plus","Map","values","sort","b","getAllProposals","payload","prop","blockNumber","getAllRegulations","oldDaoContract","increaseP","decreaseP","neutralP","increase","decrease","neutral","oincreaseP","odecreaseP","oneutralP","oincrease","odecrease","oneutral","type","data","sorted","getOracleTwap","oracle","oracleContract","getLastPrice","res","getReserves","pairAddress","exchange","getInstantaneousPrice","counterTokenAddr","getToken0","reserve","token0","token0Balance","_reserve0","token1Balance","_reserve1","toLowerCase","dividedBy","getPoolStatusOf","pool","poolContract","getPoolBalanceOfBonded","getPoolBalanceOfStaged","getPoolBalanceOfRewarded","balanceOfRewarded","getPoolBalanceOfClaimable","balanceOfClaimable","getPoolTotalBonded","getPoolTotalRewarded","totalRewarded","getPoolTotalClaimable","totalClaimable","getPoolFluidUntil","toBaseUnitBN","rawAmt","decimals","raw","base","decimalsBN","times","integerValue","toTokenUnitsBN","tokenAmount","tokenDecimals","amt","digits","div","isPos","isZero","isPositive","ownership","balance","multipliedBy","formatBN","position","isLessThan","bnStr","includes","parts","split","i","length","pad","precision","ROUND_FLOOR","toString","replace","delineate","formatMoney","n","toPrecision","Math","abs","Number","AddressBlock","label","address","style","fontSize","padding","IdentityBadge","entity","shorten","BalanceBlock","asset","suffix","integer","balanceBN","gte","tokens","StatsRowItem","value","display","lineHeight","flex","backgroundPosition","backgroundSize","backgroundImage","backgroundRepeat","SectionTitle","MaxButton","onClick","ButtonBase","opacity","PriceSection","symbol","forceDisplay","amtBN","gt","toNumber","Comment","styled","MyCheckBox","text","checked","onCheck","theme","useTheme","CheckBoxWrapper","Checkbox","onChange","margin","props","surfaceContentSecondary","fm","bn","STATUS_MAP","status","accountStatus","unlocked","AccountPageHeader","accountVTDBalance","accountVTDSBalance","totalVTDSSupply","accountStagedBalance","accountBondedBalance","flexWrap","alignItems","justifyContent","notify","v","console","log","localStorage","setItem","testnetUSDCAbi","UINT256_MAX","connect","getAccounts","addresses","enable","checkConnectedAndGetAddress","approve","tokenAddr","oToken","send","from","on","hash","advance","tryAdvance","deposit","withdraw","bond","unbondUnderlying","purchaseCoupons","redeemCoupons","recordVote","voteType","vote","commit","depositPool","callback","withdrawPool","bondPool","unbondPool","unbond","claimPool","claim","providePool","provide","BigNumberInput","setter","adornment","disabled","TextInput","adornmentPosition","wide","isNegative","target","onBlur","WithdrawDeposit","poolAddress","user","stagedBalance","peg","useState","depositAmount","setDepositAmount","withdrawAmount","setWithdrawAmount","Box","heading","paddingTop","comparedTo","width","minWidth","Button","icon","IconCirclePlus","IconLock","pair","flexBasis","IconCircleMinus","addr","TextBlock","BondUnbond","staged","bonded","lockup","bondAmount","setBondAmount","unbondAmount","setUnbondAmount","IconCaution","textAlign","PoolPageHeader","accountUNIBalance","accountRewardedVTDBalance","accountClaimableVTDBalance","poolTotalBonded","accountPoolStatus","xs","sm","Claim","claimable","claimAmount","setClaimAmount","IconArrowDown","Provide","rewarded","pairBalanceVTD","pairBalancePeg","userPEGBalance","userPEGAllowance","provideAmount","setProvideAmount","usdcAmount","setUsdcAmount","PEGToVTDRatio","onChangeAmountVTD","amountVTD","amountVTDBN","amountVTDBU","newAmountPEG","IconArrowUp","isGreaterThan","initialPeggedTokens","name","usdcPair","enabled","stats","vtdBalance","pegBalance","poolReward","poolClaimable","price","lastTwap","usdcPrice","initialTotals","totalLPSupply","totalLPBonded","circulating","totalCoupon","MainContext","React","createContext","MainStoreProvider","children","peggedTokens","setPeggedTokenPools","totals","setTotals","updateTotals","totalSupplyStr","totalBondedStr","totalStagedStr","totalRedeemableStr","totalDebtStr","totalCouponsStr","poolTotal","totalLiquidityPoolSupply","forEach","newTotals","Provider","updatePools","oracleTwap","multiplier","rawUsdcPrice","_peg","Pool","override","useParams","setPoolAddress","userUNIBalance","setUserUNIBalance","userUNIAllowance","setUserUNIAllowance","setUserPEGBalance","setUserPEGAllowance","userStagedBalance","setUserStagedBalance","userBondedBalance","setUserBondedBalance","userRewardedBalance","setUserRewardedBalance","userClaimableBalance","setUserClaimableBalance","userStatus","setUserStatus","userStatusUnlocked","setUserStatusUnlocked","tokensPanelOpened","setTokensPanelOpened","rewardPanelOpened","setRewardPanelOpened","downMD","useContext","useMediaQuery","match","useEffect","isCancelled","updateUserInfo","poolAddressStr","usdcBalance","usdcAllowance","bondedBalance","rewardedBalance","claimableBalance","fluidUntilStr","parseInt","id","setInterval","clearInterval","background","palette","accents_1","Container","gap","justify","md","y","size","ghost","open","SidePanel","title","opened","onClose","EmptyPool","flexDirection","EpochContext","initialEpochData","previousEpochTimestamp","EpochStoreProvider","regulations","setRegulations","epochData","setEpochData","updateRegulations","allRegulations","_regs","result","index","epochtype","momentumPrice","deltaRedeemable","newRedeemable","deltaDebt","lessDebt","newDebt","deltaBonded","newBonded","updateEpochData","nextEpochTimestampStr","currentEpochLengthStr","Playground","upSM","addEpoch","setAddEpoch","_prices","setPrices","_momentumPrice","setMomentumPrice","_labels","setLabels","startWithExistingPrices","prices","labels","regs","reverse","slice","reg","x","priceWeight","Date","now","latestMomentum","latestPrice","latestType","price_data","datasets","backgroundColor","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","borderWidth","hoverBackgroundColor","hoverBorderColor","options","responsive","layout","left","right","top","bottom","scales","yAxes","ticks","xAxes","h2","p","color","href","shadow","caption","src","placeholder","newPrice","parseFloat","newMomentum","addToEpochs","random","addRandomEpoch","accents_2","height","legend","Overlay","customVisible","visible","setVisible","className","preventDefault","zIndex","MomentumHeader","setLoaded","playgroundOpened","setPlaygroundOpened","latestEpoch","estimatedTwap","estimatedMomentum","nextChange","delta","accents_3","accents_6","EpochDetail","setEpoch","setEpochTime","setNextEpochTimestamp","setCurrentEpochLength","advanceMode","setAdvanceMode","endDate","calcAdvanceMode","currentEpochLengthFmt","d","h","floor","m","s","secondsToHms","epochStr","epochTimeStr","marginTop","Content","Subtitle","accents_4","Timer","showEmpty","format","end","Footer","Status","Text","Actions","auto","Wallet","sidePanelOpened","setSidePanelOpened","userVTDBalance","setUserVTDBalance","userVTDAllowance","setUserVTDAllowance","userVTDSBalance","setUserVTDSBalance","setTotalVTDSSupply","vtdAllowance","vtdsBalance","vtdsSupply","lockedUntilStr","max","ONE_COUPON","Stats","setCouponPremium","marketcap","totalYield","daoYield","compound","rate","days","real_rate","LPYield","share","supply","vtdPrice","lp_size","calcLinearYield","couponPremiumStr","peggedToken","hasOwnProperty","marginLeft","CouponMarketHeader","debt","premium","redeemable","PurchaseCoupons","purchaseAmount","setPurchaseAmount","setPremium","updatePremium","lte","purchaseAmountBase","premiumFormatted","maxPurchaseAmount","PurchaseHistory","hideRedeemed","setEpochs","page","setPage","initialized","setInitialized","epochsFromEvents","epochNumbers","couponsExpirations","penalty","expiration","DataView","fields","entries","entriesPerPage","onPageChange","renderEntry","getPreference","key","defaultValue","getItem","storePreference","ModalWarning","storedShowWarning","showWarning","setShowWarning","Modal","closeButton","warning","warningSurfaceContent","CouponMarket","storedHideRedeemed","setBalance","setAllowance","setSupply","setCoupons","setRedeemable","setDebt","setHideRedeemed","balanceStr","allowanceStr","userBalance","supplyStr","debtStr","couponsStr","redeemableStr","alignSelf","CheckBox","GovernanceHeader","stake","totalStake","proposalStatus","start","period","reject","total","canPropose","plausibleCandidate","test","ProposeCandidate","setCandidate","IconToken","formatProposals","proposals","currentTotalStake","initializeds","approves","rejecteds","at","supplyAts","CandidateHistory","history","useHistory","setProposals","allProposals","formattedProposals","proposal","IconRight","push","Governance","setStake","setTotalStake","setImplementation","statusStr","stakeStr","totalStakeStr","implementationStr","VOTE_TYPE_MAP","Vote","IconRotateLeft","IconCircleCheck","IconProhibited","participation","dividedToIntegerBy","VoteHeader","showParticipation","NumberBlock","num","numNum","CommitHeader","startEpoch","periodEpoch","Commit","approved","IconUpload","IconHeader","marginRight","primary","Candidate","setApproveFor","setRejectFor","setVote","setStatus","userStake","setUserStake","setStartEpoch","setPeriodEpoch","voteStr","userStakeStr","approveForStr","rejectForStr","startForStr","periodForStr","epochN","startN","periodN","endsAfter","RegulationHeader","daoTotalSupply","Distribution","items","item","percentage","formatPrice","formatMomentumPrice","formatDeltaRedeemable","formatDeltaDebt","formatDeltaBonded","RegulationHistory","Regulation","setTotalSupply","setTotalBonded","setTotalStaged","setTotalRedeemable","setTotalDebt","setTotalCoupons","Split","secondary","MainButton","description","tag","Tag","HomePageNoWeb3","location","vtdTheme","vtdLight","ActiveLink","memo","closeSideBar","useMemo","subtitle","listen","pathname","accents_5","accents_7","success","successLight","SideItem","sides","side","localeName","breakpointMobile","border","url","waitTransaction","txnHash","interval","blocksToWait","transactionReceiptAsync","resolve","receipt","getTransactionReceipt","setTimeout","resolvedReceipt","getBlock","block","number","getTransaction","Error","Array","isArray","promises","oneTxHash","PendingTxButton","pendingTxVisible","setPendingTxVisible","pendingTxStr","setPendingTxStr","opener","setOpener","handleOpenerRef","useCallback","node","_tx","removeItem","tick","LoadingRing","ref","TransactionProgress","transactionHashUrl","SideGroup","Sidebar","boxRef","useRef","PendingTx","initialChecked","switchTheme","TabbarMobile","connectButton","downSM","ConnectModal","onConnect","wallet","useWallet","alt","ConnectButton","hasWeb3","setUser","reset","isModalOpen","setModalOpen","connectWeb3","disconnectWeb3","toggleModal","minHeight","IconConnect","Layout","expanded","setExpanded","mobileTabbarClickHandler","borderRadius","App","setHasWeb3","themeType","setThemeType","chainId","connectors","walletconnect","rpcUrl","walletlink","appName","appLogoUrl","lastThemeType","Theme","path","Boolean","hostname","Moment","locale","momentLocalizer","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.0f29b071.chunk.js","sourcesContent":["import Web3 from 'web3';\n\nimport BigNumber from 'bignumber.js';\nimport { UniswapV2Router02 } from '../constants/contracts';\nimport { VTD} from '../constants/tokens';\nimport { POOL_EXIT_LOCKUP_EPOCHS } from '../constants/values';\n\nconst dollarAbi = require('../constants/abi/Dollar.json');\nconst daoAbi = require('../constants/abi/Implementation.json');\nconst oldRegulationsAbi = require('../constants/abi/OldRegulationsDao.json');\nconst oracleAbi = require('../constants/abi/Oracle.json');\nconst poolAbi = require('../constants/abi/Pool.json');\nconst uniswapRouterAbi = require('../constants/abi/UniswapV2Router02.json');\nconst uniswapPairAbi = require('../constants/abi/UniswapV2Pair.json');\n\nlet web3;\n// eslint-disable-next-line no-undef\nif (window.ethereum !== undefined) {\n  // eslint-disable-next-line no-undef\n  web3 = new Web3(ethereum);\n}\n\n/**\n *\n * @param {string} token address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getTokenBalance = async (token, account) => {\n  if (account === '') return '0';\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\n  return tokenContract.methods.balanceOf(account).call();\n};\n\nexport const getTokenTotalSupply = async (token) => {\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\n  return tokenContract.methods.totalSupply().call();\n};\n\n/**\n *\n * @param {string} token\n * @param {string} account\n * @param {string} spender\n * @return {Promise<string>}\n */\nexport const getTokenAllowance = async (token, account, spender) => {\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\n  return tokenContract.methods.allowance(account, spender).call();\n};\n\n// Døllar Protocol\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getBalanceBonded = async (dao, account) => {\n  if (account === '') return '0';\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.balanceOfBonded(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getBalanceOfStaged = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.balanceOfStaged(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getStatusOf = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.statusOf(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getFluidUntil = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.fluidUntil(account).call();\n  return ''\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getLockedUntil = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.lockedUntil(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getEpoch = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.epoch().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getEpochTime = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.epochTime().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getNextEpochTimestamp = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.nextEpochTimestamp().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getCurrentEpochLength = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.currentEpochLength().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalDebt = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalDebt().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalRedeemable = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalRedeemable().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalCoupons = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalCoupons().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalBonded = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalBonded().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalStaged = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalStaged().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number} epoch number\n * @return {Promise<string>}\n */\nexport const getTotalBondedAt = async (dao, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalBondedAt(epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getApproveFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.approveFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getRejectFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.rejectFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getStartFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.startFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getPeriodFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.periodFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<boolean>}\n */\nexport const getIsInitialized = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.isInitialized(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getRecordedVote = async (dao, account, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.recordedVote(account, candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @param {number} epoch number\n * @return {Promise<string>}\n */\nexport const getBalanceOfCoupons = async (dao, account, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.balanceOfCoupons(account, epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number} epoch number\n * @param {number} amount number\n * @return {Promise<string>}\n */\nexport const getCouponPenalty = async (dao, epoch, amount) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.couponRedemptionPenalty(epoch, amount).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @param {number[]} epochs number[]\n * @return {Promise<string[]>}\n */\nexport const getBatchBalanceOfCoupons = async (dao, account, epochs) => {\n  const calls = epochs.map((epoch) => getBalanceOfCoupons(dao, account, epoch));\n  return Promise.all(calls);\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number} epoch address\n * @return {Promise<string>}\n */\nexport const getOutstandingCoupons = async (dao, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.outstandingCoupons(epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number} epoch number\n * @return {Promise<string>}\n */\nexport const getCouponsExpiration = async (dao, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.couponsExpiration(epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number[]} epochs number[]\n * @return {Promise<string[]>}\n */\nexport const getBatchCouponsExpiration = async (dao, epochs) => {\n  const calls = epochs.map((epoch) => getCouponsExpiration(dao, epoch));\n  return Promise.all(calls);\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string|BigNumber} amount uint256\n * @return {Promise<string>}\n */\nexport const getCouponPremium = async (dao, amount) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.couponPremium(new BigNumber(amount).toFixed()).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getImplementation = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.implementation().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getPool = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.pool().call();\n};\n\n/**\n *\n * @param {string} dao\n * @param {string} account\n * @return {Promise<any[]>}\n */\nexport const getCouponEpochs = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  const purchaseP = daoContract.getPastEvents('CouponPurchase', {\n    filter: { account },\n    fromBlock: 0,\n  });\n  const transferP = daoContract.getPastEvents('CouponTransfer', {\n    filter: { to: account },\n    fromBlock: 0,\n  });\n  const [bought, given] = await Promise.all([purchaseP, transferP]);\n  const events = bought.map((e) => ({epoch: e.returnValues.epoch, amount: e.returnValues.couponAmount}))\n    .concat(given.map((e) => ({epoch: e.returnValues.epoch, amount: 0})));\n\n  const couponEpochs = [\n    ...events.reduce(\n      (map, event) => {\n        const { epoch, amount } = event;\n        const prev = map.get(epoch);\n\n        if (prev) {\n          map.set(epoch, { epoch, coupons: prev.coupons.plus(new BigNumber(amount)) });\n        } else {\n          map.set(epoch, { epoch, coupons: new BigNumber(amount) });\n        }\n\n        return map;\n      },\n      new Map(),\n    ).values(),\n  ];\n\n  return couponEpochs.sort((a, b) => a - b);\n};\n\n/**\n *\n * @param {string} dao\n * @return {Promise<any[]>}\n */\nexport const getAllProposals = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  const payload = (await daoContract.getPastEvents('Proposal', {\n    fromBlock: 0,\n  })).map((event) => {\n    const prop = event.returnValues;\n    prop.blockNumber = event.blockNumber;\n    return prop;\n  });\n  return payload.sort((a, b) => b.blockNumber - a.blockNumber);\n};\n\n/**\n *\n * @param {string} dao\n * @return {Promise<any[]>}\n */\nexport const getAllRegulations = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  const oldDaoContract = new web3.eth.Contract(oldRegulationsAbi, dao);\n  \n  const increaseP = daoContract.getPastEvents('SupplyIncrease', { fromBlock: 0 });\n  const decreaseP = daoContract.getPastEvents('SupplyDecrease', { fromBlock: 0 });\n  const neutralP = daoContract.getPastEvents('SupplyNeutral', { fromBlock: 0 });\n\n  let [increase, decrease, neutral] = await Promise.all([increaseP, decreaseP, neutralP]);\n\n  const oincreaseP = oldDaoContract.getPastEvents('SupplyIncrease', { fromBlock: 0 });\n  const odecreaseP = oldDaoContract.getPastEvents('SupplyDecrease', { fromBlock: 0 });\n  const oneutralP = oldDaoContract.getPastEvents('SupplyNeutral', { fromBlock: 0 });\n\n  const [oincrease, odecrease, oneutral] = await Promise.all([oincreaseP, odecreaseP, oneutralP]);\n\n  increase= increase.concat(oincrease)\n  decrease= decrease.concat(odecrease)\n  neutral = neutral.concat(oneutral)\n\n\n  const events = increase.map((e) => ({ type: 'INCREASE', data: e.returnValues }))\n    .concat(decrease.map((e) => ({ type: 'DECREASE', data: e.returnValues })))\n    .concat(neutral.map((e) => ({ type: 'NEUTRAL', data: e.returnValues })));\n\n  const sorted = events.sort((a, b) => b.data.epoch - a.data.epoch);\n  return sorted;\n};\n\n/**\n *\n * @param {string} dao\n * @return {Promise<any>}\n */\nexport const getPoolDistributions = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.updateLiquidityForAllPools().call();;\n};\n\n/**\n *\n * @param {string} oracle\n * @return {Promise<any>}\n */\nexport const getOracleTwap = async (oracle) => {\n  const oracleContract = new web3.eth.Contract(oracleAbi, oracle);\n  const res = await oracleContract.methods.getLastPrice().call();\n  return res[0][0]\n};\n\n// Uniswap Protocol\n\nexport const getCost = async (amount, counterTokenAddr) => {\n  const exchange = new web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  // eslint-disable-next-line no-unused-vars\n  const [inputAmount, _] = await exchange.methods.getAmountsIn(\n    new BigNumber(amount).toFixed(),\n    [counterTokenAddr, VTD.addr],\n  ).call();\n  return inputAmount;\n};\n\nexport const getProceeds = async (amount, counterTokenAddr) => {\n  const exchange = new web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  // eslint-disable-next-line no-unused-vars\n  const [_, outputAmount] = await exchange.methods.getAmountsOut(\n    new BigNumber(amount).toFixed(),\n    [VTD.addr, counterTokenAddr],\n  ).call();\n  return outputAmount;\n};\n\nexport const getReserves = async (pairAddress) => {\n  const exchange = new web3.eth.Contract(uniswapPairAbi, pairAddress);\n  return exchange.methods.getReserves().call();\n};\n\n// export const getTWAP = async (pairAddress, daoAddress) => {\n//   const daoContract = new web3.eth.Contract(daoAbi, dao);\n//   const exchange = new web3.eth.Contract(uniswapPairAbi, pairAddress);\n//   const previousBlockTimestamp = await daoContract.methods.previousBlockTimestamp().call();\n//   console.log('previousblock', previousBlockTimestamp)\n//   let [_, price0] = await exchange.methods.price0CumulativeLast().call();\n//   let [_, price1] = await exchange.methods.price1CumulativeLast().call();\n//   const data = await exchange.methods.getReserves().call();\n//   const reserve0 = data._reserve0;\n//   const reserve1 = data._reserve1;\n//   const blockTimestampLast = data._blockTimestampLast;\n//   const blockTimestamp = new BigNumber(Date.now()/1000);\n\n//   if (blockTimestampLast != blockTimestamp) {\n//     const timeElapsed = blockTimestamp.sub(blockTimestampLast);\n\n//     price0 += reserve1.div(reserve0).mul(timeElapsed);\n//     price1 += reserve0.div(reserve1).mul(timeElapsed);\n//   }\n\n//   const timeSinceLastEpoch = blockTimestamp.sub(previousBlockTimestamp);\n//   lastPrice*2**112*lastEpochLength\n//   return [price0, price1];\n// };\n\nexport const getInstantaneousPrice = async (counterTokenAddr, pairAddress) => {\n  const [reserve, token0] = await Promise.all([getReserves(pairAddress), getToken0(pairAddress)]);\n  const token0Balance = new BigNumber(reserve._reserve0);\n  const token1Balance = new BigNumber(reserve._reserve1);\n  if (token0.toLowerCase() === counterTokenAddr.toLowerCase()) {\n    // TODO set to DSD amounts\n    return token0Balance.dividedBy(token1Balance);\n    // return token0Balance.multipliedBy(new BigNumber(10).pow(12)).dividedBy(token1Balance);\n\n  }\n  return token1Balance.dividedBy(token0Balance);\n  // return token1Balance.multipliedBy(new BigNumber(10).pow(12)).dividedBy(token0Balance);\n\n};\n\nexport const getToken0 = async (pairAddress) => {\n  const exchange = new web3.eth.Contract(uniswapPairAbi, pairAddress);\n  return exchange.methods.token0().call();\n};\n\n// Pool\n\nexport const getPoolStatusOf = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.statusOf(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfBonded = async (pool, account) => {\n  if (account === '') return '0';\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfBonded(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfStaged = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfStaged(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfRewarded = async (pool, account) => {\n  if (account === '') return '0';\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfRewarded(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfClaimable = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfClaimable(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolTotalBonded = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.totalBonded().call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolTotalRewarded = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.totalRewarded().call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolTotalClaimable = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.totalClaimable().call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolFluidUntil = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.fluidUntil(account).call();\n\n};\n\n/**\n *\n * @param {string} pool address\n * @return {Promise<any[]>}\n */\nexport const getAllPoolBondings = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n\n  const payload = (await poolContract.getPastEvents('Unbond', {\n    fromBlock: 0,\n  })).map((event) => {\n    const prop = event.returnValues;\n    prop.blockNumber = event.blockNumber;\n    return prop;\n  });\n  return payload.sort((a, b) => b.blockNumber < a.blockNumber);\n};\n\nexport const getAllDaoBondings = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n\n  const payload = (await daoContract.getPastEvents('Unbond', {\n    fromBlock: 0,\n  })).map((event) => {\n    const prop = event.returnValues;\n    prop.blockNumber = event.blockNumber;\n    return prop;\n  });\n  return payload.sort((a, b) => b.blockNumber < a.blockNumber);\n};\n\n","export const VTD = {\n  addr: '0xf0E3543744AFcEd8042131582f2A19b6AEb82794',\n  decimals: 18,\n  symbol: 'VTD',\n};\n\nexport const VTDD = {\n  addr: '0x530608409991C36Ba922B69623BEc57e22B8d331',\n  decimals: 18,\n  symbol: 'VTDD',\n};\n\nexport const PeggedTokens = [\n  {\n    name: 'dsd',\n    pair: {\n      addr: '0x2008dDa1Ad792b156599cE55D12Eb82808C80f01',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0xBD2F0Cd039E0BFcf88901C98c0bFAc5ab27566e3',\n    decimals: 18,\n    symbol: 'DSD',\n    pool: '0x623EA23a36bF98a065701B08Be1Ad17246d0E337',\n    oracle: '0x5e3485B75cdD6Ba8C71Df43b7e8e62dB37357a13',\n    usdcPair: '0x66e33d2605c5fb25ebb7cd7528e7997b0afa55e8',\n    enabled: true\n  },\n\n  {\n    name: 'weth',\n    pair: {\n      addr: '0xbAFA2D6db3256c7B2478F130D511759046cE7a9A',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',\n    decimals: 18,\n    symbol: 'ETH',\n    pool: '0x26C6ee0F68f9D6cE8dd9d9A8dD972B04D7b94289',\n    oracle: '0x22d1EFAE32841FA741B1DD30eA6E8cF514D57DE9',\n    usdcPair: '0xb4e16d0168e52d35cacd2c6185b44281ec28c9dc',\n    enabled: true\n  },\n\n  {\n    name: 'usdt',\n    pair: {\n      addr: '0xe6f3FA003EA33962A4b71095165375bb9Eb42A4c',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0xdAC17F958D2ee523a2206206994597C13D831ec7',\n    decimals: 6, //IMPORTANT\n    symbol: 'USDT',\n    pool: '0x649f1A91a9693C94747e95C9CE3d9A952Ef652A9',\n    oracle: '0xB518894Be07239C2e78323244617765aDf593E86',\n    usdcPair: '0x3041cbd36888becc7bbcbc0045e3b1f144466f5f',\n    enabled: false\n  },\n\n\n  {\n    name: 'usdc',\n    pair: {\n      addr: '0xBB20875B900BFcf7BcC80A9C11C59a1264a4Bb8c',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',\n    decimals: 6, //IMPORTANT\n    symbol: 'USDC',\n    pool: '0xD3DD32395271bAC888dAAF58Aa7FAF635D6d459F',\n    oracle: '0x3121a778536FaBCe3AC903FE2df242097b79eefD',\n    usdcPair: null,\n    enabled: false\n  },\n\n  {\n    name: 'wbtc',\n    pair: {\n      addr: '0x9C57623199024B20b2157Ef6667C412688006A82',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599',\n    decimals: 18,\n    symbol: 'WBTC',\n    pool: '0x8951303cB54F013b41Bcf762F6210bdc9292c1Ac',\n    oracle: '0xa86b4cf024a49CB47eEa037874bF0B1ae7702F21',\n    usdcPair: '0x004375dff511095cc5a197a54140a24efef3a416',\n    enabled: false\n  }\n]","import BigNumber from 'bignumber.js';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const MAX_UINT256 = new BigNumber(2).pow(256).minus(1);\nexport const GOVERNANCE_QUORUM = new BigNumber('0.20');\nexport const SUPERMAJORITY = new BigNumber('0.50');\nexport const GOVERNANCE_PERIOD = 8\nexport const GOVERNANCE_PROPOSAL_THRESHOLD = new BigNumber('0.005');\nexport const COUPON_EXPIRATION = 180\nexport const DAO_EXIT_LOCKUP_EPOCHS = 18\nexport const POOL_EXIT_LOCKUP_EPOCHS = 9\nexport const MOMENTUM_FACTOR = 0.85","import BigNumber from 'bignumber.js';\n\n/**\n * Convert 10.999 to 10999000\n */\nexport function toBaseUnitBN(rawAmt:string| number| BigNumber, decimals: number):BigNumber {\n  const raw = new BigNumber(rawAmt);\n  const base = new BigNumber(10);\n  const decimalsBN = new BigNumber(decimals);\n  return raw.times(base.pow(decimalsBN)).integerValue();\n}\n\n/**\n * Convert 10999000 to 10.999\n */\nexport const toTokenUnitsBN = (tokenAmount:string|number|BigNumber, tokenDecimals:number): BigNumber => {\n  const amt = new BigNumber(tokenAmount);\n  const digits = new BigNumber(10).pow(new BigNumber(tokenDecimals));\n  return amt.div(digits);\n};\n\nexport const isPos = (amount: BigNumber): boolean => {\n  return !amount.isZero() && amount.isPositive();\n};\n\nexport const ownership = (balance: BigNumber, totalSupply: BigNumber): BigNumber => {\n  return balance.multipliedBy(new BigNumber(100)).dividedBy(totalSupply);\n}\n\n/**\n * BigNumber string formatting\n */\n\nexport const formatBN = (amount: BigNumber, position: number): string => {\n  if (amount.isLessThan(new BigNumber(1))) {\n    return pad(amount.precision(position, BigNumber.ROUND_FLOOR).toFixed(), position);\n\n  }\n  return delineate(amount.toFixed(position, BigNumber.ROUND_FLOOR));\n}\n\nfunction delineate(bnStr) {\n  const parts = bnStr.split('.');\n  return parts[0].toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \".\" + parts[1];\n}\n\nfunction pad(bnStr, position) {\n  if (!bnStr.includes(\".\")) {\n    bnStr += \".\";\n  }\n\n  const parts = bnStr.split(\".\");\n  for (let i = 0; i < position - parts[1].length; i++) {\n    bnStr += \"0\";\n  }\n\n  return bnStr\n}\n\nexport function formatMoney(n) {\n  n = n.toPrecision(3)\n  return Math.abs(Number(n)) >= 1.0e+9\n    ? Math.abs(Number(n)) / 1.0e+9 + \"B\"\n    : Math.abs(Number(n)) >= 1.0e+6\n      ? Math.abs(Number(n)) / 1.0e+6 + \"MM\"\n      : Math.abs(Number(n)) >= 1.0e+3\n        ? Math.abs(Number(n)) / 1.0e+3 + \"K\"\n        : Math.abs(Number(n));\n}","import React from 'react';\nimport { IdentityBadge } from '@aragon/ui';\n\ntype AddressBlockProps = {\n  label:string,\n  address: string\n}\n\nfunction AddressBlock({ label, address }: AddressBlockProps) {\n  return (\n    <>\n      <div style={{ fontSize: 16, padding: 3 }}>{label}</div>\n      <div style={{ padding: 5 }}>\n        <IdentityBadge entity={address} shorten />\n      </div>\n    </>\n  );\n}\n\nexport default AddressBlock;\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\nimport {formatBN} from \"../../utils/number\";\n\ntype BlanceBlockProps = {\n  asset: string,\n  balance: BigNumber | string | number\n  suffix?: string\n}\n\nfunction BalanceBlock({ asset, balance, suffix=\"\"}: BlanceBlockProps) {\n  let integer = '0';\n  let digits = '0';\n  const balanceBN = new BigNumber(balance);\n  if (balanceBN.gte(new BigNumber(0))) {\n    const tokens = formatBN(balanceBN, 2).split('.')\n    integer = tokens[0];\n    digits = tokens[1];\n  }\n\n  return (\n    <>\n      <div style={{ fontSize: 14, padding: 3 }}>{asset}</div>\n      <div style={{ padding: 3 }}>\n        <span style={{ fontSize: 24 }}>{integer}</span>\n        .\n        <span style={{ fontSize: 18 }}>\n          {' '}\n          {digits}\n          {' '}\n        </span>\n        {suffix === \"\" ? '' : <span style={{ fontSize: 18 }}>{suffix}</span> }\n      </div>\n    </>\n  );\n}\n\nexport default BalanceBlock;\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\nimport {formatBN} from \"../../utils/number\";\n\ntype BlanceBlockProps = {\n  asset: string,\n  value: BigNumber | string | number\n  suffix?: string,\n}\n\nfunction StatsRowItem({ asset, value, suffix=\"\"}: BlanceBlockProps) {\n  return (\n    <div style={{display: 'flex'}}>\n      <div style={{ fontSize: 12, lineHeight: 2}}>{asset}</div>\n      <div style={{ \n        flex: '1 1 0%',\n        backgroundPosition: 'center bottom',\n        backgroundSize: '0.5rem 0.0625rem',\n        backgroundImage: 'linear-gradient(to right, rgba(225, 225, 225, 0.4) 20%, rgba(255, 255, 255, 0) 0%)',\n        backgroundRepeat: 'repeat-x'\n      }}></div>\n      <div style={{ fontSize: 12, lineHeight: 2}}>\n        <span>{value}</span><span> {suffix}</span>\n      </div>\n    </div>\n  );\n}\n\nexport default StatsRowItem;\n","import React from 'react';\n\nfunction SectionTitle({ title }:{title: string}) {\n  return <div style={{ padding: 10, fontSize: 20 }}>{title}</div>;\n}\n\nexport default SectionTitle;\n","import React from 'react';\n\nimport {\n  ButtonBase,\n} from '@aragon/ui';\n\nfunction MaxButton({ onClick }:{ onClick: Function }) {\n  return (\n    <div style={{ padding: 3 }}>\n      <ButtonBase onClick={onClick}>\n        <span style={{ opacity: 0.5 }}> Max </span>\n      </ButtonBase>\n    </div>\n  );\n}\n\nexport default MaxButton;\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\n\nfunction PriceSection({\n  label, amt, symbol = '', forceDisplay = false,\n}:{label:string, amt: string|number|BigNumber, symbol?:string, forceDisplay?:boolean }) {\n  const amtBN = new BigNumber(amt);\n  if (amtBN.gt(new BigNumber(0)) || forceDisplay) {\n    return (\n      <div style={{ padding: 3, opacity: 0.5 }}>\n        <span style={{ fontSize: 13 }}>{label}</span>\n        <span style={{ fontSize: 13 }}>{amtBN.toNumber().toFixed(5)}</span>\n        <span style={{ fontSize: 13 }}>{symbol}</span>\n      </div>\n    );\n  }\n  return <div style={{ padding: 3, opacity: 0.5 }} />;\n}\n\n\nexport default PriceSection;\n","import React, { ReactChild } from 'react';\n\ntype commentProps = {\n  text: string | ReactChild\n}\n\nfunction Comment({ text }: commentProps) {\n  return (\n    <div style={{ padding: 5, opacity: 0.5 }}>\n      {text}\n    </div>\n  );\n}\n\nexport default Comment;\n","import styled from 'styled-components';\n\nconst FlexWrapper = styled.div`\n  // display: flex;\n  padding-left: 20%;\n  padding-right: 20%;\n`;\n\nexport default FlexWrapper;\n","import React from 'react';\nimport { Checkbox, useTheme } from '@aragon/ui';\nimport styled from 'styled-components';\n\ntype checkBoxProps = {\n  text: string,\n  checked: boolean,\n  onCheck: Function\n}\n\nfunction MyCheckBox({ text, checked, onCheck }: checkBoxProps) {\n  const theme = useTheme();\n  return (\n    <CheckBoxWrapper theme={theme}>\n      <Checkbox\n        checked={checked}\n        onChange={onCheck}\n      />\n      <span style={{ margin: '4px' }}>\n        {text}\n      </span>\n      <br />\n    </CheckBoxWrapper>\n  );\n}\n\nexport default MyCheckBox;\n\nconst CheckBoxWrapper = styled.div`{\n  display: flex;\n  font-size: 14px;\n  color: ${(props) => props.theme.surfaceContentSecondary}\n}`;","import React from 'react';\nimport BigNumber from 'bignumber.js';\n\nimport { StatsRowItem } from '../common/index';\nimport TextBlock from \"../common/TextBlock\";\nimport {ownership} from \"../../utils/number\";\nimport {formatBN} from \"../../utils/number\";\n\ntype AccountPageHeaderProps = {\n  accountVTDBalance: BigNumber,\n  accountVTDSBalance: BigNumber,\n  totalVTDSSupply: BigNumber,\n  accountStagedBalance: BigNumber,\n  accountBondedBalance: BigNumber,\n  accountStatus: number,\n  unlocked: number,\n};\n\nfunction fm(bn){\n  let num = (formatBN(bn, 2))\n  return num;\n}\n\nconst STATUS_MAP = [\"Unlocked\", \"Locked\", \"Locked\"];\n\nfunction status(accountStatus, unlocked) {\n  return STATUS_MAP[accountStatus] + (accountStatus === 0 ? \"\" : \" until epoch:\" + unlocked)\n}\n\nconst AccountPageHeader = ({\n  accountVTDBalance, accountVTDSBalance, totalVTDSSupply, accountStagedBalance, accountBondedBalance, accountStatus, unlocked\n}: AccountPageHeaderProps) => (\n\n<div style={{display: 'flex'}}>\n     \n  <div style={{ flex: '1 0 50%',  padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center', justifyContent: 'space-between' }}>\n      <div style={{ flex: '1 0 50%'}}>\n      <StatsRowItem asset=\"Balance\" value={fm(accountVTDBalance)} suffix={\" VTD\"}/>\n      <StatsRowItem asset=\"Staged\" value={fm(accountStagedBalance)}  suffix={\" VTD\"}/>\n      <StatsRowItem asset=\"Bonded\" value={fm(accountBondedBalance)}  suffix={\" VTD\"}/>\n      </div>\n  </div>\n  <div style={{ flex: '1 0 50%', padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center', justifyContent: 'space-between' }}>\n      <div style={{flex: '1 0 50%'}}>\n          <StatsRowItem asset=\"Dao Ownership\" value={fm(ownership(accountVTDSBalance, totalVTDSSupply))} suffix={\"%\"} />\n          <StatsRowItem asset=\"Dao status\" value={status(accountStatus, unlocked)}  suffix={\"\"}/>\n      </div>\n  </div>\n</div>\n);\n\n\nexport default AccountPageHeader;\n","export const notify = {\n  hash: (v) => {\n    console.log(v)\n    localStorage.setItem('pendingtx', v);\n  }\n}","/* eslint-disable camelcase */\nimport Web3 from 'web3';\nimport BigNumber from 'bignumber.js';\n\nimport { notify } from './txNotifier.ts';\nimport { UniswapV2Router02 } from '../constants/contracts';\n\nimport { VTD } from '../constants/tokens';\n\nconst uniswapRouterAbi = require('../constants/abi/UniswapV2Router02.json');\nconst testnetUSDCAbi = require('../constants/abi/TestnetUSDC.json');\nconst daoAbi = require('../constants/abi/Implementation.json');\nconst poolAbi = require('../constants/abi/Pool.json');\n\nconst DEADLINE_FROM_NOW = 60 * 15;\nconst UINT256_MAX = '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff';\n\n/**\n * Connection Utilities\n */\n\nexport const updateModalMode = async (theme) => {\n  window.darkMode = theme === 'dark';\n};\n\nexport const connect = async (ethereum) => {\n  window.web3 = new Web3(ethereum);\n  let addresses = await window.web3.eth.getAccounts();\n  if (!addresses.length) {\n    try {\n      addresses = await window.ethereum.enable();\n    } catch (e) {\n      console.log(e);\n      return false;\n    }\n  }\n\n  return addresses.length ? addresses[0].toLowerCase() : null;\n};\n\n// eslint-disable-next-line consistent-return\nexport const checkConnectedAndGetAddress = async () => {\n  let addresses = await window.web3.eth.getAccounts();\n  if (!addresses.length) {\n    try {\n      addresses = await window.ethereum.enable();\n      // eslint-disable-next-line no-empty\n    } catch (e) { }\n  }\n\n  return addresses[0];\n};\n\n/**\n * ERC20 Utilities\n */\n\nexport const approve = async (tokenAddr, spender, amt = UINT256_MAX) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new window.web3.eth.Contract(testnetUSDCAbi, tokenAddr);\n  await oToken.methods\n    .approve(spender, amt)\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n\nexport const checkTxStatus = async (hash, callback) => {\n  new window.web3.eth.getTransactionReceipt(hash, callback);\n};\n\n\n// export const mintTestnetUSDC = async (amount) => {\n//   const account = await checkConnectedAndGetAddress();\n//   const dsd = new window.web3.eth.Contract(testnetUSDCAbi, DSD.addr);\n\n//   await dsd.methods.mint(account, new BigNumber(amount).toFixed())\n//     .send({ from: account })\n//     .on('transactionHash', (hash) => {\n//       notify.hash(hash);\n//     });\n// };\n\n/**\n * Uniswap Protocol\n */\n\nexport const buyVTD = async (buyAmount, maxInputAmount, inputTokenAddr) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n\n  await router.methods.swapTokensForExactTokens(\n    buyAmount,\n    maxInputAmount,\n    [inputTokenAddr, VTD.addr],\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const sellVTD = async (sellAmount, minOutputAmount, outputTokenAddr) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n\n  await router.methods.swapExactTokensForTokens(\n    sellAmount,\n    minOutputAmount,\n    [VTD.addr, outputTokenAddr],\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const addLiquidity = async (amountVTD, amountPeg, slippage, counterTokenAddr) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n  const slippageBN = new BigNumber(slippage);\n  const minAmountVTD = new BigNumber(amountVTD)\n    .multipliedBy(new BigNumber(1).minus(slippageBN))\n    .integerValue(BigNumber.ROUND_FLOOR);\n  const minAmountUSDC = new BigNumber(amountPeg)\n    .multipliedBy(new BigNumber(1).minus(slippageBN))\n    .integerValue(BigNumber.ROUND_FLOOR);\n\n  await router.methods.addLiquidity(\n    VTD.addr,\n    counterTokenAddr,\n    new BigNumber(amountVTD).toFixed(),\n    new BigNumber(amountPeg).toFixed(),\n    minAmountVTD,\n    minAmountUSDC,\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const removeLiquidity = async (liquidityAmount, minAmountVTD, minAmountPeg, pegAddress) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n\n  await router.methods.removeLiquidity(\n    VTD.addr,\n    pegAddress,\n    new BigNumber(liquidityAmount).toFixed(),\n    new BigNumber(minAmountVTD).toFixed(),\n    new BigNumber(minAmountPeg).toFixed(),\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n * Døllar Protocol\n */\n\nexport const advance = async (dao) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .tryAdvance()\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const deposit = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  console.log(account)\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  console.log(daoContract)\n  await daoContract.methods\n    .deposit(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const withdraw = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .withdraw(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const bond = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .bond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const unbond = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .unbond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const unbondUnderlying = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .unbondUnderlying(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const purchaseCoupons = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .purchaseCoupons(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const redeemCoupons = async (dao, epoch, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .redeemCoupons(epoch, new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const recordVote = async (dao, candidate, voteType) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .vote(candidate, voteType)\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const commit = async (dao, candidate) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .commit(candidate)\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/* UNI-V2 Incentivization Pool */\nexport const depositPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .deposit(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const withdrawPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .withdraw(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const bondPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .bond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const unbondPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .unbond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const claimPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .claim(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const providePool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .provide(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\nimport {\n  TextInput,\n} from '@aragon/ui';\n\ntype BigNumberInputProps = {\n  value: BigNumber,\n  setter: (value: BigNumber) => void\n  adornment?: any,\n  disabled?: boolean\n}\n\nfunction BigNumberInput({ value, setter, adornment, disabled=false }: BigNumberInputProps) {\n  return (\n    <>\n      <TextInput\n        type=\"number\"\n        adornmentPosition=\"end\"\n        adornment={adornment}\n        wide\n        value={value.isNegative() ? '' : value.toFixed()}\n        onChange={(event) => {\n          if (event.target.value) {\n            setter(new BigNumber(event.target.value));\n          } else {\n            setter(new BigNumber(-1));\n          }\n        }}\n        onBlur={() => {\n          if (value.isNegative()) {\n            setter(new BigNumber(0))\n          }\n        }}\n        disabled={disabled}\n      />\n    </>\n  );\n}\n\nexport default BigNumberInput;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconLock\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {approve, depositPool, withdrawPool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {MAX_UINT256} from \"../../constants/values\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype WithdrawDepositProps = {\n  poolAddress: string\n  user: string\n  balance: BigNumber,\n  allowance: BigNumber,\n  stagedBalance: BigNumber,\n  status: number,\n  peg: any\n};\n\nfunction WithdrawDeposit({\n  poolAddress, user, balance, allowance, stagedBalance, status, peg\n}: WithdrawDepositProps) {\n  const [depositAmount, setDepositAmount] = useState(new BigNumber(0));\n  const [withdrawAmount, setWithdrawAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Stage\" style={{ paddingTop: '2%'}}>\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\n        <div>\n          {/* total Issued */}\n          <div>\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"UNI-V2\"}/>\n          </div>\n          {/* Deposit UNI-V2 into Pool */}\n          <div>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"UNI-V2\"\n                    value={depositAmount}\n                    setter={setDepositAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setDepositAmount(balance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCirclePlus/> : <IconLock/>}\n                  label=\"Deposit\"\n                  onClick={() => {\n                    depositPool(\n                      poolAddress,\n                      toBaseUnitBN(depositAmount, peg.pair.decimals),\n                      (hash) => setDepositAmount(new BigNumber(0))\n                    );\n                  }}\n                  disabled={poolAddress === '' || status !== 0 || !isPos(depositAmount)}\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Withdraw Døllar from DAO */}\n          <div style={{paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"UNI-V2\"\n                    value={withdrawAmount}\n                    setter={setWithdrawAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setWithdrawAmount(stagedBalance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCircleMinus/> : <IconLock/>}\n                  label=\"Withdraw\"\n                  onClick={() => {\n                    withdrawPool(\n                      poolAddress,\n                      toBaseUnitBN(withdrawAmount, peg.pair.decimals),\n                      (hash) => setWithdrawAmount(new BigNumber(0))\n                    );\n                  }}\n                  disabled={poolAddress === '' || status !== 0 || !isPos(withdrawAmount)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        :\n        <div style={{}}>\n          {/* total Issued */}\n          <div >\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"UNI-V2\"}/>\n          </div>\n          <div/>\n          {/* Approve Pool to spend UNI-V2 */}\n          <div style={{ paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus />}\n              label=\"Approve\"\n              onClick={() => {\n                approve(peg.pair.addr, peg.pool);\n              }}\n              disabled={peg.pool === '' || user === ''}\n            />\n          </div>\n        </div>\n      }\n    </Box>\n  );\n}\n\nexport default WithdrawDeposit;\n","import React from 'react';\n\ntype TextBlockProps = {\n  label: string,\n  text: string\n}\n\nfunction TextBlock({ label, text }: TextBlockProps) {\n  return (\n    <>\n      <div style={{ fontSize: 16, padding: 3 }}>{label}</div>\n      <div style={{ fontSize: 16, padding: 3 }}>{text}</div>\n    </>\n  );\n}\n\nexport default TextBlock;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconCaution\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {bondPool, unbondPool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport BigNumberInput from \"../common/BigNumberInput\";\nimport TextBlock from \"../common/TextBlock\";\n\ntype BondUnbondProps = {\n  poolAddress: string,\n  staged: BigNumber,\n  bonded: BigNumber,\n  status: number,\n  lockup: number,\n  peg: any\n};\n\nfunction BondUnbond({\n  poolAddress, staged, bonded, status, lockup, peg\n}: BondUnbondProps) {\n  const [bondAmount, setBondAmount] = useState(new BigNumber(0));\n  const [unbondAmount, setUnbondAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Bond\">\n      <div>\n        {/* Total bonded */}\n        <div>\n          <BalanceBlock asset=\"Bonded\" balance={bonded} suffix={\"UNI-V2\"} />\n        </div>\n        {/* Exit lockup */}\n        <div>\n          <TextBlock label=\"Exit Lockup\" text={lockup === 0 ? \"\" : lockup === 1 ? \"1 epoch\" : `${lockup} epochs`}/>\n        </div>\n        {/* Bond UNI-V2 within Pool */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  adornment=\"UNI-V2\"\n                  value={bondAmount}\n                  setter={setBondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setBondAmount(staged);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCirclePlus/> : <IconCaution/>}\n                label=\"Bond\"\n                onClick={() => {\n                  bondPool(\n                    poolAddress,\n                    toBaseUnitBN(bondAmount, peg.pair.decimals),\n                    (hash) => setBondAmount(new BigNumber(0))\n                  );\n                }}\n                disabled={poolAddress === '' || !isPos(bondAmount)}\n              />\n            </div>\n          </div>\n        </div>\n        <div style={{flexBasis: '2%'}}/>\n        {/* Unbond UNI-V2 within Pool */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  adornment=\"UNI-V2\"\n                  value={unbondAmount}\n                  setter={setUnbondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setUnbondAmount(bonded);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCircleMinus/> : <IconCaution/>}\n                label=\"Unbond\"\n                onClick={() => {\n                  unbondPool(\n                    poolAddress,\n                    toBaseUnitBN(unbondAmount, peg.pair.decimals),\n                    (hash) => setUnbondAmount(new BigNumber(0))\n                  );\n                }}\n                disabled={poolAddress === '' || !isPos(unbondAmount)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> Bonding events will restart the lockup timer </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default BondUnbond;\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\n\nimport { BalanceBlock,StatsRowItem } from '../common/index';\n\nimport {Grid} from '@geist-ui/react'\nimport {ownership} from \"../../utils/number\";\nimport {formatBN} from \"../../utils/number\";\n\ntype PoolPageHeaderProps = {\n  accountUNIBalance: BigNumber,\n  accountStagedBalance: BigNumber,\n  accountBondedBalance: BigNumber,\n  accountRewardedVTDBalance: BigNumber,\n  accountClaimableVTDBalance: BigNumber,\n  poolTotalBonded: BigNumber,\n  accountPoolStatus: number,\n  unlocked: number,\n};\n\nconst STATUS_MAP = [\"Unlocked\", \"Locked\"];\n\nfunction status(accountStatus, unlocked) {\n  return STATUS_MAP[accountStatus] + (accountStatus === 0 ? \"\" : \" until \" + unlocked)\n}\n\nfunction fm(bn){\n  let num = (formatBN(bn, 2))\n  return num;\n}\n\n\n\nconst PoolPageHeader = ({\n  accountUNIBalance, accountStagedBalance, accountBondedBalance, accountRewardedVTDBalance, accountClaimableVTDBalance, poolTotalBonded, accountPoolStatus, unlocked\n}: PoolPageHeaderProps) => (\n  <>\n    <Grid xs={24} sm={12}>\n        <StatsRowItem asset=\"Balance\" value={fm(accountUNIBalance)} suffix={\" UNI-V2\"}/>\n        <StatsRowItem asset=\"Staged\" value={fm(accountStagedBalance)}  suffix={\" UNI-V2\"}/>\n        <StatsRowItem asset=\"Bonded\" value={fm(accountBondedBalance)}  suffix={\" UNI-V2\"}/>\n     </Grid>\n     <Grid xs={24} sm={12}>\n\n            <StatsRowItem asset=\"Rewarded\" value={fm(accountRewardedVTDBalance)}  suffix={\" VTD\"}/>\n            <StatsRowItem asset=\"Claimable\" value={fm(accountClaimableVTDBalance)}  suffix={\" VTD\"}/>\n            <StatsRowItem asset=\"Pool Ownership\" value={fm(ownership(accountBondedBalance, poolTotalBonded))} suffix={\"%\"} />\n            <StatsRowItem asset=\"Pool status\" value={status(accountPoolStatus, unlocked)}  suffix={\"\"}/>\n    </Grid>\n  </>\n);\n\n\nexport default PoolPageHeader;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconArrowDown\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {claimPool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {VTD} from \"../../constants/tokens\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype ClaimProps = {\n  poolAddress: string\n  claimable: BigNumber,\n  status: number\n};\n\nfunction Claim({\n  poolAddress, claimable, status\n}: ClaimProps) {\n  const [claimAmount, setClaimAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Claim\">\n      <div>\n        {/* total Issued */}\n        <div>\n          <BalanceBlock asset=\"Claimable\" balance={claimable} suffix={\"VTD\"} />\n        </div>\n        {/* Deposit UNI-V2 into Pool */}\n        <div/>\n        <div style={{paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  adornment=\"VTD\"\n                  value={claimAmount}\n                  setter={setClaimAmount}\n                  disabled={status !== 0}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setClaimAmount(claimable);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '6em'}}>\n              <Button\n                wide\n                icon={<IconArrowDown/>}\n                label=\"Claim\"\n                onClick={() => {\n                  claimPool(\n                    poolAddress,\n                    toBaseUnitBN(claimAmount, VTD.decimals),\n                    (hash) => setClaimAmount(new BigNumber(0))\n                  );\n                }}\n                disabled={poolAddress === '' || status !== 0 || !isPos(claimAmount)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> Unbond to make rewards claimable after your status is Unlocked </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default Claim;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconArrowUp, IconCirclePlus\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton, PriceSection,\n} from '../common/index';\nimport {approve, providePool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN, toTokenUnitsBN} from '../../utils/number';\nimport {VTD} from \"../../constants/tokens\";\nimport {MAX_UINT256} from \"../../constants/values\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype ProvideProps = {\n  poolAddress: string,\n  user: string,\n  rewarded: BigNumber,\n  pairBalanceVTD: BigNumber,\n  pairBalancePeg: BigNumber,\n  userPEGBalance: BigNumber,\n  userPEGAllowance: BigNumber,\n  status: number,\n  peg: any,\n};\n\nfunction Provide({\n  poolAddress, user, rewarded, pairBalanceVTD, pairBalancePeg, userPEGBalance, userPEGAllowance, status, peg\n}: ProvideProps) {\n  const [provideAmount, setProvideAmount] = useState(new BigNumber(0));\n  const [usdcAmount, setUsdcAmount] = useState(new BigNumber(0));\n\n  const PEGToVTDRatio = pairBalancePeg.isZero() ? new BigNumber(1) : pairBalancePeg.div(pairBalanceVTD);\n\n  const onChangeAmountVTD = (amountVTD) => {\n    if (!amountVTD) {\n      setProvideAmount(new BigNumber(0));\n      setUsdcAmount(new BigNumber(0));\n      return;\n    }\n\n    const amountVTDBN = new BigNumber(amountVTD)\n    setProvideAmount(amountVTDBN);\n\n    const amountVTDBU = toBaseUnitBN(amountVTDBN, VTD.decimals);\n    const newAmountPEG = toTokenUnitsBN(\n      amountVTDBU.multipliedBy(PEGToVTDRatio).integerValue(BigNumber.ROUND_FLOOR),\n      VTD.decimals);\n    setUsdcAmount(newAmountPEG);\n  };\n\n  return (\n    <Box heading=\"Provide\">\n      {userPEGAllowance.comparedTo(MAX_UINT256.dividedBy(2)) > 0 ?\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total rewarded */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset=\"Rewarded\" balance={rewarded} suffix={\"VTD\"} />\n          </div>\n          <div style={{flexBasis: '33%'}}>\n            <BalanceBlock asset={`${peg.symbol} Balance`} balance={userPEGBalance} suffix={peg.symbol} />\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Provide liquidity using Pool rewards */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"VTD\"\n                    value={provideAmount}\n                    setter={onChangeAmountVTD}\n                    disabled={status === 1}\n                  />\n                  <PriceSection label=\"Requires \" amt={usdcAmount} symbol={peg.symbol}/>\n                  <MaxButton\n                    onClick={() => {\n                      onChangeAmountVTD(rewarded);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '6em'}}>\n                <Button\n                  wide\n                  icon={<IconArrowUp/>}\n                  label=\"Provide\"\n                  onClick={() => {\n                    providePool(\n                      poolAddress,\n                      toBaseUnitBN(provideAmount, VTD.decimals),\n                      (hash) => setProvideAmount(new BigNumber(0))\n                    );\n                  }}\n                  disabled={poolAddress === '' || status !== 0 || !isPos(provideAmount) || usdcAmount.isGreaterThan(userPEGBalance)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        :\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total rewarded */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset=\"Rewarded\" balance={rewarded} suffix={\"VTD\"} />\n          </div>\n          <div style={{flexBasis: '33%'}}>\n            <BalanceBlock asset={`${peg.symbol} Balance`} balance={userPEGBalance} suffix={peg.symbol}/>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Approve Pool to spend DSD */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus/>}\n              label=\"Approve\"\n              onClick={() => {\n                approve(peg.addr, poolAddress);\n              }}\n              disabled={poolAddress === '' || user === ''}\n            />\n          </div>\n        </div>\n      }\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> Zap your rewards directly to LP by providing more ${peg.symbol} </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default Provide;\n","import React from 'react';\nimport {VTD, VTDD, PeggedTokens} from \"../constants/tokens\";\nimport BigNumber from 'bignumber.js';\nimport {\n  getPoolTotalBonded,\n  getTokenBalance,\n  getOracleTwap,\n  getInstantaneousPrice,\n  getPoolTotalClaimable, getPoolTotalRewarded,\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged\n} from '../utils/infura';\nimport { toTokenUnitsBN } from '../utils/number';\n\nexport interface ITodo {\n  id: number\n  title: string\n  description: string\n  status: boolean\n}\n\nexport interface IPeggedToken {\n  name: string,\n  pair: {\n    addr: string,\n    decimals: number,\n    symbol: string,\n  },\n  addr: string,\n  decimals: number,\n  symbol: string,\n  pool: string,\n  oracle: string,\n  enabled: boolean,\n  usdcPair: string,\n  usdcPrice: BigNumber,\n  stats: PegStats\n}\n\nexport interface PegStats {\n  vtdBalance: BigNumber,\n  pegBalance: BigNumber,\n  poolReward: BigNumber,\n  poolClaimable: BigNumber,\n  poolTotalBonded: BigNumber,\n  price: BigNumber,\n  lastTwap: BigNumber\n}\n\nexport type ContextType = {\n  peggedTokens: IPeggedToken[],\n  totals: {\n    totalSupply: BigNumber,\n    totalBonded: BigNumber,\n    totalStaged: BigNumber,\n    totalLPSupply: BigNumber,\n    totalLPBonded: BigNumber,\n    circulating: BigNumber,\n    totalRedeemable: BigNumber,\n    totalDebt: BigNumber,\n    totalCoupon: BigNumber\n  },\n  updatePools: () => void,\n  updateTotals: () => {}\n}\n\n//@ts-ignore\nconst initialPeggedTokens: IPeggedToken[] = PeggedTokens.map((peg) => {\n  peg.stats = {\n    vtdBalance: new BigNumber(0),\n    pegBalance: new BigNumber(0),\n    poolReward: new BigNumber(0),\n    poolClaimable: new BigNumber(0),\n    poolTotalBonded: new BigNumber(0),\n    price: new BigNumber(0),\n    lastTwap: new BigNumber(0)\n  } \n\n  peg.usdcPrice = new BigNumber(0)\n  return peg\n})\n\nconst initialTotals = {\n  totalSupply: new BigNumber(0),\n  totalBonded: new BigNumber(0),\n  totalStaged: new BigNumber(0),\n  totalLPSupply: new BigNumber(0),\n  totalLPBonded: new BigNumber(0),\n  circulating: new BigNumber(0),\n  totalRedeemable: new BigNumber(0),\n  totalDebt: new BigNumber(0),\n  totalCoupon: new BigNumber(0)\n}\n\nexport const MainContext = React.createContext<ContextType | null>(null);\n\nexport const MainStoreProvider: React.FC<React.ReactNode> = ({ children }) => {\n  const [peggedTokens, setPeggedTokenPools] = React.useState<IPeggedToken[]>(initialPeggedTokens);\n  const [totals, setTotals] = React.useState(initialTotals);\n\n  const updatePools = () => {\n    let pegs: IPeggedToken[] = []\n    peggedTokens.forEach(async (peg) =>  { \n      if (peg.enabled) {\n        let [vtdBalance, pegBalance, poolReward, poolClaimable, totalBonded, oracleTwap] = await Promise.all([\n          getTokenBalance(VTD.addr, peg.pair.addr),\n          getTokenBalance(peg.addr, peg.pair.addr),\n          getPoolTotalRewarded(peg.pool),\n          getPoolTotalClaimable(peg.pool),\n          getPoolTotalBonded(peg.pool),\n          getOracleTwap(peg.oracle)\n          ]);\n        \n        let usdcPrice = new BigNumber(1e18);\n        if (!(peg.symbol === 'USDC')) {\n           let multiplier = peg.decimals == 18 ? 1e12 : 1;\n           const [rawUsdcPrice] = await Promise.all([getInstantaneousPrice('0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48', peg.usdcPair)])\n           usdcPrice = rawUsdcPrice.multipliedBy(new BigNumber(multiplier));\n        }\n\n        peg.stats = {\n          vtdBalance: toTokenUnitsBN(vtdBalance, VTD.decimals),\n          pegBalance: toTokenUnitsBN(pegBalance, peg.decimals),\n          poolReward: toTokenUnitsBN(poolReward, VTD.decimals),\n          poolClaimable: toTokenUnitsBN(poolClaimable, VTD.decimals),\n          poolTotalBonded: toTokenUnitsBN(totalBonded, VTD.decimals),\n          price: toTokenUnitsBN(pegBalance, peg.decimals).dividedBy(toTokenUnitsBN(vtdBalance, VTD.decimals)),\n          lastTwap: toTokenUnitsBN(new BigNumber(oracleTwap), VTD.decimals),\n        }\n\n        peggedTokens.filter((_peg: IPeggedToken) => {\n          if (_peg.symbol === peg.symbol) {\n            _peg.stats = peg.stats;\n            _peg.usdcPrice = usdcPrice;\n            setPeggedTokenPools([...peggedTokens]);\n          }\n        });\n      }\n    })\n  };\n\n  const updateTotals = async () => {\n    const [\n      totalSupplyStr,\n      totalBondedStr, totalStagedStr, totalRedeemableStr,\n      totalDebtStr, totalCouponsStr\n      ] = await Promise.all([\n      getTokenTotalSupply(VTD.addr),\n\n      getTotalBonded(VTDD.addr),\n      getTotalStaged(VTDD.addr),\n      getTotalRedeemable(VTDD.addr),\n\n      getTotalDebt(VTDD.addr),\n      getTotalCoupons(VTDD.addr)\n\n      ]);\n\n    let poolTotal = new BigNumber(0);\n    let totalLiquidityPoolSupply = new BigNumber(0);\n    peggedTokens.forEach((peg) => {\n      totalLiquidityPoolSupply = totalLiquidityPoolSupply.plus(peg.stats.poolReward)\n        .plus(peg.stats.poolClaimable)\n        poolTotal = poolTotal.plus(peg.stats.vtdBalance)\n    })\n\n    const newTotals = {\n      totalSupply: toTokenUnitsBN(totalSupplyStr, VTD.decimals),\n      totalBonded: toTokenUnitsBN(totalBondedStr, VTD.decimals),\n      totalStaged: toTokenUnitsBN(totalStagedStr, VTD.decimals),\n      totalLPSupply: totalLiquidityPoolSupply,\n      totalLPBonded: poolTotal,\n      circulating: new BigNumber(0),\n      totalRedeemable: toTokenUnitsBN(totalRedeemableStr, VTD.decimals),\n      totalDebt: toTokenUnitsBN(totalDebtStr, VTD.decimals),\n      totalCoupon: toTokenUnitsBN(totalCouponsStr, VTD.decimals)\n    }\n    newTotals.circulating = newTotals.totalSupply.minus(newTotals.totalLPBonded)\n                                                 .minus(newTotals.totalBonded)\n                                                 .minus(newTotals.totalStaged)\n                                                 .minus(newTotals.totalLPSupply)\n    setTotals(newTotals);\n  }\n\n  return (\n    <MainContext.Provider value={{peggedTokens, totals, updatePools, updateTotals }}>\n      {children}\n    </MainContext.Provider>\n  );\n};\n\nexport default MainStoreProvider;\n","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport BigNumber from 'bignumber.js';\nimport {\n  getPoolBalanceOfBonded, getPoolBalanceOfClaimable,\n  getPoolBalanceOfRewarded,\n  getPoolBalanceOfStaged,\n  getPoolStatusOf, getPoolTotalBonded,\n  getTokenAllowance,\n  getTokenBalance,\n  getPoolFluidUntil,\n  getPoolDistributions\n} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {formatBN} from \"../../utils/number\";\nimport {POOL_EXIT_LOCKUP_EPOCHS} from \"../../constants/values\";\nimport { toTokenUnitsBN } from '../../utils/number';\nimport { SidePanel } from '@aragon/ui';\nimport { ButtonGroup, Button, Card, Divider, useTheme, Grid, useMediaQuery, Link } from '@geist-ui/react'\nimport { X } from '@geist-ui/react-icons'\n\nimport WithdrawDeposit from \"./WithdrawDeposit\";\nimport BondUnbond from \"./BondUnbond\";\nimport PoolPageHeader from \"./Header\";\nimport Claim from \"./Claim\";\nimport Provide from \"./Provide\";\nimport { MainContext, ContextType } from \"../../store/MainStore\";\n\n// import Migrate from \"./Migrate\";\n// import {DollarPool4} from \"../../constants/contracts\";\n\ntype PoolProps = {user: string, peg: any};\n\nfunction Pool({ user, peg }: PoolProps) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n  const theme = useTheme();\n  const [poolAddress, setPoolAddress] = useState(\"\");\n  const [userUNIBalance, setUserUNIBalance] = useState(new BigNumber(0));\n  const [userUNIAllowance, setUserUNIAllowance] = useState(new BigNumber(0));\n  const [userPEGBalance, setUserPEGBalance] = useState(new BigNumber(0));\n  const [userPEGAllowance, setUserPEGAllowance] = useState(new BigNumber(0));\n  const [userStagedBalance, setUserStagedBalance] = useState(new BigNumber(0));\n  const [userBondedBalance, setUserBondedBalance] = useState(new BigNumber(0));\n  const [userRewardedBalance, setUserRewardedBalance] = useState(new BigNumber(0));\n  const [userClaimableBalance, setUserClaimableBalance] = useState(new BigNumber(0));\n  const [userStatus, setUserStatus] = useState(0);\n  const [userStatusUnlocked, setUserStatusUnlocked] = useState(0);\n  const [lockup, setLockup] = useState(0);\n  const [tokensPanelOpened, setTokensPanelOpened] = useState(false)\n  const [rewardPanelOpened, setRewardPanelOpened] = useState(false)\n  const { updatePools } = React.useContext(MainContext) as ContextType;\n  const downMD = useMediaQuery('sm', { match: 'down' })\n\n  function fm(bn){\n    let num = (formatBN(bn, 2))\n    return num;\n  }\n  //Update User balances\n  useEffect(() => {\n    if (user === '') {\n      setPoolAddress(\"\");\n      setUserUNIBalance(new BigNumber(0));\n      setUserUNIAllowance(new BigNumber(0));\n      setUserPEGBalance(new BigNumber(0));\n      setUserPEGAllowance(new BigNumber(0));\n      setUserStagedBalance(new BigNumber(0));\n      setUserBondedBalance(new BigNumber(0));\n      setUserRewardedBalance(new BigNumber(0));\n      setUserClaimableBalance(new BigNumber(0));\n      setUserStatus(0);\n      setUserStatusUnlocked(0);\n      \n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const poolAddressStr = await peg.pool;\n\n      const [\n        balance, usdcBalance,\n        allowance, usdcAllowance, stagedBalance, bondedBalance,\n        rewardedBalance, claimableBalance, status, fluidUntilStr\n      ] = await Promise.all([\n        getTokenBalance(peg.pair.addr, user),\n        getTokenBalance(peg.addr, user),\n\n        getTokenAllowance(peg.pair.addr, user, poolAddressStr),\n        getTokenAllowance(peg.addr, user, poolAddressStr),\n        getPoolBalanceOfStaged(poolAddressStr, user),\n        getPoolBalanceOfBonded(poolAddressStr, user),\n\n        getPoolBalanceOfRewarded(poolAddressStr, user),\n        getPoolBalanceOfClaimable(poolAddressStr, user),\n        getPoolStatusOf(poolAddressStr, user),\n        getPoolFluidUntil(poolAddressStr, user),\n        // getPoolDistributions(VTDD.address)\n      ]);\n      \n      const userUNIBalance = toTokenUnitsBN(balance, peg.pair.decimals);\n      const userPEGBalance = toTokenUnitsBN(usdcBalance, peg.decimals);\n      const userStagedBalance = toTokenUnitsBN(stagedBalance, peg.pair.decimals);\n      const userBondedBalance = toTokenUnitsBN(bondedBalance, peg.pair.decimals);\n      const userRewardedBalance = toTokenUnitsBN(rewardedBalance, VTD.decimals);\n      const userClaimableBalance = toTokenUnitsBN(claimableBalance, VTD.decimals);\n      const userStatus = parseInt(status, 10);\n      const fluidUntil = parseInt(fluidUntilStr, 10);\n\n      if (!isCancelled) {\n        setPoolAddress(poolAddressStr);\n        setUserUNIBalance(new BigNumber(userUNIBalance));\n        setUserUNIAllowance(new BigNumber(allowance));\n        setUserPEGAllowance(new BigNumber(usdcAllowance));\n        setUserPEGBalance(new BigNumber(userPEGBalance));\n        setUserStagedBalance(new BigNumber(userStagedBalance));\n        setUserBondedBalance(new BigNumber(userBondedBalance));\n        setUserRewardedBalance(new BigNumber(userRewardedBalance));\n        setUserClaimableBalance(new BigNumber(userClaimableBalance));\n        setUserStatus(userStatus);\n        setUserStatusUnlocked(fluidUntil);\n        // setLockup(poolAddressStr === DollarPool4 ? POOL_EXIT_LOCKUP_EPOCHS : 1);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n  // Check for error in .call()\n  return (\n    <>\n      <Card type=\"lite\" style={{margin: '10px 0', background: `${theme.palette.accents_1}`}}>\n        <Grid.Container gap={2} justify=\"center\">\n          <Grid xs={12} md={12}>\n            {peg.symbol}/\n            <div style={{fontSize: '10px'}}>\n              VTD\n            </div> \n          </Grid>\n          <Grid xs={12} md={4}>\n            <div>\n            Price: \n            </div>\n            <div style={{fontSize: '10px'}}>\n              {fm(peg.stats.price)} {peg.symbol} / {fm(peg.stats.price.multipliedBy(peg.usdcPrice))} USD \n            </div>  \n          </Grid>\n          <Grid xs={12} md={4}>\n            <div>\n            VTD Pooled: \n            </div>\n            <div style={{fontSize: '12px'}}>\n              {fm(peg.stats.vtdBalance)}\n            </div>   \n          </Grid>\n          <Grid xs={12} md={4}>\n            <div>\n            {peg.symbol} Pooled: \n            </div>\n            <div style={{fontSize: '12px'}}>\n              {fm(peg.stats.pegBalance)}\n            </div>  \n          </Grid>\n          <Divider y={0} />\n          \n            <PoolPageHeader\n              accountUNIBalance={userUNIBalance}\n              accountStagedBalance={userStagedBalance}\n              accountBondedBalance={userBondedBalance}\n              accountRewardedVTDBalance={userRewardedBalance}\n              accountClaimableVTDBalance={userClaimableBalance}\n              poolTotalBonded={peg.stats.poolTotalBonded}\n              accountPoolStatus={userStatus}\n              unlocked={userStatusUnlocked}\n            />\n          <Grid xs>\n            <ButtonGroup size={downMD? 'mini' : 'medium'} type=\"success\" ghost>\n              <Button\n              type=\"success\"\n                onClick={() => setTokensPanelOpened(true)}\n              >Bond/Unbond Tokens</Button>\n              <Button\n              type=\"success\"\n              // icon={<IconPlus />}\n              onClick={() => setRewardPanelOpened(true)}\n            >Claim/Provide Rewards</Button>\n            </ButtonGroup>\n          </Grid>\n          <Grid xs>\n            <ButtonGroup size={downMD? 'mini' : 'medium'} ghost>\n            <Button \n                onClick={() => window.open(`https://app.uniswap.org/#/swap?inputCurrency=${peg.addr}&outputCurrency=${VTD.addr}`, '_blank')}\n                ghost>Trade VTD/{peg.symbol}</Button>\n              <Button \n              // icon={<IconPlus />}\n              onClick={() => window.open(`https://app.uniswap.org/#/add/${VTD.addr}/${peg.addr}`, '_blank')}\n              ghost>Add Uniswap Liquidity</Button>\n            </ButtonGroup>\n          </Grid>\n          </Grid.Container>\n        </Card>\n        <SidePanel\n          title=\"Add/Remove Liquidity\"\n          opened={tokensPanelOpened}\n          onClose={() => setTokensPanelOpened(false)}\n        >\n          <Link onClick={() => setTokensPanelOpened(false)}><X /></Link>\n          <WithdrawDeposit\n          poolAddress={poolAddress}\n          user={user}\n          balance={userUNIBalance}\n          allowance={userUNIAllowance}\n          stagedBalance={userStagedBalance}\n          status={userStatus}\n          peg={peg}\n        />\n\n        <BondUnbond\n          poolAddress={poolAddress}\n          staged={userStagedBalance}\n          bonded={userBondedBalance}\n          status={userStatus}\n          lockup={lockup}\n          peg={peg}\n        />\n    \n        \n      </SidePanel>\n\n      <SidePanel\n        title=\"Claim/Zap Rewards\"\n        opened={rewardPanelOpened}\n        onClose={() => setRewardPanelOpened(false)}\n      >\n          <Link onClick={() => setRewardPanelOpened(false)}><X /></Link>\n        \n        <Claim\n          poolAddress={poolAddress}\n          claimable={userClaimableBalance}\n          status={userStatus}\n        />\n\n        <Provide\n          poolAddress={poolAddress}\n          user={user}\n          rewarded={userRewardedBalance}\n          status={userStatus}\n          pairBalanceVTD={peg.stats.vtdBalance}\n          pairBalancePeg={peg.stats.pegBalance}\n          userPEGBalance={userPEGBalance}\n          userPEGAllowance={userPEGAllowance}\n          peg={peg}\n        />\n        \n      </SidePanel>\n    </>\n  );\n}\n\nexport default Pool;\n","import React, { useState, useEffect } from 'react';\nimport { Card, useTheme } from '@geist-ui/react'\n\n// import Migrate from \"./Migrate\";\n// import {DollarPool4} from \"../../constants/contracts\";\n\ntype PoolProps = {peg: any};\n\nfunction EmptyPool({ peg }: PoolProps) {\n  const theme = useTheme();\n  \n  return (\n    <>\n    <Card type=\"lite\" style={{margin: '10px 0', opacity: '30%', background: theme.palette.accents_1}}>\n            <div style={{display: 'flex', flexDirection: 'row', justifyContent: 'space-between', flexBasis:'100%'}}>\n              <div>\n                <div>\n                {peg.symbol}/\n                </div>\n                <div style={{fontSize: '10px'}}>\n                  VTD\n                </div> \n              </div>\n                <div style={{flexBasis: '30%'}}/>\n                <div style={{flexBasis: '20%'}}>\n                <div >\n                Coming Soon\n                </div>\n                <div style={{fontSize: '12px'}}>\n                  \n                </div>    \n              </div>\n            </div>\n          </Card>\n    </>\n  );\n}\n\nexport default EmptyPool;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconLock\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {approve, deposit, withdraw} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {MAX_UINT256} from \"../../constants/values\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype WithdrawDepositProps = {\n  user: string\n  balance: BigNumber,\n  allowance: BigNumber,\n  stagedBalance: BigNumber,\n  status: number\n};\n\nfunction WithdrawDeposit({\n  user, balance, allowance, stagedBalance, status\n}: WithdrawDepositProps) {\n  const [depositAmount, setDepositAmount] = useState(new BigNumber(0));\n  const [withdrawAmount, setWithdrawAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Stage\" style={{ paddingTop: '2%'}}>\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\n        <div>\n          {/* total Issued */}\n          <div>\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"VTD\"}/>\n          </div>\n          {/* Deposit Døllar into DAO */}\n          <div style={{ paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    value={depositAmount}\n                    setter={setDepositAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setDepositAmount(balance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '6em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCirclePlus/> : <IconLock/>}\n                  label=\"Deposit\"\n                  onClick={() => {\n                    deposit(\n                      VTDD.addr,\n                      toBaseUnitBN(depositAmount, VTD.decimals),\n                    );\n                  }}\n                  disabled={status === 1 || !isPos(depositAmount) || depositAmount.isGreaterThan(balance)}\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Withdraw Døllar from DAO */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '7em'}}>\n                <>\n                  <BigNumberInput\n                    value={withdrawAmount}\n                    setter={setWithdrawAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setWithdrawAmount(stagedBalance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCircleMinus/> : <IconLock/>}\n                  label=\"Withdraw\"\n                  onClick={() => {\n                    withdraw(\n                      VTDD.addr,\n                      toBaseUnitBN(withdrawAmount, VTD.decimals),\n                    );\n                  }}\n                  disabled={status === 1 || !isPos(withdrawAmount) || withdrawAmount.isGreaterThan(stagedBalance)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        :\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total Issued */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"VTD\"}/>\n          </div>\n          <div style={{flexBasis: '35%'}}/>\n          {/* Approve DAO to spend Døllar */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus />}\n              label=\"Approve\"\n              onClick={() => {\n                approve(VTD.addr, VTDD.addr);\n              }}\n              disabled={user === ''}\n            />\n          </div>\n        </div>\n      }\n    </Box>\n  );\n}\n\nexport default WithdrawDeposit;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconCaution\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport { bond, unbondUnderlying } from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport { VTD, VTDD } from \"../../constants/tokens\";\nimport BigNumberInput from \"../common/BigNumberInput\";\nimport TextBlock from \"../common/TextBlock\";\n\ntype BondUnbondProps = {\n  staged: BigNumber,\n  bonded: BigNumber,\n  status: number,\n  lockup: number,\n};\n\nfunction BondUnbond({\n  staged, bonded, status, lockup\n}: BondUnbondProps) {\n  const [bondAmount, setBondAmount] = useState(new BigNumber(0));\n  const [unbondAmount, setUnbondAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Bond VTD\">\n      <div>\n        {/* Total bonded */}\n        <div style={{flexBasis: '16%'}}>\n          <BalanceBlock asset=\"Bonded\" balance={bonded} suffix={\"VTD\"}/>\n        </div>\n        {/* Total bonded */}\n        <div style={{flexBasis: '16%'}}>\n          <TextBlock label=\"Exit Lockup\" text={lockup === 0 ? \"\" : lockup === 1 ? \"1 epoch\" : `${lockup} epochs`}/>\n        </div>\n        {/* Bond Døllar within DAO */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  value={bondAmount}\n                  setter={setBondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setBondAmount(staged);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCirclePlus/> : <IconCaution/>}\n                label=\"Bond\"\n                onClick={() => {\n                  bond(\n                    VTDD.addr,\n                    toBaseUnitBN(bondAmount, VTD.decimals),\n                  );\n                }}\n                disabled={status === 2 || !isPos(bondAmount) || bondAmount.isGreaterThan(staged)}\n              />\n            </div>\n          </div>\n        </div>\n        <div style={{width: '2%'}}/>\n        {/* Unbond Døllar within DAO */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n      \n                  value={unbondAmount}\n                  setter={setUnbondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setUnbondAmount(bonded);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCircleMinus/> : <IconCaution/>}\n                label=\"Unbond\"\n                onClick={() => {\n                  unbondUnderlying(\n                    VTDD.addr,\n                    toBaseUnitBN(unbondAmount, VTD.decimals),\n                  );\n                }}\n                disabled={status === 2 || !isPos(unbondAmount) || unbondAmount.isGreaterThan(bonded)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> Bonding events will restart the lockup timer </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default BondUnbond;\n","import React from 'react';\nimport {VTD, VTDD, PeggedTokens} from \"../constants/tokens\";\nimport BigNumber from 'bignumber.js';\nimport {\n  getPoolBalanceOfBonded, getPoolBalanceOfClaimable,\n  getPoolBalanceOfRewarded,\n  getPoolBalanceOfStaged,\n  getPoolStatusOf, getPoolTotalBonded,\n  getTokenAllowance,\n  getTokenBalance,\n  getPoolFluidUntil,\n  getPoolDistributions,\n  getInstantaneousPrice,\n  getPoolTotalClaimable, getPoolTotalRewarded,\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged,\n  getEpoch, getEpochTime, getNextEpochTimestamp, getCurrentEpochLength, getAllRegulations\n} from '../utils/infura';\nimport { toTokenUnitsBN } from '../utils/number';\n\nexport type ContextType = {\n  regulations: IEpochs[],\n  epochData: EpochData,\n  updateEpochData: () => void,\n  updateRegulations: () => void,\n}\n\nexport const EpochContext = React.createContext<ContextType | null>(null);\n\nexport type EpochData = {\n  currentEpochLength: number,\n  nextEpochTimestamp: number,\n  previousEpochTimestamp: number,\n}\nexport type IEpochs = {\n    type: string;\n    epoch: number;\n    price: BigNumber;\n    momentumPrice?: BigNumber;\n    deltaRedeemable: BigNumber;\n    deltaDebt: BigNumber;\n    deltaBonded: BigNumber;\n  }\n  \nconst initialEpochData = {\n  currentEpochLength: 0,\n  nextEpochTimestamp: 0,\n  previousEpochTimestamp: 0,\n}\n\nexport const EpochStoreProvider: React.FC<React.ReactNode> = ({ children }) => {\n  const [regulations, setRegulations] = React.useState<IEpochs[]>([]);\n  const [epochData, setEpochData] = React.useState<EpochData>(initialEpochData);\n\n  const updateRegulations = async () => {\n    const [allRegulations] = await Promise.all([\n        getAllRegulations(VTDD.addr),\n      ]);\n\n      const _regs = allRegulations.map((result, index) => {\n        const data = result.data;\n        const epochtype = result.type;\n        return {\n            type: epochtype,\n            // @ts-ignore\n            epoch: Number(data.epoch),\n            // @ts-ignore\n            price: toTokenUnitsBN(data.price, VTD.decimals),\n            // @ts-ignore\n            momentumPrice: data.momentumPrice ? toTokenUnitsBN(data.momentumPrice, VTD.decimals) : new BigNumber(0),\n            // @ts-ignore\n            deltaRedeemable: toTokenUnitsBN(data.newRedeemable, VTD.decimals),\n            // @ts-ignore\n            deltaDebt: epochtype === 'INCREASE' ? toTokenUnitsBN(data.lessDebt, VTD.decimals) : toTokenUnitsBN(data.newDebt, VTD.decimals),\n            // @ts-ignore\n            deltaBonded: toTokenUnitsBN(data.newBonded, VTD.decimals)\n        }\n      })\n      setRegulations(_regs)\n    }\n    const updateEpochData = async () => {\n      const [nextEpochTimestampStr, currentEpochLengthStr] = await Promise.all([\n        getNextEpochTimestamp(VTDD.addr),\n        getCurrentEpochLength(VTDD.addr)\n      ]);\n      const nextEpochTimestamp = parseInt(nextEpochTimestampStr, 10);\n      const currentEpochLength= parseInt(currentEpochLengthStr, 10);\n      const previousEpochTimestamp = nextEpochTimestamp - currentEpochLength;\n\n      setEpochData({\n        currentEpochLength: currentEpochLength,\n        nextEpochTimestamp: nextEpochTimestamp,\n        previousEpochTimestamp: previousEpochTimestamp,\n      })\n    }\n\n  return (\n    <EpochContext.Provider value={{regulations, epochData, updateEpochData, updateRegulations}}>\n      {children}\n    </EpochContext.Provider>\n  );\n};\n\nexport default EpochStoreProvider;\n","import { Line } from 'react-chartjs-2';\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport BigNumber from 'bignumber.js';\n\nimport {Card, Grid, Link, Spacer, useMediaQuery, useTheme, Button, Text, Image, Display, Input} from '@geist-ui/react'\nimport { StatsRowItem } from '../common/index';\nimport {formatBN} from \"../../utils/number\";\nimport {MOMENTUM_FACTOR} from \"../../constants/values\";\nimport {EpochContext, ContextType } from \"../../store/EpochStore\";\nimport {MainContext, ContextType as MainContextType } from \"../../store/MainStore\";\n\nimport { createVoidZero } from 'typescript';\n\nfunction fm(bn){\n  let num = (formatBN(bn, 2))\n  return num;\n}\n\nconst Playground = ({opened}: {opened: boolean}) => {\n  const theme = useTheme();\n  const { peggedTokens } = React.useContext(MainContext) as MainContextType;\n  const { regulations, epochData, updateRegulations} = React.useContext(EpochContext) as ContextType;\n\n  const downMD = useMediaQuery('md', { match: 'down' })\n  const upSM = useMediaQuery('sm', { match: 'up' })\n\n  const [addEpoch, setAddEpoch] = useState<string>('1.1')\n\n  const [_prices, setPrices] = useState<number[]>([])\n  const [_momentumPrice, setMomentumPrice] = useState<number[]>([])\n  const [_labels, setLabels] = useState<number[]>([])\n\n  const addToEpochs = function() {\n    const newPrice = parseFloat(addEpoch);\n    const newMomentum = MOMENTUM_FACTOR*latestMomentum + (1-MOMENTUM_FACTOR)*newPrice\n    setPrices([..._prices, newPrice])\n    setMomentumPrice([..._momentumPrice, newMomentum])\n    setLabels([..._labels, _labels[_labels.length -1]+1])\n  }\n\n  const addRandomEpoch = function() {\n    const newPrice = latestPrice + (Math.random() > 0.3 ? Math.random()*latestPrice : -1*Math.random()*latestPrice);\n    const newMomentum = MOMENTUM_FACTOR*latestMomentum + (1-MOMENTUM_FACTOR)*newPrice\n    setPrices([..._prices, newPrice])\n    setMomentumPrice([..._momentumPrice, newMomentum])\n    setLabels([..._labels, _labels[_labels.length -1]+1])\n  }\n\n  const startWithExistingPrices = function() {\n    setPrices([...prices])\n    setMomentumPrice([...momentumPrice])\n    setLabels([...labels])\n  }\n\n  let price =  new BigNumber(0);\n  let lastTwap = new BigNumber(0);\n  peggedTokens.filter((_peg) => {\n    if (_peg.symbol === 'DSD') {\n      price = _peg.stats.price\n      lastTwap = _peg.stats.lastTwap\n    }\n  })\n\n  // chart data\n  let regs = regulations.reverse().slice(-15)\n  const prices = regs.map((reg) => Number(reg.price.toNumber().toFixed(2)));\n  const momentumPrice = regs.map((reg) =>  reg.momentumPrice ? Number(reg.momentumPrice.toNumber().toFixed(2)): 0);\n  const labels = regs.map((x) => x.epoch)\n\n  // @ts-ignore\n\n  const timeElapsed = Date.now()/1000 - epochData.previousEpochTimestamp;\n  const priceWeight = (timeElapsed/epochData.currentEpochLength)*1.2;\n  const estimatedTwap = price.isZero() ? 0 : priceWeight*price.toNumber() + (1-priceWeight)*lastTwap.toNumber();\n  const latestMomentum = _momentumPrice[_momentumPrice.length -1] || 0\n  const latestPrice = _prices[_prices.length -1] || 0\n  const latestType = latestPrice > latestMomentum ? 'INCREASE' : 'DECREASE'\n\n\n  const price_data = {\n      labels: _labels.slice(-15),\n      datasets: [\n        {\n          label: 'Price ($)',\n          data: _prices.slice(-15),\n          backgroundColor: 'rgba(75,192,192,0.4)',\n          borderColor: 'rgba(75,192,192,1)',\n          borderCapStyle: 'butt',\n          borderDash: [],\n          borderDashOffset: 0.0,\n          borderJoinStyle: 'miter',\n          pointBorderColor: 'rgba(75,192,192,1)',\n          pointBackgroundColor: '#fff',\n          pointBorderWidth: 1,\n          pointHoverRadius: 5,\n          pointHoverBackgroundColor: 'rgba(75,192,192,1)',\n          pointHoverBorderColor: 'rgba(220,220,220,1)',\n          pointHoverBorderWidth: 2,\n          pointRadius: 3,\n        },\n        {\n          label: 'Momentum ($)',\n          borderDash: [5,15],\n          backgroundColor: 'rgba(255,99,132,0.2)',\n      borderColor: 'rgba(255,99,132,1)',\n      borderWidth: 1,\n      hoverBackgroundColor: 'rgba(255,99,132,0.4)',\n      hoverBorderColor: 'rgba(255,99,132,1)',\n          data: _momentumPrice.slice(-15)\n        }\n      ]\n    };\n  const options = {\n    responsive: true,\n    layout: {\n        padding: {\n            left: 10,\n            right: 10,\n            top: 10,\n            bottom: 10\n        }\n    },\n    scales: {\n      yAxes: [{\n        display: downMD ? false :true,\n        position: 'right',\n        ticks: {\n          callback: function(label, index, labels) {\n              return '$' + label;\n          }\n      },\n      }],\n      xAxes: [{\n        display: downMD ? false :true,\n        ticks: {\n          callback: function(label, index, labels) {\n              return 'Ep ' + label;\n          }\n        }\n      }]\n    }\n  }\n\n  useEffect(() => {\n    startWithExistingPrices();\n  },[opened])\n  return (\n      <>\n        <Text h2>What is Dynamic Pegging?</Text>\n        <Grid.Container gap={2} justify=\"center\">\n        <Grid xs={24} md={12}>\n            <Text p>\n            Unlike traditional stablecoins with a peg to a fiat currency (USDC, USDT, DAI, DSD, ESD) or some newer attempts to peg to another stablecoin (ZAI), VTD’s dynamic peg is not pegged any currency, asset or form of collateral. It is a first attempt to adopt a floating peg that finds its intrinsic value based on supply and demand of the market.\n            </Text>\n            <Text p>\n            Ultimately, and over cycles of expansion and contraction, market dynamics will determine a fair value for the peg that will adjust to new conditions in the overall cryptocurrency and Defi market. In our view, this is a self-fulfilling prophecy based on community trust and a certain saturation of VTD’s market capitalization.\n            </Text>\n            <Text p>\n            We expect a gradual convergence of VTD’s intrinsic value to the overall cryptocurrency or Defi market capitalization. As the total crypto market cap grows, we expect the expansion and contraction cycles of VTD to oscillate and drift upwards as shown in the following graph. Of course, the opposite is true during crypto winters — but as we know crypto always comes back even stronger after periods of consolidation.\n            </Text>\n            <Link icon color href=\"https://vtdollar.medium.com/faq-dynamic-peg-mechanism-in-the-vtd-ecosystem-96396d648baf\" target=\"_blank\">Read more about it on Medium</Link>\n        </Grid>\n        <Grid xs={24} md={12}>\n            <Display shadow caption={<p>Theoretical path of convergence</p>}>\n            <Image src=\"peg-graph.jpeg\" />\n            </Display>\n        </Grid> \n        </Grid.Container>\n        <Text h2>Experiment with Dynamic Pegging</Text>\n        <Text p>\n            Play with possible epochs and see how they affect expansion/contraction:\n        </Text>\n        <Card type=\"lite\" style={{fontSize: '12px', background: theme.palette.accents_1}}>\n          <Button onClick={() => startWithExistingPrices()}>Start With Existing Prices</Button>\n          <Spacer></Spacer>\n          <Input value={addEpoch} onChange={(e) => setAddEpoch(e.target.value)} label=\"TWAP Price\" placeholder=\"1.1\" />\n          <Button onClick={() => addToEpochs()}>Add Epoch</Button>\n          <Button onClick={() => addRandomEpoch()}>Add Random Epoch</Button>\n\n        </Card>\n        <Card style={{display: 'flex'}}>\n        <Card type=\"secondary\" shadow style={{fontSize: '12px'}}>\n            <Grid.Container gap={2} justify=\"center\">\n\n              <Grid xs={24} md={6}>\n                Momentum Price: <span style={{color: theme.palette.accents_2, fontSize: '12px'}}>{latestMomentum.toFixed(2) || 0}DSD</span>\n              </Grid>\n              <Grid xs={24} md={6}>\n              Last TWAP: <span style={{color: theme.palette.accents_2, fontSize: '12px'}}>{latestPrice.toFixed(2)}DSD</span>\n              </Grid>\n              <Grid xs={24} md={6}>\n              Current Epoch: <span style={{color: theme.palette.accents_2, fontSize: '12px'}}>{latestType === 'INCREASE' ? 'Expansion' : 'Contraction'}</span>\n              </Grid>\n              </Grid.Container>\n          </Card>\n            \n            <Line \n            height={upSM ? 55 : 400}\n                            legend={{display: false}}\n                            data={price_data}\n                            options={options}/> \n\n            \n        </Card>\n    </>\n  )\n};\n\n\nexport default Playground;\n","import React, { useEffect, useState } from 'react'\nimport { useTheme, Link } from '@geist-ui/react'\nimport _JSXStyle from \"styled-jsx/style\"\nimport { X } from '@geist-ui/react-icons'\n\n\ninterface Props {\n  visible: boolean\n  onClose?: () => void\n}\n\nconst Overlay: React.FC<React.PropsWithChildren<Props>> = ({\n  visible: customVisible,\n  onClose,\n  children,\n}) => {\n  const theme = useTheme()\n  const [visible, setVisible] = useState<boolean>(false)\n\n  useEffect(() => {\n    if (customVisible !== undefined) {\n      setVisible(customVisible)\n    }\n  }, [customVisible])\n\n  const clickHandler = (e) => {\n    setVisible(false)\n    onClose && onClose()\n    e.preventDefault()\n\n  }\n  return (\n    <section className={visible ? 'active' : ''}>\n      <Link className='overlayClose' onClick={clickHandler} style={{position: 'fixed', right: '20px', top: '10px', zIndex: 5001}}><X /></Link>\n      {children}\n      <style jsx>{`\n        section {\n          position: fixed;\n          width: 100vw;\n          height: 100vh;\n          background-color: ${theme.palette.background};\n          z-index: 5000;\n          top: -5000px;\n          left: -5000px;\n          display: none;\n          overflow-y: scroll;\n        }\n\n        .active {\n          top: 0;\n          left: 0;\n          bottom: 0;\n          display: block;\n        }\n      `}</style>\n    </section>\n  )\n}\n\nexport default Overlay\n","import { Line } from 'react-chartjs-2';\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport BigNumber from 'bignumber.js';\n\nimport {Card, Grid, Page, useMediaQuery, useTheme, Loading, Button} from '@geist-ui/react'\nimport { StatsRowItem } from '../common/index';\nimport {formatBN} from \"../../utils/number\";\nimport {MOMENTUM_FACTOR} from \"../../constants/values\";\nimport {EpochContext, ContextType } from \"../../store/EpochStore\";\nimport {MainContext, ContextType as MainContextType } from \"../../store/MainStore\";\nimport Playground from \"./Playground\"\nimport Overlay from '../layout/overlay'\nimport { createVoidZero } from 'typescript';\n\nfunction fm(bn){\n  let num = (formatBN(bn, 2))\n  return num;\n}\n\nconst MomentumHeader = ({ user }: {user: string}) => {\n  const theme = useTheme();\n  const [loaded, setLoaded] = useState(false);\n  const [playgroundOpened, setPlaygroundOpened] = useState(false)\n\n  const { peggedTokens } = React.useContext(MainContext) as MainContextType;\n  const { regulations, epochData, updateEpochData, updateRegulations} = React.useContext(EpochContext) as ContextType;\n\n  const downMD = useMediaQuery('md', { match: 'down' })\n  const upSM = useMediaQuery('sm', { match: 'up' })\n\n  let price =  new BigNumber(0);\n  let lastTwap = new BigNumber(0);\n  peggedTokens.filter((_peg) => {\n    if (_peg.symbol === 'DSD') {\n      price = _peg.stats.price\n      lastTwap = _peg.stats.lastTwap\n    }\n  })\n\n  // chart data\n  let regs = regulations.reverse().slice(-15)\n  const prices = regs.map((reg) => Number(reg.price.toNumber().toFixed(2)));\n  const momentumPrice = regs.map((reg) =>  reg.momentumPrice ? Number(reg.momentumPrice.toNumber().toFixed(2)): 0);\n  const labels = regs.map((x) => x.epoch)\n  // @ts-ignore\n  const latestEpoch = regs[regs.length - 1];\n\n  const timeElapsed = Date.now()/1000 - epochData.previousEpochTimestamp;\n  const priceWeight = (timeElapsed/epochData.currentEpochLength)*1.2;\n  const estimatedTwap = price.isZero() ? 0 : priceWeight*price.toNumber() + (1-priceWeight)*lastTwap.toNumber();\n  const latestMomentum = latestEpoch ? latestEpoch.momentumPrice : new BigNumber(0)\n  // @ts-ignore\n  const estimatedMomentum = estimatedTwap == 0 ? 0 : MOMENTUM_FACTOR*estimatedTwap + (1-MOMENTUM_FACTOR)*latestMomentum.toNumber()\n  const nextChange = estimatedMomentum > estimatedTwap ? 'Contraction' : 'Expansion'  \n  const delta = Math.abs(estimatedMomentum - estimatedTwap).toFixed(2)\n\n  const price_data = {\n      labels: labels,\n      datasets: [\n        {\n          label: 'Price ($)',\n          data: prices,\n          backgroundColor: 'rgba(75,192,192,0.4)',\n          borderColor: 'rgba(75,192,192,1)',\n          borderCapStyle: 'butt',\n          borderDash: [],\n          borderDashOffset: 0.0,\n          borderJoinStyle: 'miter',\n          pointBorderColor: 'rgba(75,192,192,1)',\n          pointBackgroundColor: '#fff',\n          pointBorderWidth: 1,\n          pointHoverRadius: 5,\n          pointHoverBackgroundColor: 'rgba(75,192,192,1)',\n          pointHoverBorderColor: 'rgba(220,220,220,1)',\n          pointHoverBorderWidth: 2,\n          pointRadius: 3,\n        },\n        {\n          label: 'Momentum ($)',\n          borderDash: [5,15],\n          backgroundColor: 'rgba(255,99,132,0.2)',\n      borderColor: 'rgba(255,99,132,1)',\n      borderWidth: 1,\n      hoverBackgroundColor: 'rgba(255,99,132,0.4)',\n      hoverBorderColor: 'rgba(255,99,132,1)',\n          data: momentumPrice\n        }\n      ]\n    };\n  const options = {\n    responsive: true,\n    layout: {\n        padding: {\n            left: 10,\n            right: 10,\n            top: 10,\n            bottom: 10\n        }\n    },\n    scales: {\n      yAxes: [{\n        display: downMD ? false :true,\n        position: 'right',\n        ticks: {\n          callback: function(label, index, labels) {\n              return '$' + label;\n          }\n      },\n      }],\n      xAxes: [{\n        display: downMD ? false :true,\n        ticks: {\n          callback: function(label, index, labels) {\n              return 'Ep ' + label;\n          }\n        }\n      }]\n    }\n  }\n\n  useEffect(() => {\n      updateRegulations();\n      updateEpochData();\n      setLoaded(true)\n  },[user])\n  return (\n      <Card style={{display: 'flex'}}>\n        {(regs.length < 1) ? \n        <Loading /> :\n        <>\n          <Card type=\"secondary\" shadow style={{fontSize: '12px'}}>\n            <Grid.Container gap={2} justify=\"center\">\n\n              <Grid xs={24} md={6}>\n                Momentum Price: <span style={{color: theme.palette.accents_2, fontSize: '12px'}}>{latestEpoch.momentumPrice?.toFixed(2) || 0}DSD</span>\n              </Grid>\n              <Grid xs={24} md={6}>\n              Last TWAP: <span style={{color: theme.palette.accents_2, fontSize: '12px'}}>{latestEpoch.price.toFixed(2)}DSD</span>\n              </Grid>\n              <Grid xs={24} md={6}>\n              Current Epoch: <span style={{color: theme.palette.accents_2, fontSize: '12px'}}>{latestEpoch.type === 'INCREASE' ? 'Expansion' : 'Contraction'}</span>\n              </Grid>\n              <Grid xs={24} md={6}>\n              <Button size=\"small\" onClick={() => setPlaygroundOpened(true)}>Learn Dynamic Pegging</Button>\n              </Grid>\n              </Grid.Container>\n          </Card>\n          <Card type=\"lite\" shadow style={{fontSize: '12px', background: theme.palette.accents_3}}>\n            <Grid.Container gap={2} justify=\"center\">\n\n                <Grid xs={24} md={6}>\n                Estimated Momentum Price: <span style={{color: theme.palette.accents_6, fontSize: '12px'}}>{estimatedMomentum.toFixed(2) || 0}DSD</span>\n                </Grid>\n                <Grid xs={24} md={6}>\n                Estimated TWAP: <span style={{color: theme.palette.accents_6, fontSize: '12px'}}>{estimatedTwap.toFixed(2)}DSD</span>\n                </Grid>\n                <Grid xs={24} md={6}>\n                Predicted Next Epoch: <span style={{color: theme.palette.accents_6, fontSize: '12px'}}>{nextChange}</span>\n                </Grid>\n                {nextChange == 'Contraction' ?\n                  <Grid xs={24} md={6}>\n                  Distance from Expansion: <span style={{color: theme.palette.accents_6, fontSize: '12px'}}>{delta}DSD</span>\n                  </Grid> :\n                  <Grid xs={24} md={6}>\n                  Distance from Contraction: <span style={{color: theme.palette.accents_6, fontSize: '12px'}}>{delta}DSD</span>\n                  </Grid> \n                }\n  \n                </Grid.Container>\n            </Card>\n        </>\n      }\n        \n          <Line height={upSM ? 55 : 400}\n                          legend={{display: false}}\n                          data={price_data}\n                          options={options}/> \n\n      <Overlay\n        visible={playgroundOpened}\n        onClose={() => setPlaygroundOpened(false)}\n      >\n      <Page>\n        <Playground opened={playgroundOpened}/>\n      </Page>\n      </Overlay>\n      </Card>\n  )\n};\n\n\nexport default MomentumHeader;\n","import React, { useState, useEffect } from 'react';\nimport {\n  Box, IconCirclePlus, Timer,\n  Table, TableHeader, TableRow, TableCell, Text, Help\n} from '@aragon/ui';\n\nimport {Fieldset, Button, Divider, useTheme} from '@geist-ui/react'\nimport { SkipForward } from '@geist-ui/react-icons'\nimport {getEpoch, getEpochTime, getNextEpochTimestamp, getCurrentEpochLength\n} from '../../utils/infura';\nimport {advance} from '../../utils/web3';\nimport {VTDD} from \"../../constants/tokens\";\n// import AdvanceEpoch from './AdvanceEpoch';\n// import EpochPageHeader from \"./Header\";\nimport IconHeader from \"../common/IconHeader\";\n\ntype ButtonTypes =\n  | 'default'\n  | 'secondary'\n  | 'success'\n  | 'warning'\n  | 'error'\n  | 'abort'\n  | 'secondary-light'\n  | 'success-light'\n  | 'warning-light'\n  | 'error-light'\n\n\nfunction EpochDetail({ user }: {user: string}) {\n  const [epoch, setEpoch] = useState(0);\n  const [epochTime, setEpochTime] = useState(0);\n  const [nextEpochTimestamp, setNextEpochTimestamp] = useState(0);\n  const [currentEpochLength, setCurrentEpochLength] = useState(0);\n  const [advanceMode, setAdvanceMode] = useState<ButtonTypes>('success');\n  const theme = useTheme();\n  var endDate = nextEpochTimestamp*1000\n  var safetyEnd = (nextEpochTimestamp+91)\n\n  function secondsToHms(d) {\n    d = Number(d);\n    var h = Math.floor(d / 3600);\n    var m = Math.floor(d % 3600 / 60);\n    var s = Math.floor(d % 3600 % 60);\n\n    var hDisplay = h > 0 ? h + (h == 1 ? \" hour, \" : \" hours, \") : \"\";\n    var mDisplay = m > 0 ? m + (m == 1 ? \" minute, \" : \" minutes, \") : \"\";\n    var sDisplay = s > 0 ? s + (s == 1 ? \" second\" : \" seconds\") : \"\";\n    return hDisplay + mDisplay + sDisplay; \n  }\n\n  function calcAdvanceMode() {\n    const now = Date.now()/1000 \n    if (now < nextEpochTimestamp) {\n      setAdvanceMode('error');\n    } else {\n      setAdvanceMode('success');\n    }\n  }\n\n  var currentEpochLengthFmt = secondsToHms(currentEpochLength)\n\n  useEffect(() => {\n    let isCancelled = false;\n    async function updateUserInfo() {\n      const [epochStr, epochTimeStr, nextEpochTimestampStr, currentEpochLengthStr] = await Promise.all([\n        getEpoch(VTDD.addr),\n        getEpochTime(VTDD.addr),\n        getNextEpochTimestamp(VTDD.addr),\n        getCurrentEpochLength(VTDD.addr)\n\n      ]);\n\n      if (!isCancelled) {\n        setEpoch(parseInt(epochStr, 10));\n        setEpochTime(parseInt(epochTimeStr, 10));\n        setNextEpochTimestamp(parseInt(nextEpochTimestampStr, 10));\n        setCurrentEpochLength(parseInt(currentEpochLengthStr, 10));\n        calcAdvanceMode();\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 1200);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <Fieldset style={{marginTop: '10px'}}>\n      <Divider y={0} />\n      <Fieldset.Content>\n        <Fieldset.Subtitle>Current Epoch:  <span style={{color: theme.palette.accents_4}}>{epoch}</span></Fieldset.Subtitle>\n        <Fieldset.Subtitle>Epoch Length: <span style={{color: theme.palette.accents_4}}>{currentEpochLengthFmt}</span></Fieldset.Subtitle>\n        <Fieldset.Subtitle>Next Epoch In: </Fieldset.Subtitle>\n        <Timer showEmpty={true} format='hms' end={endDate} /> \n      </Fieldset.Content>\n      <Fieldset.Footer>\n        <Fieldset.Footer.Status>\n          <Text type=\"error\">Advance the Epoch for reward:</Text>\n        </Fieldset.Footer.Status>\n        <Fieldset.Footer.Actions>\n          <Button icon={<SkipForward />} auto size=\"mini\" type={advanceMode}\n               onClick={() => {\n                advance(VTDD.addr);\n              }}\n          >Advance</Button>\n        </Fieldset.Footer.Actions>\n      </Fieldset.Footer>\n    </Fieldset>\n  );\n}\n\nexport default EpochDetail;\n","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport BigNumber from 'bignumber.js';\nimport {\n  getBalanceBonded,\n  getBalanceOfStaged, getFluidUntil, getLockedUntil,\n  getStatusOf, getTokenAllowance,\n  getTokenBalance, getTokenTotalSupply,\n} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport { toTokenUnitsBN } from '../../utils/number';\n\nimport AccountPageHeader from \"./Header\";\nimport Pool from \"../Pool\";\nimport EmptyPool from \"../Pool/EmptyPool\";\n\nimport WithdrawDeposit from \"./WithdrawDeposit\";\nimport BondUnbond from \"./BondUnbond\";\nimport MomentumHeader from \"./MomentumHeader\";\n\nimport EpochDetail from \"../EpochDetail\";\nimport Overlay from '../layout/overlay'\nimport { useTheme, Grid, Card, Button, Divider, Page } from '@geist-ui/react'\n\nimport { MainContext, ContextType } from \"../../store/MainStore\";\n\nfunction Wallet({ user }: {user: string}) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n  const theme = useTheme();\n  const [sidePanelOpened, setSidePanelOpened] = useState(false)\n  const [userVTDBalance, setUserVTDBalance] = useState(new BigNumber(0));\n  const [userVTDAllowance, setUserVTDAllowance] = useState(new BigNumber(0));\n  const [userVTDSBalance, setUserVTDSBalance] = useState(new BigNumber(0));\n  const [totalVTDSSupply, setTotalVTDSSupply] = useState(new BigNumber(0));\n  const [userStagedBalance, setUserStagedBalance] = useState(new BigNumber(0));\n  const [userBondedBalance, setUserBondedBalance] = useState(new BigNumber(0));\n  const [userStatus, setUserStatus] = useState(0);\n  const [userStatusUnlocked, setUserStatusUnlocked] = useState(0);\n  const [lockup, setLockup] = useState(0);\n  const [selectedTab, setSelectedTab] = useState(0)\n  \n  const { peggedTokens, updatePools } = React.useContext(MainContext) as ContextType;\n\n  //Update User balances\n  useEffect(() => {\n    if (user === '') {\n      setUserVTDBalance(new BigNumber(0));\n      setUserVTDAllowance(new BigNumber(0));\n      setUserVTDSBalance(new BigNumber(0));\n      setTotalVTDSSupply(new BigNumber(0));\n      setUserStagedBalance(new BigNumber(0));\n      setUserBondedBalance(new BigNumber(0));\n      setUserStatus(0);\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [\n        vtdBalance, vtdAllowance, vtdsBalance, vtdsSupply, stagedBalance, bondedBalance, status,\n        fluidUntilStr, lockedUntilStr\n      ] = await Promise.all([\n        getTokenBalance(VTD.addr, user),\n        getTokenAllowance(VTD.addr, user, VTDD.addr),\n        getTokenBalance(VTDD.addr, user),\n        getTokenTotalSupply(VTDD.addr),\n        getBalanceOfStaged(VTDD.addr, user),\n        getBalanceBonded(VTDD.addr, user),\n        getStatusOf(VTDD.addr, user),\n\n        getFluidUntil(VTDD.addr, user),\n        getLockedUntil(VTDD.addr, user),\n      ]);\n\n      const userVTDBalance = toTokenUnitsBN(vtdBalance, VTD.decimals);\n      const userVTDSBalance = toTokenUnitsBN(vtdsBalance, VTDD.decimals);\n      const totalVTDSSupply = toTokenUnitsBN(vtdsSupply, VTDD.decimals);\n      const userStagedBalance = toTokenUnitsBN(stagedBalance, VTDD.decimals);\n      const userBondedBalance = toTokenUnitsBN(bondedBalance, VTDD.decimals);\n      const userStatus = parseInt(status, 10);\n      const fluidUntil = parseInt(fluidUntilStr, 10);\n      const lockedUntil = parseInt(lockedUntilStr, 10);\n\n      if (!isCancelled) {\n        setUserVTDBalance(new BigNumber(userVTDBalance));\n        setUserVTDAllowance(new BigNumber(vtdAllowance));\n        setUserVTDSBalance(new BigNumber(userVTDSBalance));\n        setTotalVTDSSupply(new BigNumber(totalVTDSSupply));\n        setUserStagedBalance(new BigNumber(userStagedBalance));\n        setUserBondedBalance(new BigNumber(userBondedBalance));\n        setUserStatus(userStatus);\n        setUserStatusUnlocked(Math.max(fluidUntil, lockedUntil))\n        // setLockup(poolAddress === DollarPool4 ? DAO_EXIT_LOCKUP_EPOCHS : 1);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 10000);\n    updatePools();\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n\n  return (\n    <>\n    <Grid.Container gap={2} justify=\"center\">\n      <Grid xs={24} md={18}>\n         <MomentumHeader user={user}/> \n         <Card type=\"lite\" style={{margin: '10px 0', background: `${theme.palette.accents_2}`}}>\n            DAO\n            <Divider y={0} />\n            <AccountPageHeader\n              accountVTDBalance={userVTDBalance}\n              accountVTDSBalance={userVTDSBalance}\n              totalVTDSSupply={totalVTDSSupply}\n              accountStagedBalance={userStagedBalance}\n              accountBondedBalance={userBondedBalance}\n              accountStatus={userStatus}\n              unlocked={userStatusUnlocked}\n            />\n            <Divider y={0} />\n\n                  <Button\n                  // icon={<IconPlus />}\n                  onClick={() => setSidePanelOpened(true)}\n                >Bond/Unbond Tokens </Button>\n\n          </Card>\n\n          {peggedTokens.map((peg, index) => \n            peg.enabled ? <Pool user={user} peg={peg} /> : <EmptyPool peg={peg} />\n          )}\n      </Grid>\n      <Grid xs={24} md={6}>\n      <EpochDetail user={user}/>\n      \n      </Grid>\n    </Grid.Container>\n            \n      \n      <Overlay\n        visible={sidePanelOpened}\n        onClose={() => setSidePanelOpened(false)}\n      >\n        <Page>\n    \n            <WithdrawDeposit\n            user={user}\n            balance={userVTDBalance}\n            allowance={userVTDAllowance}\n            stagedBalance={userStagedBalance}\n            status={userStatus}\n          />\n    \n          <BondUnbond\n            staged={userStagedBalance}\n            bonded={userBondedBalance}\n            status={userStatus}\n            lockup={lockup}\n          />\n\n        \n      </Page>\n      </Overlay>\n    </>\n  );\n}\n\nexport default Wallet;\n","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport {Grid} from '@geist-ui/react'\nimport BigNumber from 'bignumber.js';\nimport {\n  getBalanceBonded,\n  getBalanceOfStaged, getFluidUntil, getLockedUntil,\n  getStatusOf, getTokenAllowance,\n  getTokenBalance,\n  getCouponPremium,\n  getPoolTotalClaimable, getPoolTotalRewarded,\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged,\n  getEpoch, getEpochTime, getNextEpochTimestamp, getCurrentEpochLength,\n} from '../../utils/infura';\n\nimport {formatBN, ownership} from \"../../utils/number\";\n\nimport {VTD, VTDD} from \"../../constants/tokens\";\n\nimport {BalanceBlock, StatsRowItem} from \"../common/index\";\n\nimport {DAO_EXIT_LOCKUP_EPOCHS, GOVERNANCE_PERIOD, POOL_EXIT_LOCKUP_EPOCHS} from \"../../constants/values\";\nimport { toTokenUnitsBN } from '../../utils/number';\n\nimport { MainContext, ContextType, IPeggedToken} from \"../../store/MainStore\";\n\nconst ONE_COUPON = new BigNumber(10).pow(18);\n\nfunction Stats({ user }: {user: string}) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\n  const [epoch, setEpoch] = useState(0);\n  const [epochTime, setEpochTime] = useState(0);\n  const [nextEpochTimestamp, setNextEpochTimestamp] = useState(0);\n  const [currentEpochLength, setCurrentEpochLength] = useState(0);\n  const [_pegs, setPegs] = useState([]);\n  const { peggedTokens, totals, updatePools, updateTotals} = React.useContext(MainContext) as ContextType;\n  \n  let price =  new BigNumber(0);\n  let lastTwap = new BigNumber(0);\n  peggedTokens.filter((_peg) => {\n    if (_peg.symbol === 'ETH') {\n      price = _peg.stats.price.multipliedBy(_peg.usdcPrice)\n      lastTwap = _peg.stats.lastTwap.multipliedBy(_peg.usdcPrice)\n    }\n  })\n  \n  const marketcap = totals.totalSupply.multipliedBy(price);\n  const currentEpochLengthFmt = secondsToM(currentEpochLength);\n  const infinity = '\\u221E'; \n\n  function secondsToM(d) {\n    d = Number(d);\n    var m = Math.floor(d / 60);\n    return m;\n  }\n\n  function fm(bn){\n    let num = (formatBN(bn, 2));\n    return num;\n  }\n\n  function inUsdc(amount, rate) {\n    return amount.multipliedBy(rate)\n  }\n\n  function totalYield() {\n      var delta = (price.toNumber()-1)/12\n      delta = delta > 0.1 ? 0.1 : delta\n      delta = epoch > 36 ? delta : 0.06\n      return (totals.totalSupply.toNumber())*delta\n  }\n\n  function daoYield(){\n    return (totalYield()*0.6/totals.totalBonded.toNumber()*100).toFixed(3)\n  }\n\n  function compound(rate, days) {\n      let epochs_per_day = 24*60/currentEpochLengthFmt\n      let times = days*epochs_per_day\n      let real_rate =((1+rate/100)**times -1)*100 \n      return real_rate < 5000000 ? real_rate.toFixed(3) : infinity\n  }\n\n  function LPYield(share, peg){\n    const supply = peg.stats.vtdBalance;\n    const vtdPrice = peg.stats.price.multipliedBy(peg.usdcPrice)\n    const pegValue = peg.stats.pegBalance.multipliedBy(peg.usdcPrice)\n    let lp_size = supply.multipliedBy(vtdPrice).multipliedBy(2)\n    return (totalYield()*price.toNumber()*0.4/lp_size.toNumber()*share.toNumber()).toFixed(3)\n  }\n\n  function calcLinearYield(rate, days) {\n    let epochs_per_day = 24*60/currentEpochLengthFmt\n    let times = days*epochs_per_day\n    return (rate*times).toFixed(3)\n  }\n  //Update User balances\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n        const [epochStr, epochTimeStr, nextEpochTimestampStr, currentEpochLengthStr] = await Promise.all([\n            getEpoch(VTDD.addr),\n            getEpochTime(VTDD.addr),\n            getNextEpochTimestamp(VTDD.addr),\n            getCurrentEpochLength(VTDD.addr),\n        ]);\n\n        if (!isCancelled) {\n            setEpoch(parseInt(epochStr, 10));\n            setEpochTime(parseInt(epochTimeStr, 10));\n            setNextEpochTimestamp(parseInt(nextEpochTimestampStr, 10));\n            setCurrentEpochLength(parseInt(currentEpochLengthStr, 10));\n\n            if (totals.totalDebt.isGreaterThan(ONE_COUPON)) {\n            const couponPremiumStr = await getCouponPremium(VTDD.addr, ONE_COUPON)\n            setCouponPremium(toTokenUnitsBN(couponPremiumStr, VTD.decimals));\n            } else {\n            setCouponPremium(new BigNumber(0));\n            }\n            // setLockup(poolAddress === DollarPool4 ? DAO_EXIT_LOCKUP_EPOCHS : 1);\n            \n        }\n    }\n    updateUserInfo(); \n    updatePools(); \n    updateTotals();\n  }, [user]);\n\n\n  return (\n    <>\n    <Grid.Container gap={5} justify=\"center\">\n        <Grid xs={12} sm={6}>\n        <BalanceBlock asset=\"Epoch Length\" balance={currentEpochLengthFmt} suffix={\" min\"}/>\n\n        </Grid>\n        <Grid xs={12} sm={6}>\n        <BalanceBlock asset=\"Epoch #\" balance={epoch}  suffix={\"\"}/>\n\n        </Grid>\n        <Grid xs={12} sm={6}>\n        <BalanceBlock asset=\"Spot Price (USD)\" balance={price} suffix={\"\"} />\n        </Grid>\n        <Grid xs={12} sm={6}>\n        <BalanceBlock asset=\"Last TWAP Price (USD)\" balance={lastTwap} suffix={\"\"} />\n        </Grid>\n\n    <Grid xs={24} sm={12}>\n\n      <StatsRowItem asset=\"Market Cap ($)\" value={fm(marketcap)} suffix={\" USD\"}/>\n      <StatsRowItem asset=\"Tokens\" value={fm(totals.totalSupply)}  suffix={\"\"}/>\n    </Grid>\n    <Grid xs={24} sm={12}>\n      <StatsRowItem asset=\"Coupon\" value={fm(totals.totalCoupon)} suffix={\"\"} />\n      <StatsRowItem asset=\"Coupon Premium\" value={fm(couponPremium)}  suffix={\"%\"}/>\n    </Grid>\n    <Grid xs={24} sm={12}>\n      <div style={{ fontSize: 14, lineHeight: 2}}>Stats</div>\n        <StatsRowItem asset=\"Circulating Supply\" value={fm(totals.circulating)}  suffix={\"\"}/>\n        <StatsRowItem asset=\"DAO Staged\" value={fm(totals.totalStaged)} suffix={\"\"} />\n        <StatsRowItem asset=\"DAO Bonded\" value={fm(totals.totalBonded)}  suffix={\"\"}/>\n    </Grid>\n    <Grid xs={24} sm={12}>\n          <div style={{ fontSize: 14, lineHeight: 2}}>DAO Yield</div>\n\n      <StatsRowItem asset=\"Day Yield\" value={compound(daoYield(), 1)} suffix={\"%\"}/>\n      <StatsRowItem asset=\"Month Yield\" value={compound(daoYield(),30)}  suffix={\"%\"}/>\n      <StatsRowItem asset=\"Annual Yield\" value={compound(daoYield(), 365)} suffix={\"%\"} />\n    </Grid>\n\n     {\n    //  @ts-ignore\n    peggedTokens.map((peggedToken) =>\n    //@ts-ignore\n      peggedToken.hasOwnProperty('stats') && peggedToken.enabled ?\n      <Grid xs={24} sm={12}>\n        <div style={{ fontSize: 14, lineHeight: 2}}>{peggedToken.symbol} Pool: <small>{`1 ${peggedToken.symbol} = ${peggedToken.usdcPrice.toFixed(2)} USD`}</small></div>\n        <StatsRowItem asset=\"Price\" value={fm(peggedToken.stats.pegBalance.dividedBy(peggedToken.stats.vtdBalance))} suffix={peggedToken.symbol}/>\n        <StatsRowItem asset=\"VTD Bonded\" value={fm(peggedToken.stats.vtdBalance)} suffix={\"VTD\"}/>\n        <StatsRowItem asset={`${peggedToken.symbol} Bonded`} value={fm(peggedToken.stats.pegBalance)} suffix={peggedToken.symbol}/>\n        <div style={{marginTop: '10px', marginLeft: '20px'}}>\n          <StatsRowItem asset=\"LP Rewarded\" value={fm(peggedToken.stats.poolReward)} suffix={\"\"} />\n          <StatsRowItem asset=\"LP Claimable\" value={fm(peggedToken.stats.poolClaimable)} suffix={\"\"}/>\n          <StatsRowItem asset=\"% LP Rewards\" value={fm(ownership(peggedToken.stats.vtdBalance, totals.totalLPBonded))} suffix={\"%\"}/>\n\n          <div style={{ fontSize: 14, lineHeight: 2}}>LP Yield (in USD)</div>\n\n          <StatsRowItem asset=\"Day Yield\" value={calcLinearYield(LPYield(ownership(peggedToken.stats.vtdBalance,totals.totalLPBonded), peggedToken),1)} suffix={\"%\"}/>\n          <StatsRowItem asset=\"Month Yield\" value={calcLinearYield(LPYield(ownership(peggedToken.stats.vtdBalance,totals.totalLPBonded), peggedToken),30)}  suffix={\"%\"}/>\n          <StatsRowItem asset=\"Annual Yield\" value={calcLinearYield(LPYield(ownership(peggedToken.stats.vtdBalance,totals.totalLPBonded), peggedToken), 365)} suffix={\"%\"} />\n        </div>\n        </Grid> : <></>\n     )}\n          <Grid xs={24} sm={12}>\n\n                <div style={{ fontSize: 14, lineHeight: 2}}>Info:</div>\n\n              <StatsRowItem asset=\"DAO Lockup\" value={DAO_EXIT_LOCKUP_EPOCHS} suffix={\"\"}/>\n              <StatsRowItem asset=\"LP Lockup\" value={POOL_EXIT_LOCKUP_EPOCHS}  suffix={\"\"}/>\n              <StatsRowItem asset=\"Governance Period\" value={GOVERNANCE_PERIOD} suffix={\"\"} />\n          </Grid>\n          <Grid xs={24} sm={12}>\n\n                <div style={{ fontSize: 14, lineHeight: 2}}>Current Settings:</div>\n\n                <StatsRowItem asset=\"Max Expansion\" value={10} suffix={\"%\"}/>\n                <StatsRowItem asset=\"Advance Reward\" value='Reverse Dutch Auction'  suffix={\"\"}/>\n                <StatsRowItem asset=\"Current Pegged Token\" value={'DSD'} suffix={\"\"} />\n          </Grid>\n    </Grid.Container>\n    </>\n  );\n}\n\nexport default Stats;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\nimport { BalanceBlock } from \"../common\";\nimport {ownership} from \"../../utils/number\";\n\ntype CouponMarketHeaderProps = {\n  debt: BigNumber,\n  supply: BigNumber,\n  coupons: BigNumber,\n  premium: BigNumber,\n  redeemable: BigNumber,\n};\n\nconst CouponMarketHeader = ({\n  debt, supply, coupons, premium, redeemable\n}: CouponMarketHeaderProps) => (\n  <div style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Debt Ratio\" balance={ownership(debt, supply)} suffix={\"%\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Total Debt\" balance={debt} suffix={\"VTD\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Coupons\" balance={coupons} />\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Premium\" balance={premium.multipliedBy(100)} suffix={\"%\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Redeemable\" balance={redeemable}/>\n    </div>\n  </div>\n);\n\n\nexport default CouponMarketHeader;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton, PriceSection,\n} from '../common/index';\nimport {approve, purchaseCoupons} from '../../utils/web3';\n\nimport {isPos, toBaseUnitBN, toTokenUnitsBN} from '../../utils/number';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {MAX_UINT256} from \"../../constants/values\";\nimport {getCouponPremium} from \"../../utils/infura\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype PurchaseCouponsProps = {\n  user: string,\n  allowance: BigNumber,\n  balance: BigNumber,\n  debt: BigNumber,\n};\n\nfunction PurchaseCoupons({\n  user, balance, allowance, debt,\n}: PurchaseCouponsProps) {\n  const [purchaseAmount, setPurchaseAmount] = useState(new BigNumber(0));\n  const [premium, setPremium] = useState(new BigNumber(0));\n\n  const updatePremium = async (purchaseAmount) => {\n    if (purchaseAmount.lte(new BigNumber(0))) {\n      setPremium(new BigNumber(0));\n      return;\n    }\n    const purchaseAmountBase = toBaseUnitBN(purchaseAmount, VTD.decimals);\n    const premium = await getCouponPremium(VTDD.addr, purchaseAmountBase)\n    const premiumFormatted = toTokenUnitsBN(premium, VTD.decimals);\n    setPremium(premiumFormatted);\n  };\n\n  return (\n    <Box heading=\"Purchase\">\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* User balance */}\n          <div style={{flexBasis: '30%'}}>\n            <BalanceBlock asset={`Balance`} balance={balance} suffix={\" VTD\"}/>\n          </div>\n          <div style={{flexBasis: '38%'}}/>\n          {/* Purchase coupons */}\n          <div style={{flexBasis: '32%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"VTD\"\n                    value={purchaseAmount}\n                    setter={(value) => {\n                      setPurchaseAmount(value);\n                      isPos(value) ? updatePremium(value) : updatePremium(new BigNumber(0));\n                    }}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      const maxPurchaseAmount = debt.comparedTo(balance) > 0 ? balance : debt\n                      setPurchaseAmount(maxPurchaseAmount);\n                      updatePremium(maxPurchaseAmount);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '6em'}}>\n                <Button\n                  wide\n                  icon={<IconCircleMinus/>}\n                  label=\"Burn\"\n                  onClick={() => {\n                    purchaseCoupons(\n                      VTDD.addr,\n                      toBaseUnitBN(purchaseAmount, VTD.decimals),\n                    );\n                  }}\n                  disabled={user === '' || debt.isZero() || balance.isZero() || !isPos(purchaseAmount)}\n                />\n              </div>\n            </div>\n            <PriceSection label=\"Coupons \" amt={purchaseAmount.plus(premium)}/>\n          </div>\n        </div>\n        :\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* User balance */}\n          <div style={{flexBasis: '30%'}}>\n            <BalanceBlock asset={`VTD Balance`} balance={balance}/>\n          </div>\n          <div style={{flexBasis: '40%'}}/>\n          {/* Approve DAO to spend Døllar */}\n          <div style={{flexBasis: '30%', paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus/>}\n              label=\"Approve\"\n              onClick={() => {\n                approve(VTD.addr, VTDD.addr);\n              }}\n              disabled={user === ''}\n            />\n          </div>\n        </div>\n      }\n    </Box>\n  );\n}\n\nexport default PurchaseCoupons;\n","import React, {useEffect, useState} from 'react';\nimport {\n  DataView, Button, IconCirclePlus\n} from '@aragon/ui';\n\nimport {getBatchBalanceOfCoupons, getBatchCouponsExpiration, getCouponEpochs, getCouponPenalty} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {formatBN, toBaseUnitBN, toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport {redeemCoupons} from \"../../utils/web3\";\n\ntype PurchaseHistoryProps = {\n  user: string,\n  hideRedeemed: boolean,\n  totalRedeemable: BigNumber\n};\n\nfunction PurchaseHistory({\n  user, hideRedeemed, totalRedeemable\n}: PurchaseHistoryProps) {\n  const [epochs, setEpochs] = useState([]);\n  const [page, setPage] = useState(0)\n  const [initialized, setInitialized] = useState(false)\n\n  //Update User balances\n  useEffect(() => {\n    if (user === '') return;\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const epochsFromEvents = await getCouponEpochs(VTDD.addr, user);\n      const epochNumbers = epochsFromEvents.map(e => parseInt(e.epoch));\n      const balanceOfCoupons = await getBatchBalanceOfCoupons(VTDD.addr, user, epochNumbers);\n      const couponsExpirations = await getBatchCouponsExpiration(VTDD.addr, epochNumbers);\n\n      const couponEpochs = epochsFromEvents.map(async (epoch, i) => {\n        const penalty = await getCouponPenalty(VTDD.addr, parseInt(epoch.epoch), 100)\n        epoch.balance = new BigNumber(balanceOfCoupons[i]);\n        epoch.penalty = penalty;\n        epoch.expiration = couponsExpirations[i];\n        return epoch;\n      });\n\n      if (!isCancelled) {\n        await Promise.all(couponEpochs)\n        // @ts-ignore\n        setEpochs(await Promise.all(couponEpochs));\n        setInitialized(true);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user, totalRedeemable]);\n\n  return (\n    <DataView\n      fields={['Epoch', 'Purchased', 'Balance', 'Expires', 'Penalty', '']}\n      status={ initialized ? 'default' : 'loading' }\n      // @ts-ignore\n      entries={hideRedeemed ? epochs.filter((epoch) => !epoch.balance.isZero()) : epochs}\n      entriesPerPage={10}\n      page={page}\n      onPageChange={setPage}\n      renderEntry={(epoch) => [\n        epoch.epoch.toString(),\n        formatBN(toTokenUnitsBN(epoch.coupons, VTD.decimals), 2),\n        formatBN(toTokenUnitsBN(epoch.balance, VTD.decimals), 2),\n        epoch.expiration.toString(),\n        `${epoch.penalty}%`,\n        <Button\n          icon={<IconCirclePlus />}\n          label=\"Redeem\"\n          onClick={() => redeemCoupons(\n            VTDD.addr,\n            epoch.epoch,\n            epoch.balance.isGreaterThan(toBaseUnitBN(totalRedeemable, VTD.decimals))\n              ? toBaseUnitBN(totalRedeemable, VTD.decimals)\n              : epoch.balance\n          )}\n          disabled={epoch.balance.isZero()}\n        />\n      ]}\n    />\n  );\n}\n\nexport default PurchaseHistory;\n","/**\n * Get value by key\n * @param {string} key\n * @param {string} defaultValue\n */\nexport function getPreference(key:string, defaultValue:string): string {\n  return localStorage.getItem(key) || defaultValue;\n}\n\n/**\n * store value to storage\n * @param {string} key\n * @param {string} value\n */\nexport function storePreference(key:string, value:string):void {\n  localStorage.setItem(key, value);\n}\n","import React, { useState } from 'react';\nimport { Modal, Button, useTheme } from '@aragon/ui';\nimport { getPreference, storePreference } from \"../../utils/storage\";\nimport { COUPON_EXPIRATION } from \"../../constants/values\";\n\nfunction ModalWarning() {\n  const storedShowWarning = getPreference('showCouponWarning', '1');\n  const [showWarning, setShowWarning] = useState(storedShowWarning === '1');\n  const theme = useTheme();\n\n  return (\n    <Modal visible={showWarning} closeButton={false}>\n      <div style={{ width: '100%' }}>\n        <div style={{ fontSize: 24, padding: 3, color: theme.warning }}>\n          Warning\n        </div>\n\n        <div style={{\n          marginLeft: '3%',\n          fontSize: 16,\n          padding: 5\n        }}>\n          <div>\n            By purchasing coupons the buyer incurs significant risk of loss.\n            Coupons will only become redeemable during the next supply\n            expansion. Each expansionary epoch, a tranche of rewards are\n            reserved for coupon redemptions by the DAO. At that time, the\n            redemption process is first come, first served. Coupon redemption\n            is not guaranteed.\n          </div>\n\n          <div style={{\n            padding: 10,\n            textAlign: 'center',\n            color: theme.warningSurfaceContent\n          }}>\n            Coupons will expire worthless if not redeemed\n            within {COUPON_EXPIRATION} epochs.\n          </div>\n        </div>\n\n        <div style={{ textAlign: 'right' }}>\n          <Button\n            label={'I understand'}\n            onClick={() => {\n              storePreference('showCouponWarning', '0');\n              setShowWarning(false);\n            }}\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default ModalWarning;\n","import React, { useState, useEffect } from 'react';\nimport { Header, Box } from '@aragon/ui';\nimport { useParams } from 'react-router-dom';\n\nimport {\n  getCouponPremium,\n  getTokenAllowance,\n  getTokenBalance,\n  getTokenTotalSupply, getTotalCoupons,\n  getTotalDebt, getTotalRedeemable,\n} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport CouponMarketHeader from \"./Header\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport PurchaseCoupons from \"./PurchaseCoupons\";\nimport PurchaseHistory from \"./PurchaseHistory\";\nimport ModalWarning from \"./ModalWarning\";\nimport IconHeader from \"../common/IconHeader\";\nimport {getPreference, storePreference} from \"../../utils/storage\";\nimport {CheckBox} from \"../common\";\n\nconst ONE_COUPON = new BigNumber(10).pow(18);\n\nfunction CouponMarket({ user }: {user: string}) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n\n  const storedHideRedeemed = getPreference('hideRedeemedCoupons', '0');\n\n  const [balance, setBalance] = useState(new BigNumber(0));\n  const [allowance, setAllowance] = useState(new BigNumber(0));\n  const [supply, setSupply] = useState(new BigNumber(0));\n  const [coupons, setCoupons] = useState(new BigNumber(0));\n  const [redeemable, setRedeemable] = useState(new BigNumber(0));\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\n  const [debt, setDebt] = useState(new BigNumber(0));\n  const [hideRedeemed, setHideRedeemed] = useState(storedHideRedeemed === '1');\n\n  useEffect(() => {\n    if (user === '') {\n      setBalance(new BigNumber(0));\n      setAllowance(new BigNumber(0));\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [balanceStr, allowanceStr] = await Promise.all([\n        getTokenBalance(VTD.addr, user),\n        getTokenAllowance(VTD.addr, user, VTDD.addr),\n      ]);\n\n      const userBalance = toTokenUnitsBN(balanceStr, VTD.decimals);\n\n      if (!isCancelled) {\n        setBalance(new BigNumber(userBalance));\n        setAllowance(new BigNumber(allowanceStr));\n        (new BigNumber(allowanceStr));\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [supplyStr, debtStr, couponsStr, redeemableStr] = await Promise.all([\n        getTokenTotalSupply(VTD.addr),\n        getTotalDebt(VTDD.addr),\n        getTotalCoupons(VTDD.addr),\n        getTotalRedeemable(VTDD.addr),\n      ]);\n\n      const totalSupply = toTokenUnitsBN(supplyStr, VTD.decimals);\n      const totalDebt = toTokenUnitsBN(debtStr, VTD.decimals);\n      const totalCoupons = toTokenUnitsBN(couponsStr, VTD.decimals);\n      const totalRedeemable = toTokenUnitsBN(redeemableStr, VTD.decimals);\n\n      if (!isCancelled) {\n        setSupply(new BigNumber(totalSupply));\n        setDebt(new BigNumber(totalDebt));\n        setCoupons(new BigNumber(totalCoupons));\n        setRedeemable(new BigNumber(totalRedeemable));\n\n        if (totalDebt.isGreaterThan(new BigNumber(1))) {\n          const couponPremiumStr = await getCouponPremium(VTDD.addr, ONE_COUPON)\n          setCouponPremium(toTokenUnitsBN(couponPremiumStr, VTD.decimals));\n        } else {\n          setCouponPremium(new BigNumber(0));\n        }\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <ModalWarning/>\n\n      <Box>\n\n      <CouponMarketHeader\n        debt={debt}\n        supply={supply}\n        coupons={coupons}\n        premium={couponPremium}\n        redeemable={redeemable}\n      />\n      </Box>\n\n      <h5 style={{\n                    fontSize: '10px',\n                    margin: '10px 0'\n                  }}\n                  >Purchase Coupons</h5>\n\n      <PurchaseCoupons\n        user={user}\n        allowance={allowance}\n        balance={balance}\n        debt={debt}\n      />\n\n      <div style={{ display: 'flex' }}>\n        <h5 style={{\n                    fontSize: '10px',\n                    margin: '10px 0'\n                  }}\n                  >Your Coupons</h5>\n        <div style={{ marginLeft: 'auto', alignSelf: 'flex-end' }}>\n          <CheckBox\n            text=\"Hide Redeemed\"\n            onCheck={(checked) => {\n              storePreference('hideRedeemedCoupons', checked ? '1' : '0');\n              setHideRedeemed(checked);\n            }}\n            checked={hideRedeemed}\n          />\n        </div>\n      </div>\n\n      <PurchaseHistory\n        user={user}\n        hideRedeemed={hideRedeemed}\n        totalRedeemable={redeemable}\n      />\n    </>\n  );\n}\n\nexport default CouponMarket;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\nimport {AddressBlock, BalanceBlock} from \"../common\";\nimport TextBlock from \"../common/TextBlock\";\nimport {ownership} from \"../../utils/number\";\nimport {GOVERNANCE_PROPOSAL_THRESHOLD} from \"../../constants/values\";\n\ntype GovernanceHeaderProps = {\n  stake: BigNumber,\n  totalStake: BigNumber,\n  accountStatus: number,\n  implementation: string\n};\n\nconst STATUS_MAP = [\"Frozen\", \"Fluid\", \"Locked\"];\n\nconst GovernanceHeader = ({\n  stake, totalStake, accountStatus, implementation\n}: GovernanceHeaderProps) => (\n  <div style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n    <div style={{ flexBasis: '25%' }}>\n      <BalanceBlock asset=\"DAO Ownership\" balance={ownership(stake, totalStake)} suffix=\"%\" />\n    </div>\n    <div style={{ flexBasis: '25%' }}>\n      <BalanceBlock asset=\"Proposal Threshold\" balance={GOVERNANCE_PROPOSAL_THRESHOLD.multipliedBy(100)} suffix=\"%\" />\n    </div>\n    <div style={{ flexBasis: '25%' }}>\n      <TextBlock label=\"Status\" text={STATUS_MAP[accountStatus]}/>\n    </div>\n    <div style={{ flexBasis: '25%' }}>\n      <AddressBlock label=\"Implementation\" address={implementation} />\n    </div>\n  </div>\n);\n\n\nexport default GovernanceHeader;\n","import {GOVERNANCE_PROPOSAL_THRESHOLD, GOVERNANCE_QUORUM, SUPERMAJORITY} from \"../constants/values\";\nimport BigNumber from \"bignumber.js\";\n\nexport function proposalStatus(epoch, start, period, initialized, approve, reject, total): string {\n  if (start === 0) {\n    return \"N/A\";\n  }\n  if (epoch < start) {\n    return \"Unknown\";\n  }\n  if (initialized) {\n    return \"Committed\"\n  }\n  if (approve.plus(reject).dividedBy(total).comparedTo(SUPERMAJORITY) > 0) {\n    return \"Fast Trackable\"; // Didn't meet quorum\n  }\n  if (epoch < (start + period)) {\n    return \"Voting\"\n  }\n  if (epoch < (start + period)) {\n    return \"Rejected\"; // Not ended\n  }\n  if (approve.plus(reject).dividedBy(total).comparedTo(GOVERNANCE_QUORUM) < 0) {\n    return \"Rejected\"; // Didn't meet quorum\n  }\n  return approve.comparedTo(reject) > 0 ? \"Approved\" : \"Rejected\";\n}\n\nexport function canPropose(stake: BigNumber, totalStake: BigNumber): boolean {\n  return stake.div(totalStake).comparedTo(GOVERNANCE_PROPOSAL_THRESHOLD) >= 0;\n}","import React, { useState } from 'react';\nimport {\n  Box, TextInput, Button, IconToken,\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {recordVote} from '../../utils/web3';\n\nimport {VTDD} from \"../../constants/tokens\";\nimport {canPropose} from \"../../utils/gov\";\n\ntype ProposeCandidateProps = {\n  user: string,\n  stake: BigNumber,\n  totalStake: BigNumber,\n  accountStatus: number\n};\n\nfunction plausibleCandidate(candidate: string): boolean {\n  return (/^(0x)[0-9a-fA-F]{40}$/i.test(candidate));\n}\n\nfunction ProposeCandidate({\n  user, stake, totalStake, accountStatus,\n}: ProposeCandidateProps) {\n  const [candidate, setCandidate] = useState(\"0x\");\n\n  return (\n    <Box heading=\"Propose\">\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\n        {/* User balance */}\n        <div style={{flexBasis: '62%', paddingTop: '2%'}}>\n          <>\n            <TextInput\n              wide\n              value={candidate}\n              onChange={(event) => {\n                if (event.target.value) {\n                  setCandidate(event.target.value);\n                } else {\n                  setCandidate(\"0x\");\n                }\n              }}\n            />\n          </>\n        </div>\n        <div style={{flexBasis: '6%'}}/>\n        {/* Purchase coupons */}\n        <div style={{flexBasis: '32%', paddingTop: '2%'}}>\n          <Button\n            wide\n            icon={<IconToken/>}\n            label=\"Propose\"\n            onClick={() => {\n              recordVote(\n                VTDD.addr,\n                candidate,\n                1 // APPROVE\n              );\n            }}\n            disabled={user === '' || !canPropose(stake, totalStake) || !plausibleCandidate(candidate) || accountStatus === 1}\n          />\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nexport default ProposeCandidate;\n","import React, {useEffect, useState} from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Button, IconRight, DataView\n} from '@aragon/ui';\n\nimport {\n  getAllProposals,\n  getApproveFor,\n  getEpoch,\n  getIsInitialized,\n  getRejectFor,\n  getTokenTotalSupply, getTotalBondedAt\n} from '../../utils/infura';\nimport {VTDD} from \"../../constants/tokens\";\nimport {AddressBlock} from \"../common\";\nimport {proposalStatus} from \"../../utils/gov\";\nimport BigNumber from \"bignumber.js\";\n\ntype CandidateHistoryProps = {\n  user: string;\n};\n\ntype Proposal = {\n  index: number\n  candidate: string,\n  account: string,\n  start: number,\n  period: number,\n  status: string\n}\n\nasync function formatProposals(epoch: number, proposals: any[]): Promise<Proposal[]> {\n  const currentTotalStake = await getTokenTotalSupply(VTDD.addr);\n  const initializeds = await Promise.all(proposals.map((p) => getIsInitialized(VTDD.addr, p.candidate)));\n  const approves = await Promise.all(proposals.map((p) => getApproveFor(VTDD.addr, p.candidate)));\n  const rejecteds = await Promise.all(proposals.map((p) => getRejectFor(VTDD.addr, p.candidate)));\n  const supplyAts = await Promise.all(proposals.map(async (p) => {\n    const at = (p.start + p.period - 1);\n    if (epoch > at) {\n      return await getTotalBondedAt(VTDD.addr, at);\n    }\n    return currentTotalStake;\n  }));\n\n  for (let i = 0; i < proposals.length; i++) {\n    proposals[i].index = (proposals.length - i);\n    proposals[i].start = parseInt(proposals[i].start);\n    proposals[i].period = parseInt(proposals[i].period);\n    proposals[i].status = proposalStatus(\n      epoch,\n      proposals[i].start,\n      proposals[i].period,\n      initializeds[i],\n      new BigNumber(approves[i]),\n      new BigNumber(rejecteds[i]),\n      new BigNumber(supplyAts[i])\n    );\n  }\n  return proposals\n}\n\nfunction CandidateHistory({user}: CandidateHistoryProps) {\n  const history = useHistory();\n  const [proposals, setProposals] = useState<Proposal[]>([]);\n  const [page, setPage] = useState(0)\n  const [initialized, setInitialized] = useState(false)\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [epochStr, allProposals] = await Promise.all([\n        getEpoch(VTDD.addr),\n        getAllProposals(VTDD.addr),\n      ]);\n\n      if (!isCancelled) {\n        const formattedProposals = await formatProposals(parseInt(epochStr), allProposals);\n        setProposals(formattedProposals);\n        setInitialized(true);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <DataView\n      fields={['Proposal', 'Candidate', 'Proposed', 'Complete', 'Proposer', 'Status', '']}\n      status={ initialized ? 'default' : 'loading' }\n      // @ts-ignore\n      entries={proposals}\n      entriesPerPage={10}\n      page={page}\n      onPageChange={setPage}\n      renderEntry={(proposal) => [\n        \"#\" + proposal.index,\n        <AddressBlock label=\"\" address={proposal.candidate} />,\n        proposal.start.toString(),\n        (proposal.start + proposal.period).toString(),\n        <AddressBlock label=\"\" address={proposal.account} />,\n        proposal.status,\n        <Button\n          wide\n          icon={<IconRight />}\n          label=\"Go To\"\n          onClick={() => {\n            history.push(`/governance/candidate/${proposal.candidate}`);\n          }}\n        />\n      ]}\n    />\n  );\n}\n\nexport default CandidateHistory;\n","import React, { useState, useEffect } from 'react';\nimport { Header, Box } from '@aragon/ui';\n\nimport {\n  getImplementation,\n  getStatusOf,\n  getTokenBalance,\n  getTokenTotalSupply,\n} from '../../utils/infura';\nimport {VTDD} from \"../../constants/tokens\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport GovernanceHeader from \"./Header\";\nimport ProposeCandidate from \"./ProposeCandidate\";\nimport CandidateHistory from \"./CandidateHistory\";\nimport IconHeader from \"../common/IconHeader\";\nimport {canPropose} from \"../../utils/gov\";\n\nfunction Governance({ user }: {user: string}) {\n\n  const [stake, setStake] = useState(new BigNumber(0));\n  const [totalStake, setTotalStake] = useState(new BigNumber(0));\n  const [userStatus, setUserStatus] = useState(0);\n  const [implementation, setImplementation] = useState(\"0x\");\n\n  useEffect(() => {\n    if (user === '') {\n      setStake(new BigNumber(0));\n      setUserStatus(0);\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [statusStr, stakeStr] = await Promise.all([\n        getStatusOf(VTDD.addr, user),\n        getTokenBalance(VTDD.addr, user),\n      ]);\n\n      if (!isCancelled) {\n        setStake(toTokenUnitsBN(stakeStr, VTDD.decimals));\n        setUserStatus(parseInt(statusStr, 10));\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [totalStakeStr, implementationStr] = await Promise.all([\n        getTokenTotalSupply(VTDD.addr),\n        getImplementation(VTDD.addr),\n      ]);\n\n      if (!isCancelled) {\n        setTotalStake(toTokenUnitsBN(totalStakeStr, VTDD.decimals));\n        setImplementation(implementationStr)\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <Box>\n      <GovernanceHeader\n        stake={stake}\n        totalStake={totalStake}\n        accountStatus={userStatus}\n        implementation={implementation}\n      />\n      </Box>\n\n      {\n        canPropose(stake, totalStake) ?\n          <>\n        <h5 style={{\n          fontSize: '10px',\n          margin: '10px 0'\n        }}\n        >Propose Upgrade Candidate</h5>\n            <ProposeCandidate\n              user={user}\n              stake={stake}\n              totalStake={totalStake}\n              accountStatus={userStatus}\n            />\n          </>\n          :\n          ''\n      }\n\n      <h5 style={{\n          fontSize: '10px',\n          margin: '10px 0'\n        }}\n        >Proposals</h5>\n\n      <CandidateHistory user={user}/>\n    </>\n  );\n}\n\nexport default Governance;\n","import React from 'react';\nimport {\n  Box, Button, IconRotateLeft, IconCircleCheck, IconProhibited\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock,\n} from '../common/index';\nimport {recordVote} from '../../utils/web3';\n\nimport {VTDD} from \"../../constants/tokens\";\nimport TextBlock from \"../common/TextBlock\";\n\ntype VoteProps = {\n  candidate: string,\n  stake: BigNumber,\n  vote: number,\n  status: number\n};\n\nconst VOTE_TYPE_MAP = [\"Undecided\", \"Approve\", \"Reject\"]\n\nfunction Vote({\n  candidate, stake, vote, status\n}: VoteProps) {\n  return (\n    <Box heading=\"Vote\">\n      <div style={{display: 'flex'}}>\n        {/* User stake */}\n        <div style={{width: '20%'}}>\n          <BalanceBlock asset=\"My Stake\" balance={stake} suffix={ \"VTDD\"}/>\n        </div>\n        <div style={{width: '20%'}}>\n          <TextBlock label=\"My Vote\" text={VOTE_TYPE_MAP[vote]}/>\n        </div>\n        {/* Remove vote for candidate */}\n        <div style={{width: '18%', paddingTop: '2%'}}>\n          <Button\n            wide\n            icon={<IconRotateLeft/>}\n            label=\"Unvote\"\n            onClick={() => {\n              recordVote(\n                VTDD.addr,\n                candidate,\n                0 // UNDECIDED\n              );\n            }}\n            disabled={status === 1 || vote === 0 || stake.isZero()}\n          />\n        </div>\n        {/* Vote to approve candidate */}\n        <div style={{width: '3%'}} />\n        <div style={{width: '18%', paddingTop: '2%'}}>\n          <Button\n            wide\n            icon={<IconCircleCheck/>}\n            label=\"Accept\"\n            onClick={() => {\n              recordVote(\n                VTDD.addr,\n                candidate,\n                1 // APPROVE\n              );\n            }}\n            disabled={status === 1 || vote === 1 || stake.isZero()}\n          />\n        </div>\n        {/* Vote to reject candidate */}\n        <div style={{width: '3%'}} />\n        <div style={{width: '18%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n              <Button\n                wide\n                icon={<IconProhibited/>}\n                label=\"Reject\"\n                onClick={() => {\n                  recordVote(\n                    VTDD.addr,\n                    candidate,\n                    2 // REJECT\n                  );\n                }}\n                disabled={status === 1 || vote === 2 || stake.isZero()}\n              />\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nexport default Vote;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\nimport { BalanceBlock } from \"../common\";\n\ntype VoteHeaderProps = {\n  approveFor: BigNumber,\n  rejectFor: BigNumber,\n  totalStake: BigNumber,\n  showParticipation: boolean,\n};\n\nfunction approval(approve: BigNumber, reject: BigNumber): BigNumber {\n  return approve.multipliedBy(10000).dividedToIntegerBy(approve.plus(reject)).dividedBy(100)\n}\n\nfunction participation(approve: BigNumber, reject: BigNumber, totalStake: BigNumber): BigNumber {\n  return approve.plus(reject).multipliedBy(10000).dividedToIntegerBy(totalStake).dividedBy(100)\n}\n\nconst VoteHeader = ({\n  approveFor, rejectFor, totalStake, showParticipation\n}: VoteHeaderProps) => (\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\n    <div style={{ width: '25%' }}>\n      <BalanceBlock asset=\"Approve\" balance={approveFor} suffix={ \"VTDD\"}/>\n    </div>\n    <div style={{ width: '25%' }}>\n      <BalanceBlock asset=\"Reject\" balance={rejectFor} suffix={ \"VTDD\"}/>\n    </div>\n    <div style={{ width: '25%' }}>\n      <BalanceBlock asset=\"Approval\" balance={approval(approveFor, rejectFor)} suffix=\"%\" />\n    </div>\n    {showParticipation ?\n      <div style={{width: '25%'}}>\n        <BalanceBlock asset=\"Participation\" balance={participation(approveFor, rejectFor, totalStake)} suffix=\"%\"/>\n      </div> : ''\n    }\n  </div>\n);\n\n\nexport default VoteHeader;\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\n\ntype NumberBlockProps = {\n  title: string,\n  num: BigNumber | string | number\n}\n\nfunction NumberBlock({ title, num }: NumberBlockProps) {\n  const numNum = new BigNumber(num).toNumber();\n\n  return (\n    <>\n      <div style={{ fontSize: 14, padding: 3 }}>{title}</div>\n      <div style={{ fontSize: 24, padding: 3 }}>{numNum}</div>\n\n    </>\n  );\n}\n\nexport default NumberBlock;\n","import React from 'react';\n\nimport NumberBlock from \"../common/NumberBlock\";\n\ntype CommitHeaderProps = {\n  epoch: number\n  startEpoch: number,\n  periodEpoch: number,\n};\n\nconst CommitHeader = ({\n   epoch, startEpoch, periodEpoch,\n}: CommitHeaderProps) => (\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\n    <div style={{ width: '25%' }}>\n      <NumberBlock title=\"Epoch\" num={epoch} />\n    </div>\n    <div style={{ width: '25%' }}>\n      <NumberBlock title=\"Starts\" num={startEpoch} />\n    </div>\n    <div style={{ width: '25%' }}>\n      <NumberBlock title=\"Period\" num={periodEpoch} />\n    </div>\n  </div>\n);\n\n\nexport default CommitHeader;\n","import React from 'react';\nimport {\n  Box, Button, IconUpload\n} from '@aragon/ui';\nimport TextBlock from \"../common/TextBlock\";\nimport {VTDD} from \"../../constants/tokens\";\nimport {commit} from \"../../utils/web3\";\n\ntype CommitProps = {\n  user: string,\n  candidate: string,\n  epoch: number\n  startEpoch: number,\n  periodEpoch: number,\n  initialized: boolean,\n  approved: boolean\n};\n\nfunction Commit({\n  user, candidate, epoch, startEpoch, periodEpoch, initialized, approved,\n}: CommitProps) {\n  function status(epoch, startEpoch, periodEpoch, initialized, approved): string {\n    if (startEpoch === 0) {\n      return \"N/A\";\n    }\n    if (epoch < startEpoch) {\n      return \"Unknown\";\n    }\n    if (epoch < (startEpoch + periodEpoch)) {\n      return \"Voting\"\n    }\n    if (initialized) {\n      return \"Committed\"\n    }\n    if (approved) {\n      return \"Approved\"\n    }\n    return \"Rejected\"\n  }\n  const s = status(epoch, startEpoch, periodEpoch, initialized, approved);\n\n  return (\n    <Box heading=\"Commit\">\n      <div style={{display: 'flex'}}>\n        {/* Status */}\n        <div style={{ width: '30%' }}>\n          <TextBlock label=\"Status\" text={s} />\n        </div>\n        <div style={{width: '40%'}} />\n        {/* Commit candidate */}\n        <div style={{width: '30%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n              <Button\n                wide\n                icon={<IconUpload/>}\n                label=\"Commit\"\n                onClick={() => {\n                  commit(\n                    VTDD.addr,\n                    candidate\n                  );\n                }}\n                disabled={user === '' || s !== 'Approved'}\n              />\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nexport default Commit;\n","import React from 'react';\n\nimport {\n  Header,\n} from '@aragon/ui';\n\ntype IconHeaderProps = {\n  icon: any,\n  text: string\n}\n\nfunction IconHeader({ icon, text }: IconHeaderProps) {\n  return (\n    <>\n      <div style={{ padding: '1%', display: 'flex', alignItems: 'center' }}>\n        <div style={{ marginRight: '2%', fontSize: 48 }}>\n          {icon}\n        </div>\n        <div>\n          <Header primary={text} />\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default IconHeader;\n","import React, { useState, useEffect } from 'react';\nimport { Header, IdentityBadge } from '@aragon/ui';\nimport { useParams } from 'react-router-dom';\n\nimport {\n  getApproveFor, getEpoch, getIsInitialized, getPeriodFor,\n  getRecordedVote,\n  getRejectFor, getStartFor, getStatusOf,\n  getTokenBalance,\n  getTokenTotalSupply, getTotalBondedAt\n} from '../../utils/infura';\nimport {VTDD} from \"../../constants/tokens\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport Vote from \"./Vote\";\nimport VoteHeader from \"./VoteHeader\";\nimport CommitHeader from \"./CommitHeader\";\nimport Commit from \"./Commit\";\nimport IconHeader from \"../common/IconHeader\";\nimport {proposalStatus} from \"../../utils/gov\";\n\nfunction Candidate({ user }: {user: string}) {\n  const { candidate } = useParams();\n\n  const [approveFor, setApproveFor] = useState(new BigNumber(0));\n  const [rejectFor, setRejectFor] = useState(new BigNumber(0));\n  const [totalStake, setTotalStake] = useState(new BigNumber(0));\n  const [vote, setVote] = useState(0);\n  const [status, setStatus] = useState(0);\n  const [userStake, setUserStake] = useState(new BigNumber(0));\n  const [epoch, setEpoch] = useState(0);\n  const [startEpoch, setStartEpoch] = useState(0);\n  const [periodEpoch, setPeriodEpoch] = useState(0);\n  const [initialized, setInitialized] = useState(false);\n\n  useEffect(() => {\n    if (user === '') {\n      setVote(0);\n      setStatus(0);\n      setUserStake(new BigNumber(0));\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [\n        voteStr, statusStr, userStakeStr,\n      ] = await Promise.all([\n        getRecordedVote(VTDD.addr, user, candidate),\n        getStatusOf(VTDD.addr, user),\n        getTokenBalance(VTDD.addr, user),\n      ]);\n\n      if (!isCancelled) {\n        setVote(parseInt(voteStr, 10));\n        setStatus(parseInt(statusStr, 10));\n        setUserStake(toTokenUnitsBN(userStakeStr, VTDD.decimals));\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user, candidate]);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      let [\n        approveForStr, rejectForStr, totalStakeStr,\n        epochStr, startForStr, periodForStr, isInitialized\n      ] = await Promise.all([\n        getApproveFor(VTDD.addr, candidate),\n        getRejectFor(VTDD.addr, candidate),\n        getTokenTotalSupply(VTDD.addr),\n        getEpoch(VTDD.addr),\n        getStartFor(VTDD.addr, candidate),\n        getPeriodFor(VTDD.addr, candidate),\n        getIsInitialized(VTDD.addr, candidate),\n      ]);\n\n      const epochN = parseInt(epochStr, 10);\n      const startN = parseInt(startForStr, 10);\n      const periodN = parseInt(periodForStr, 10);\n\n      const endsAfter = (startN + periodN - 1);\n      if (epochN > endsAfter) {\n        totalStakeStr = await getTotalBondedAt(VTDD.addr, endsAfter);\n      }\n\n      if (!isCancelled) {\n        setApproveFor(toTokenUnitsBN(approveForStr, VTDD.decimals));\n        setRejectFor(toTokenUnitsBN(rejectForStr, VTDD.decimals));\n        setTotalStake(toTokenUnitsBN(totalStakeStr, VTDD.decimals));\n        setEpoch(epochN);\n        setStartEpoch(startN);\n        setPeriodEpoch(periodN);\n        setInitialized(isInitialized);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [candidate]);\n\n  return (\n    <>\n      <IconHeader icon={<i className=\"fas fa-poll\"/>} text=\"Candidate\"/>\n      <IdentityBadge entity={candidate} shorten={false} />\n\n      <VoteHeader\n        approveFor={approveFor}\n        rejectFor={rejectFor}\n        totalStake={totalStake}\n        showParticipation={startEpoch > 106}\n      />\n\n      <Header primary=\"Vote\" />\n      <Vote\n        candidate={candidate}\n        stake={userStake}\n        vote={vote}\n        status={status}\n      />\n\n      <Header primary=\"Commit\" />\n      <CommitHeader\n        epoch={epoch}\n        startEpoch={startEpoch}\n        periodEpoch={periodEpoch}\n      />\n\n      <Commit\n        user={user}\n        candidate={candidate}\n        epoch={epoch}\n        startEpoch={startEpoch}\n        periodEpoch={periodEpoch}\n        initialized={initialized}\n        approved={proposalStatus(epoch, startEpoch, periodEpoch, false, approveFor, rejectFor, totalStake) === \"Approved\"}\n      />\n    </>\n  );\n}\n\nexport default Candidate;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\n\nimport {Box, Distribution} from '@aragon/ui';\nimport {formatMoney, ownership} from \"../../utils/number\";\n\ntype RegulationHeaderProps = {\n  totalSupply: BigNumber,\n\n  totalBonded: BigNumber,\n  totalStaged: BigNumber,\n  totalRedeemable: BigNumber,\n\n  totalDebt: BigNumber,\n  totalCoupons: BigNumber,\n  couponPremium: BigNumber,\n};\n\nconst RegulationHeader = ({\n  totalSupply,\n  totalBonded, totalStaged, totalRedeemable,\n  totalDebt, totalCoupons, couponPremium\n}: RegulationHeaderProps) => {\n  const daoTotalSupply = totalBonded.plus(totalStaged).plus(totalRedeemable);\n  // const circulatingSupply = totalSupply.minus(daoTotalSupply).minus(poolTotalSupply);\n\n  return (\n    <>\n      <div>\n          <Box heading=\"Supply Allocation\">\n            <Distribution\n              heading={`v:${formatMoney(totalSupply.toNumber())}`}\n              items={[\n                { item: 'DAO', percentage: +(ownership(daoTotalSupply, totalSupply).toNumber().toFixed(2)) },\n                // { item: 'Uniswap', percentage: +(ownership(poolTotalSupply, totalSupply).toNumber().toFixed(2)) },\n                // { item: 'Circulating', percentage: +(ownership(circulatingSupply, totalSupply).toNumber().toFixed(2)) },\n              ]}\n            />\n          </Box>\n\n          <Box heading=\"DAO Breakdown\">\n            <Distribution\n              heading={`v:${formatMoney(daoTotalSupply.toNumber())}`}\n              items={[\n                { item: 'Bonded', percentage: +(ownership(totalBonded, daoTotalSupply).toNumber().toFixed(2)) },\n                { item: 'Staged', percentage: +(ownership(totalStaged, daoTotalSupply).toNumber().toFixed(2)) },\n                { item: 'Redeemable', percentage: +(ownership(totalRedeemable, daoTotalSupply).toNumber().toFixed(2)) },\n              ]}\n            />\n          </Box>\n\n\n          {/* <Box heading=\"Uniswap Breakdown\">\n            <Distribution\n              heading={`v:${formatMoney(poolTotalSupply.toNumber())}`}\n              items={[\n                { item: 'Liquidity', percentage: +(ownership(poolLiquidity, poolTotalSupply).toNumber().toFixed(2)) },\n                { item: 'Rewarded', percentage: +(ownership(poolRewarded, poolTotalSupply).toNumber().toFixed(2)) },\n                { item: 'Claimable', percentage: +(ownership(poolClaimable, poolTotalSupply).toNumber().toFixed(2)) },\n              ]}\n            />\n          </Box> */}\n\n      </div>\n    </>\n  );\n}\n\n\nexport default RegulationHeader;\n","import React, {useEffect, useState, useContext} from 'react';\nimport { DataView } from '@aragon/ui';\n\nimport {getAllRegulations} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {formatBN, toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport {EpochContext, ContextType, IEpochs } from \"../../store/EpochStore\";\n\ntype RegulationHistoryProps = {\n  user: string,\n};\n\ntype Regulation = {\n  type: string,\n  data: RegulationEntry\n}\n\ntype RegulationEntry = {\n  epoch: string;\n  price: string;\n  momentumPrice: string;\n  deltaRedeemable: string;\n  deltaDebt: string;\n  deltaBonded: string;\n}\n\nfunction formatPrice(reg) {\n  return reg.type === 'NEUTRAL' ? '1.00' : formatBN(reg.price, 2)\n}\n\nfunction formatMomentumPrice(reg) {\n  return !!reg.momentumPrice.toNumber() ? formatBN(reg.momentumPrice, 2) : '-'\n}\nfunction formatDeltaRedeemable(reg) {\n  return reg.type === 'INCREASE' ?\n    '+' + formatBN(reg.deltaRedeemable, 2) :\n    '+0.00';\n}\n\nfunction formatDeltaDebt(reg) {\n  return reg.type === 'INCREASE' ?\n    '-' + formatBN(reg.deltaDebt, 2) :\n    reg.type === 'DECREASE' ?\n      '+' + formatBN(reg.deltaDebt, 2) :\n      '+0.00';\n}\n\nfunction formatDeltaBonded(reg) {\n  return reg.type === 'INCREASE' ?\n    '+' + formatBN(reg.deltaBonded, 2) :\n    '+0.00';\n}\n\nfunction renderEntry(reg: IEpochs): string[] {\n  return [\n    reg.epoch.toString(),\n    formatPrice(reg),\n    formatMomentumPrice(reg),\n    formatDeltaRedeemable(reg),\n    formatDeltaDebt(reg),\n    formatDeltaBonded(reg),\n  ]\n}\n\nfunction RegulationHistory({\n  user,\n}: RegulationHistoryProps) {\n  const [page, setPage] = useState(0)\n  const [initialized, setInitialized] = useState(false)\n  const { regulations, updateRegulations} = React.useContext(EpochContext) as ContextType;\n\n  //Update User balances\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      updateRegulations();\n    }\n\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <DataView\n      fields={['Epoch', 'Price', 'Momentum Price', 'Δ Redeemable', 'Δ Debt', 'Δ Bonded']}\n      status={ initialized ? 'default' : 'loading' }\n      entries={regulations}\n      entriesPerPage={10}\n      page={page}\n      onPageChange={setPage}\n      renderEntry={renderEntry}\n    />\n  );\n}\n\nexport default RegulationHistory;\n","import React, { useState, useEffect } from 'react';\nimport { Header, Split } from '@aragon/ui';\n\nimport {\n  getCouponPremium,\n  getPoolTotalClaimable, getPoolTotalRewarded, getTokenBalance,\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged,\n} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport RegulationHeader from \"./Header\";\nimport RegulationHistory from \"./RegulationHistory\";\nimport IconHeader from \"../common/IconHeader\";\n\nconst ONE_COUPON = new BigNumber(10).pow(18);\n\nfunction Regulation({ user }: {user: string}) {\n\n  const [totalSupply, setTotalSupply] = useState(new BigNumber(0));\n  const [totalBonded, setTotalBonded] = useState(new BigNumber(0));\n  const [totalStaged, setTotalStaged] = useState(new BigNumber(0));\n  const [totalRedeemable, setTotalRedeemable] = useState(new BigNumber(0));\n  const [poolLiquidity, setPoolLiquidity] = useState(new BigNumber(0));\n  const [poolTotalRewarded, setPoolTotalRewarded] = useState(new BigNumber(0));\n  const [poolTotalClaimable, setPoolTotalClaimable] = useState(new BigNumber(0));\n  const [legacyPoolTotalRewarded, setLegacyPoolTotalRewarded] = useState(new BigNumber(0));\n  const [legacyPoolTotalClaimable, setLegacyPoolTotalClaimable] = useState(new BigNumber(0));\n  const [totalDebt, setTotalDebt] = useState(new BigNumber(0));\n  const [totalCoupons, setTotalCoupons] = useState(new BigNumber(0));\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\n\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n\n      const [\n        totalSupplyStr,\n        totalBondedStr, totalStagedStr, totalRedeemableStr,\n        totalDebtStr, totalCouponsStr\n      ] = await Promise.all([\n        getTokenTotalSupply(VTD.addr),\n\n        getTotalBonded(VTDD.addr),\n        getTotalStaged(VTDD.addr),\n        getTotalRedeemable(VTDD.addr),\n\n        // getTokenBalance(VTD.addr, UNI.addr),\n        // getPoolTotalRewarded(poolAddress),\n        // getPoolTotalClaimable(poolAddress),\n\n        // getPoolTotalRewarded(legacyPoolAddress),\n        // getPoolTotalClaimable(legacyPoolAddress),\n\n        getTotalDebt(VTDD.addr),\n        getTotalCoupons(VTDD.addr),\n      ]);\n\n      if (!isCancelled) {\n        setTotalSupply(toTokenUnitsBN(totalSupplyStr, VTD.decimals));\n\n        setTotalBonded(toTokenUnitsBN(totalBondedStr, VTD.decimals));\n        setTotalStaged(toTokenUnitsBN(totalStagedStr, VTD.decimals));\n        setTotalRedeemable(toTokenUnitsBN(totalRedeemableStr, VTD.decimals));\n\n        // setPoolLiquidity(toTokenUnitsBN(poolLiquidityStr, VTD.decimals));\n        // setPoolTotalRewarded(toTokenUnitsBN(poolTotalRewardedStr, VTD.decimals));\n        // setPoolTotalClaimable(toTokenUnitsBN(poolTotalClaimableStr, VTD.decimals));\n\n        // setLegacyPoolTotalRewarded(toTokenUnitsBN(legacyPoolTotalRewardedStr, VTD.decimals));\n        // setLegacyPoolTotalClaimable(toTokenUnitsBN(legacyPoolTotalClaimableStr, VTD.decimals));\n\n        setTotalDebt(toTokenUnitsBN(totalDebtStr, VTD.decimals));\n        setTotalCoupons(toTokenUnitsBN(totalCouponsStr, VTD.decimals));\n\n        if (new BigNumber(totalDebtStr).isGreaterThan(ONE_COUPON)) {\n          const couponPremiumStr = await getCouponPremium(VTDD.addr, ONE_COUPON)\n          setCouponPremium(toTokenUnitsBN(couponPremiumStr, VTD.decimals));\n        } else {\n          setCouponPremium(new BigNumber(0));\n        }\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <Split\n        primary={\n          <>\n          {/* <Header primary=\"Supply History\" /> */}\n\n          <RegulationHistory\n            user={user}\n          />\n          </>\n        }\n        secondary={\n          <RegulationHeader\n          totalSupply={totalSupply}\n  \n          totalBonded={totalBonded}\n          totalStaged={totalStaged}\n          totalRedeemable={totalRedeemable}\n  \n          totalDebt={totalDebt}\n          totalCoupons={totalCoupons}\n          couponPremium={couponPremium}\n        />\n        }\n      />\n    </>\n  );\n}\n\nexport default Regulation;\n","import React from 'react';\nimport {\n  Box, LinkBase, Tag,\n} from '@aragon/ui';\n\nfunction HomePageNoWeb3() {\n\n  return (\n    <>\n      <div style={{ padding: '1%', display: 'flex', alignItems: 'center' }}>\n        <MainButton\n          title=\"No web3 wallet detected\"\n          description=\"Click to get Metamask.\"\n          icon={<i className=\"fas fa-times-circle\"/>}\n          onClick={() => {\n            // @ts-ignore\n            window.location = 'https://www.metamask.io/';\n          }}\n        />\n      </div>\n    </>\n  );\n}\n\ntype MainButtonPropx = {\n  title: string,\n  description: string,\n  icon: any,\n  onClick: Function,\n  tag?:string\n}\n\nfunction MainButton({\n  title, description, icon, onClick, tag,\n}:MainButtonPropx) {\n  return (\n    <LinkBase onClick={onClick} style={{ width: '100%' }}>\n      <Box>\n        <div style={{ padding: 10, fontSize: 18 }}>\n          {title}\n          {tag ? <Tag>{tag}</Tag> : <></>}\n        </div>\n        <span style={{ fontSize: 48 }}>\n          {icon}\n        </span>\n        {/*<img alt=\"icon\" style={{ padding: 10, height: 64 }} src={iconUrl} />*/}\n        <div style={{ paddingTop: 5, opacity: 0.5 }}>\n          {' '}\n          {description}\n          {' '}\n        </div>\n\n      </Box>\n    </LinkBase>\n  );\n}\n\nexport default HomePageNoWeb3;\n","export const vtdTheme = {\n    \"name\": 'vtdDark',\n    \"palette\": {\n      \"accents_1\": \"#111\",\n      \"accents_2\": \"#333\",\n      \"accents_3\": \"#444\",\n      \"accents_4\": \"#666\",\n      \"accents_5\": \"#888\",\n      \"accents_6\": \"#999\",\n      \"accents_7\": \"#eaeaea\",\n      \"accents_8\": \"#fafafa\",\n      \"background\": \"#212121\",\n      \"foreground\": \"#fff\",\n      \"selection\": \"#f81ce5\",\n      \"secondary\": \"#888\",\n      \"code\": \"#79ffe1\",\n      \"border\": \"#333\",\n      \"link\": \"#3291ff\"\n    },\n    \"expressiveness\": {\n      \"dropdownBoxShadow\": \"0 0 0 1px #333\",\n      \"shadowSmall\": \"0 0 0 1px #333\",\n      \"shadowMedium\": \"0 0 0 1px #333\",\n      \"shadowLarge\": \"0 0 0 1px #333\",\n      \"portalOpacity\": 0.75\n    }\n  }\n\nexport const vtdLight = {\n  \"name\": 'vtdLight',\n  \"palette\": {\n    \"accents_1\": \"#bbbbbb\",\n    \"accents_2\": \"#d6e1e9\",\n    \"accents_3\": \"rgb(142, 211, 220)\",\n    \"background\": \"#ffffff\"\n  },\n  \"expressiveness\": {\n    \"dropdownBoxShadow\": \"0 4px 4px 0 rgba(0, 0, 0, 0.05)\"\n  }\n}\n\nexport default vtdTheme;","import React, { useMemo, useEffect, useState } from 'react'\nimport { useTheme } from '@geist-ui/react'\nimport { useHistory } from 'react-router-dom';\nimport _JSXStyle from \"styled-jsx/style\"\n\nexport interface Props {\n  href: string\n  text: string\n  closeSideBar: Function\n}\n\nconst ActiveLink: React.FC<Props> = React.memo(({ href, text, closeSideBar }) => {\n  const [page, setPage] = useState(\"\");\n  const theme = useTheme()\n  const history = useHistory()\n  const [title, subtitle] = useMemo(() => {\n    if (!/[\\u4E00-\\u9FA5]/.test(text)) return [text, null]\n    if (/zeit|ui|ZEIT|geist|Geist|UI/.test(text)) return [text, null]\n    return [text.replace(/[^\\u4E00-\\u9FA5]/g, ''), text.replace(/[^a-zA-Z]/g, '')]\n  }, [text])\n\n  useEffect(() => {\n    return history.listen((location) => {\n      setPage(location.pathname)\n    })\n  }, [history]);\n  \n  return (\n    <div className=\"link\">\n        <a onClick={() => {closeSideBar(); history.push(href)}} className={page.includes(href) ? 'active' : ''}>\n          {title}\n          {subtitle && <span>&nbsp;{subtitle}</span>}\n        </a>\n\n      <style jsx>{`\n        .link {\n          width: 100%;\n          color: ${theme.palette.accents_5};\n          display: flex;\n          height: 2.25rem;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          text-transform: capitalize;\n          padding-bottom: 1rem;\n        }\n\n        a {\n          color: ${theme.palette.accents_7};\n          font-size: 1rem;\n          transition: all 200ms ease;\n          font-weight: 400;\n          display: inline-flex;\n          align-items: baseline;\n        }\n\n        a.active {\n          color: ${theme.palette.success};\n          font-weight: 600;\n        }\n\n        a.active span {\n          color: ${theme.palette.successLight};\n        }\n\n        span {\n          font-size: 0.75rem;\n          color: ${theme.palette.accents_4};\n          font-weight: 400;\n        }\n      `}</style>\n    </div>\n  )\n})\n\nexport default ActiveLink\n","import React, { ReactElement } from 'react'\nimport { useTheme, Spacer } from '@geist-ui/react'\nimport ActiveLink from './active-link'\nimport _JSXStyle from \"styled-jsx/style\"\n\nexport type Sides = {\n  name: string\n  url?: string\n  localeName?: string\n  children?: Sides | Array<Sides>\n}\n\nexport interface SideItemProps {\n  sides: Array<Sides>\n  closeSideBar: Function\n}\n\nconst SideItem: React.FC<React.PropsWithChildren<SideItemProps>> = React.memo(\n  ({sides, closeSideBar }) => {\n    const theme = useTheme()\n\n    return (\n      <>\n        {sides.map((side, index) => {\n          // const showChildren = side.children && children\n          return (\n            <div key={`${side.localeName || side.name}-${index}`} className=\"item\">\n              {side.url && <ActiveLink href={side.url} text={side.name} closeSideBar={closeSideBar}/>}\n\n              {/* {showChildren && (\n                <div className=\"children\">\n                  {React.cloneElement(children as ReactElement, {\n                    sides: side.children,\n                  })}\n                </div>\n              )} */}\n            </div>\n          )\n        })}\n        <style jsx>{`\n          .item {\n            width: 100%;\n          }\n\n          .children {\n            display: flex;\n            justify-content: center;\n            align-items: flex-start;\n            flex-direction: column;\n            transition: all 0.2s ease-in-out;\n            position: relative;\n            margin-top: 0.5rem;\n          }\n\n          .active-title {\n            font-weight: bold;\n          }\n\n          @media only screen and (max-width: ${theme.layout.breakpointMobile}) {\n            .link {\n              border-bottom: 1px solid ${theme.palette.border};\n              height: 3.5rem;\n            }\n          }\n        `}</style>\n      </>\n    )\n  },\n)\n\nexport default SideItem\n","/**\n * Wait transactions to be mined.\n *\n * Based on https://raw.githubusercontent.com/Kaisle/await-transaction-mined/master/index.js\n */\n\nimport Web3 from 'web3';\n\nconst DEFAULT_INTERVAL = 500;\n\nconst DEFAULT_BLOCKS_TO_WAIT = 0;\n\ninterface Options {\n  interval: number;\n  blocksToWait: number;\n}\n\n/**\n * Wait for one or multiple transactions to confirm.\n *\n * @param txnHash A transaction hash or list of those\n * @param options Wait timers\n * @return Transaction receipt\n */\nexport function waitTransaction(txnHash: string|string[], options?: Options): Promise<any> {\n    // @ts-ignore\n    const web3 = window.web3;\n    const interval = options && options.interval ? options.interval : DEFAULT_INTERVAL;\n    const blocksToWait = options && options.blocksToWait ? options.blocksToWait : DEFAULT_BLOCKS_TO_WAIT;\n    var transactionReceiptAsync = async function(txnHash, resolve, reject) {\n        try {\n            var receipt = web3.eth.getTransactionReceipt(txnHash);\n            if (!receipt) {\n                setTimeout(function () {\n                    transactionReceiptAsync(txnHash, resolve, reject);\n                }, interval);\n            } else {\n      \n                var resolvedReceipt = await receipt;\n                if (!resolvedReceipt || !resolvedReceipt.blockNumber) setTimeout(function () { transactionReceiptAsync(txnHash, resolve, reject);\n                }, interval);\n                else {\n                  try {\n                  var block = await web3.eth.getBlock(resolvedReceipt.blockNumber)\n                  var current = await web3.eth.getBlock('latest');\n                  if (current.number - block.number >= blocksToWait) {\n                    var txn = await web3.eth.getTransaction(txnHash)\n                    if (txn.blockNumber != null) resolve(resolvedReceipt);\n                    else reject(new Error('Transaction with hash: ' + txnHash + ' ended up in an uncle block.'));\n                  }\n                  else setTimeout(function () {\n                      transactionReceiptAsync(txnHash, resolve, reject);\n                  }, interval);\n                  }\n                  catch (e) {\n                    setTimeout(function () {\n                        transactionReceiptAsync(txnHash, resolve, reject);\n                    }, interval);\n                  }\n                }\n            }\n        } catch(e) {\n            reject(e);\n        }\n    };\n\n    // Resolve multiple transactions once\n    if (Array.isArray(txnHash)) {\n        var promises = [];\n        txnHash.forEach(function (oneTxHash) {\n            //@ts-ignore\n            promises.push(waitTransaction(oneTxHash, options));\n        });\n        return Promise.all(promises);\n    } else {\n        return new Promise(function (resolve, reject) {\n                transactionReceiptAsync(txnHash, resolve, reject);\n            });\n    }\n};\n\n\n/**\n * Check if the transaction was success based on the receipt.\n *\n * https://ethereum.stackexchange.com/a/45967/620\n *\n * @param receipt Transaction receipt\n */\nexport function isSuccessfulTransaction(receipt: any): boolean {\n  if(receipt.status == '0x1' || receipt.status == 1) {\n    return true;\n  } else {\n    return false;\n  }\n}","import React, { useState, useCallback } from 'react';\nimport { LoadingRing } from '@aragon/ui'\nimport { Button} from '@geist-ui/react'\nimport {waitTransaction} from '../../../utils/txStatus'\nimport {\n  TransactionProgress\n} from '@aragon/ui';\n\nfunction PendingTxButton() {\n    const [pendingTxVisible, setPendingTxVisible] = useState(false);\n    const [pendingTxStr, setPendingTxStr] = useState('');\n    const [opener, setOpener] = useState(null);\n    const handleOpenerRef = useCallback(node => {\n      setOpener(node)\n    }, [])\n    \n    async function tick(){\n        const _tx = localStorage.getItem('pendingtx')\n        if (_tx) {\n            setPendingTxStr(_tx);\n            var status = await waitTransaction(_tx);\n            console.log(status)\n            localStorage.removeItem('pendingtx');\n        } else {\n            setPendingTxStr('');\n            setPendingTxVisible(false);\n        }\n    };\n\n    setInterval(\n    () => tick(),\n    5000\n    );\n  return (\n    <div style={{display: 'flex', margin:'0 auto'}}>\n        {pendingTxStr ? \n            <Button size='mini' auto icon={<LoadingRing size={10}/>} type='warning' ref={handleOpenerRef} onClick={() => setPendingTxVisible(true)}>Pending Tx</Button>\n        : ''}\n\n            <TransactionProgress\n              transactionHashUrl={'https://etherscan.io/tx/' + pendingTxStr}\n              visible={pendingTxVisible}\n              onClose={() => setPendingTxVisible(false)}\n              opener={opener}\n            />\n    </div>\n  );\n}\n\n\nexport default PendingTxButton;\n","import React, { useRef, useState} from 'react'\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport { useTheme, Spacer, Toggle} from '@geist-ui/react'\nimport SideItem, { Sides } from './side-item'\nimport PendingTxButton from './PendingTx';\nimport _JSXStyle from \"styled-jsx/style\"\nimport { Moon } from '@geist-ui/react-icons'\nimport {EpochContext, ContextType} from \"../../../store/EpochStore\";\n\nexport interface Props {\n  hasWeb3: boolean,\n  user: string,\n  setUser: Function,\n  closeSideBar: Function,\n  switchTheme: Function\n}\n\nexport type SideChildren = Sides | Array<Sides>\n\nexport const SideGroup: React.FC<{ sides?: SideChildren, closeSideBar }> = React.memo(({ sides, closeSideBar }) => {\n  if (!sides) return null\n  sides = Array.isArray(sides) ? sides : [sides]\n  return (\n    <SideItem sides={sides} closeSideBar={closeSideBar}>\n      <SideGroup closeSideBar={closeSideBar}/>\n    </SideItem>\n  )\n})\n\nexport const Sidebar: React.FC<Props> = React.memo((props) => {\n  const theme = useTheme()\n  const boxRef = useRef<HTMLDivElement>(null)\n  const { updateEpochData, updateRegulations} = React.useContext(EpochContext) as ContextType;\n\n  const sides = [\n    {name: \"Core\", url: '/dao/', children: []},\n    {name: \"Supply\", url: '/supply/', children: []},\n    {name: \"Propose/Vote\", url: '/governance/', children: []},\n    {name: \"Debt\", url: '/coupons/', children: []},\n    {name: \"Tools\", url: '/tools/', children: []}  \n  ]\n\n  // const tabbarData = useMemo(() => {\n  //   const allSides = [Metadatas[locale]]\n  //   const currentSide = allSides.filter(side => side.name === tabbar)[0]\n  //   return (currentSide.children || []) as Array<Sides>\n  // }, [locale, tabbar])\n\n  // useEffect(() => {\n  //   Router.events.on('routeChangeStart', () => {\n  //     if (!boxRef.current) return\n  //     updateSidebarScrollHeight(boxRef.current.scrollTop || 0)\n  //   })\n  // }, [])\n\n  // useEffect(() => {\n  //   if (!boxRef.current) return\n  //   boxRef.current.scrollTo({ top: sidebarScrollHeight })\n  // }, [boxRef.current])\n\n  return (\n    <div ref={boxRef} className=\"sides box\">\n      <Spacer />\n      <SideItem sides={sides} closeSideBar={props.closeSideBar}>\n        {/* <SideGroup /> */}\n      </SideItem>\n      <Spacer />\n      <PendingTxButton />\n      <Spacer/>\n      {/* @ts-ignore */}\n      <Moon /><Toggle initialChecked={true} onChange={() => {\n          updateRegulations();\n          updateEpochData(); \n          props.switchTheme();\n        }}/>\n      <style jsx>{`\n        .sides {\n          width: 100%;\n          padding-bottom: ${theme.layout.gap};\n        }\n\n        .box {\n          overflow-y: auto;\n          overflow-x: hidden;\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n        }\n\n        .box::-webkit-scrollbar {\n          width: 0;\n          background-color: transparent;\n        }\n\n        .box > :global(.item) {\n          margin-bottom: ${theme.layout.gap};\n        }\n\n        @media only screen and (max-width: ${theme.layout.breakpointMobile}) {\n          .box {\n            padding: calc(3.5 * ${theme.layout.gap}) 15vw;\n            width: 100vw;\n            height: 100%;\n          }\n        }\n      `}</style>\n    </div>\n  )\n})\n\nexport default Sidebar\n","import React from 'react'\nimport { Button, useTheme, useMediaQuery } from '@geist-ui/react'\nimport SlidersIcon from '@geist-ui/react-icons/sliders'\nimport _JSXStyle from \"styled-jsx/style\"\n\ninterface Props {\n  connectButton: any\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => void\n}\n\nconst TabbarMobile: React.FC<Props> = ({ onClick, connectButton }) => {\n  const theme = useTheme()\n  const downSM = useMediaQuery('sm', { match: 'down' })\n  const handler = (event: React.MouseEvent<HTMLButtonElement>) => {\n    onClick && onClick(event)\n  }\n\n  return (\n    <div className=\"tabbar\">\n      <Button className=\"toggle\" auto type=\"abort\" onClick={handler}>\n        <SlidersIcon size={16} />\n      </Button>\n      {downSM ? connectButton : <></>}\n\n      <style jsx>{`\n        .tabbar {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          z-index: 950;\n          height: 3.7rem;\n          background-color: ${theme.palette.background};\n          display: flex;\n          align-items: center;\n          padding: 0 calc(${theme.layout.gap} * 2);\n          box-sizing: border-box;\n          justify-content: space-between;\n          border-bottom: 1px solid ${theme.palette.border};\n        }\n\n        .tabbar :global(.toggle) {\n          width: 40px;\n          height: 40px;\n          padding: 0;\n          display: inline-flex;\n          justify-content: center;\n          align-items: center;\n          color: ${theme.palette.accents_6};\n        }\n\n        span {\n          color: ${theme.palette.accents_7};\n          font-size: 0.75rem;\n          display: inline-flex;\n          text-transform: capitalize;\n        }\n\n        @media only screen and (min-width: ${theme.layout.breakpointMobile}) {\n          .tabbar {\n            display: none;\n            visibility: hidden;\n            top: -1000px;\n          }\n        }\n      `}</style>\n    </div>\n  )\n}\n\nexport default TabbarMobile\n","import React, { useEffect } from 'react';\nimport { Modal, Button, Header } from '@aragon/ui';\nimport { useWallet } from 'use-wallet';\nimport {useTheme} from '@geist-ui/react'\ntype ConnectModalProps = {\n  visible: boolean,\n  onClose: Function,\n  onConnect: Function\n};\n\nfunction ConnectModal({\n  visible, onClose, onConnect\n}:ConnectModalProps) {\n  const wallet = useWallet();\n  const theme = useTheme();\n\n  const connectMetamask = () => {\n    wallet.connect(\"injected\");\n  };\n\n  const connectWalletConnect = () => {\n    wallet.connect(\"walletconnect\");\n  };\n\n  const connectCoinbase = () => {\n    wallet.connect(\"walletlink\");\n  };\n\n  useEffect(() => {\n    if (wallet.account) {\n      onConnect && onConnect(wallet);\n      onClose && onClose();\n    }\n  }, [wallet, onConnect, onClose]);\n\n  return (\n    <Modal visible={visible} onClose={onClose} style={{zIndex: '500', backgroundColor: theme.palette.background}}>\n\n      <div style={{width: '50%', margin: 'auto', padding: '1%'}}>\n        <Button\n          wide\n          label={'Metamask'}\n          icon={<img src={`./wallets/metamask-fox.svg`} style={{ height: 24 }} alt=\"Metamask\"/>}\n          onClick={connectMetamask}\n        />\n      </div>\n      <div style={{width: '50%', margin: 'auto', padding: '1%'}}>\n        <Button\n          wide\n          label={'WalletConnect'}\n          icon={<img src={`./wallets/wallet-connect.svg`} style={{ height: 24 }} alt=\"WalletConnect\"/>}\n          onClick={connectWalletConnect}\n        />\n      </div>\n      <div style={{width: '50%', margin: 'auto', padding: '1%'}}>\n        <Button\n          wide\n          label={'Coinbase Wallet'}\n          icon={<img src={`./wallets/coinbase-wallet.png`} style={{ height: 24 }} alt=\"Coinbase Wallet\"/>}\n          onClick={connectCoinbase}\n        />\n      </div>\n    </Modal>\n  );\n}\n\nexport default ConnectModal;\n","import React, { useState } from 'react';\nimport { useWallet } from 'use-wallet';\nimport { LogOut } from '@geist-ui/react-icons'\nimport { Button, Spacer, useMediaQuery } from '@geist-ui/react'\n\nimport {\n  IdentityBadge, IconConnect, LinkBase,\n} from '@aragon/ui';\n\nimport { connect } from '../../../utils/web3';\n// import TotalBalance from \"./TotalBalance\";\nimport ConnectModal from './ConnectModal';\n\ntype connectButtonProps = {\n  hasWeb3: boolean,\n  user: string,\n  setUser: Function\n}\n\nfunction ConnectButton({ hasWeb3, user, setUser }: connectButtonProps) {\n  const { status, reset } = useWallet();\n\n  const [isModalOpen, setModalOpen] = useState(false);\n  const downSM = useMediaQuery('sm', { match: 'down' })\n\n  const connectWeb3 = async (wallet) => {\n    connect(wallet.ethereum);\n    setUser(wallet.account);\n  };\n\n  const disconnectWeb3 = async () => {\n    setUser('');\n    reset();\n  };\n\n  const toggleModal = () => setModalOpen(!isModalOpen);\n\n  return status === 'connected' ? (\n    <div style={{display: 'flex', flexDirection: 'column', minHeight: '5rem', justifyContent: 'space-evenly'}}>\n      {downSM ? <></> :<IdentityBadge entity={user} /> }\n      <LinkBase onClick={disconnectWeb3} style={{marginRight: '8px', height: '24px'}}>\n        <Button shadow icon={<LogOut />} auto size=\"small\">Log Out</Button>\n      </LinkBase>\n    </div>\n  ) : (\n    <>\n      <ConnectModal visible={isModalOpen} onClose={toggleModal} onConnect={connectWeb3}/>\n      <Button icon={<IconConnect />} onClick={toggleModal} disabled={!hasWeb3} auto size=\"small\"> Connect</Button>\n    </>\n  );\n}\n\n\nexport default ConnectButton;\n","import React, { useEffect, useState } from 'react'\nimport Sidebar from './sidebar'\nimport TabbarMobile from './sidebar/tabbar-mobile'\nimport { useTheme, useMediaQuery} from '@geist-ui/react'\nimport ConnectButton from './sidebar/ConnectButton';\nimport { useHistory } from 'react-router-dom';\nimport _JSXStyle from \"styled-jsx/style\"\n\nexport interface Props {\n  hasWeb3: boolean,\n  user: string,\n  setUser: Function,\n  switchTheme: Function,\n  getStaticProps?: any\n}\n\nexport const Layout: React.FC<React.PropsWithChildren<Props>> = React.memo((props, { children }) => {\n  const [expanded, setExpanded] = useState<boolean>(false)\n  const theme = useTheme()\n  const history = useHistory()\n  const mobileTabbarClickHandler = () => {\n    setExpanded(!expanded)\n  }\n  const logoUrl = `./logo/logo.jpeg` \n  const upSM = useMediaQuery('sm', { match: 'up' })\n  useEffect(() => {})\n\n  return (\n    <div className=\"layout\">\n      <TabbarMobile onClick={mobileTabbarClickHandler} connectButton={<ConnectButton hasWeb3={props.hasWeb3} user={props.user} setUser={props.setUser} />} />\n      <aside className=\"sidebar\">\n        <div style={{\n                margin: '10px'\n              }}>\n          <a onClick={() => history.push('/')} style={{\n            marginRight: '16px', \n            height: '40px',\n            // background: '#0a133e'\n            \n            }}>\n\n            <img src={logoUrl} style={{\n              borderRadius: '50%',\n            }} height=\"25px\" alt=\"Variable Timing Dollar\"/>\n          </a>\n          <small style={{\n            position: 'absolute',\n            top: '10px'\n          }}\n          \n        >VTD</small>\n        </div>\n        {upSM ? <ConnectButton hasWeb3={props.hasWeb3} user={props.user} setUser={props.setUser} /> : <></>}\n        <Sidebar hasWeb3={props.hasWeb3} user={props.user} setUser={props.setUser} closeSideBar={mobileTabbarClickHandler} switchTheme={props.switchTheme}/>\n      </aside>\n      <div className=\"side-shadow\" />\n      <main className=\"main\">\n       {props.children}\n      </main>\n      {/* @ts-ignore */}\n      <style jsx>{`\n        .layout {\n          min-height: calc(100vh - 108px);\n          max-width: 100vw;\n          margin: 0 auto;\n          padding: 0 ${theme.layout.gap};\n          display: flex;\n          box-sizing: border-box;\n          background: ${theme.palette.background};\n        }\n\n        .sidebar {\n          width: 120px;\n          margin-right: 20px;\n          -webkit-overflow-scrolling: touch;\n          -webkit-flex-shrink: 0;\n          height: calc(100% - 2rem - 10px + ${false ? '60px' : 0});\n          position: fixed;\n          top: 10px;\n          bottom: 2rem;\n          transform: translateY(${false ? '-60px' : 0});\n          transition: transform 200ms ease-out;\n          z-index: 100;\n        }\n\n        .side-shadow {\n          width: 140px;\n          flex-shrink: 0;\n          height: 100vh;\n        }\n\n        .main {\n          display: flex;\n          max-width: calc(100% - 140px);\n          flex-direction: column;\n          padding-left: 20px;\n          padding-top: 25px;\n          flex: 0 0 100%;\n          padding-bottom: 150px;\n        }\n\n        @media only screen and (max-width: ${theme.layout.breakpointMobile}) {\n          .layout {\n            max-width: 100%;\n            width: 100%;\n            padding: 5rem 1rem;\n          }\n\n          .sidebar {\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            z-index: 10;\n            width: 100vw;\n            height: ${expanded ? '100vh' : '0'};\n            background-color: ${theme.palette.background};\n            padding: 0;\n            overflow: hidden;\n            transition: height 250ms ease;\n          }\n\n          .main {\n            width: 90vw;\n            max-width: 90vw;\n            padding: 0;\n          }\n\n          .side-shadow {\n            display: none;\n            visibility: hidden;\n          }\n        }\n      `}</style>\n    </div>\n  )\n})\n\nexport default Layout\n","import React, {useEffect, useState, useContext} from 'react';\n\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport { Root, Viewport, Theme } from '@aragon/ui';\nimport { UseWalletProvider } from 'use-wallet';\nimport { updateModalMode } from './utils/web3';\nimport { storePreference, getPreference } from './utils/storage';\nimport NavBar from './components/NavBar';\nimport Wallet from \"./components/Wallet\";\nimport Stats from \"./components/Stats\";\n// import SellPressure from \"./components/Stats/sellpressure\";\nimport EpochDetail from \"./components/EpochDetail\";\nimport CouponMarket from \"./components/CouponMarket\";\nimport Governance from \"./components/Governance\";\nimport Candidate from \"./components/Candidate\";\nimport Regulation from \"./components/Regulation\";\nimport Pool from \"./components/Pool\";\nimport HomePageNoWeb3 from \"./components/HomePageNoWeb3\";\nimport {vtdTheme, vtdLight} from \"./theme/\";\nimport {MainStoreProvider} from \"./store/MainStore\";\nimport {EpochStoreProvider} from \"./store/EpochStore\";\nimport { ButtonGroup, Button, GeistProvider, Card, Divider, CssBaseline, Page } from '@geist-ui/react'\nimport Layout from \"./components/layout/layout\"\n\n\nfunction App() {\n  const [hasWeb3, setHasWeb3] = useState(false);\n  const [user, setUser] = useState(''); // the current connected user\n  const [themeType, setThemeType] = useState(vtdTheme)\n  const switchThemes = () => {\n    // @ts-ignore\n    setThemeType(lastThemeType => (lastThemeType.name === 'vtdDark' ? vtdLight : vtdTheme))\n  }\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      if (!isCancelled) {\n        // @ts-ignore\n        setHasWeb3(typeof window.ethereum !== 'undefined');\n      }\n    }\n\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <GeistProvider theme={themeType} >\n    <Router>\n      <UseWalletProvider\n        chainId={1}\n        connectors={{\n          walletconnect: { rpcUrl: 'https://mainnet.eth.aragon.network/' },\n          walletlink: {\n            url: 'https://mainnet.eth.aragon.network/',\n            appName:'Coinbase Wallet',\n            appLogoUrl: ''\n          }\n        }}\n      >\n        {/* @ts-ignore */}\n        <MainStoreProvider><EpochStoreProvider>\n            <CssBaseline />\n\n            <Root.Provider>\n              <Viewport.Provider>\n                <Layout hasWeb3={hasWeb3} user={user} setUser={setUser} switchTheme={switchThemes}>\n                  <Theme theme={themeType.name === 'vtdDark' ? 'dark' : 'light'}>\n                  {\n                    hasWeb3 ?\n                      <Switch>\n                        <Route path=\"/dao/:override\"><Wallet user={user}/></Route>\n                        <Route path=\"/dao/\"><Wallet user={user}/></Route>\n                        <Route path=\"/epoch/\"><EpochDetail user={user}/></Route>\n                        <Route path=\"/coupons/:override\"><CouponMarket user={user}/></Route>\n                        <Route path=\"/coupons/\"><CouponMarket user={user}/></Route>\n                        <Route path=\"/governance/candidate/:candidate\"><Candidate user={user}/></Route>\n                        <Route path=\"/governance/\"><Governance user={user}/></Route>\n                        {/* <Route path=\"/trade/\"><Trade user={user}/></Route> */}\n                        <Route path=\"/supply/\"><Regulation user={user}/></Route>\n                        {/* <Route path=\"/pool/:override\"><Pool user={user}/></Route>\n                        <Route path=\"/pool/\"><Pool user={user}/></Route> */}\n                        <Route path=\"/tools/\"><Stats user={user}/></Route>\n                        {/* <Route path=\"/bondstats/\"><SellPressure/></Route> */}\n\n                        <Route path=\"/\"><Wallet user={user}/></Route>\n                      </Switch>\n                      :\n                      <Switch>\n                        <Route path=\"/\"><HomePageNoWeb3/></Route>\n                      </Switch>\n                  }\n                  </Theme>\n                </Layout>\n              </Viewport.Provider>\n            </Root.Provider>\n        </EpochStoreProvider></MainStoreProvider>\n      </UseWalletProvider>\n    </Router>\n    </GeistProvider>\n  );\n}\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'react-widgets/dist/css/react-widgets.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport Moment from 'moment'\nimport momentLocalizer from 'react-widgets-moment';\n\nMoment.locale('en')\nmomentLocalizer()\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}