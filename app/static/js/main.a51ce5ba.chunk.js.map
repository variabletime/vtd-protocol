{"version":3,"sources":["utils/infura.js","constants/tokens.js","constants/values.js","utils/number.ts","components/common/AddressBlock.tsx","components/common/BalanceBlock.tsx","components/common/StatsRowItem.tsx","components/common/SectionTitle.tsx","components/common/MaxButton.tsx","components/common/PriceSection.tsx","components/common/Comment.tsx","components/common/Wrapper.tsx","components/common/CheckBox.tsx","components/Wallet/Header.tsx","utils/txNotifier.ts","utils/web3.js","components/common/BigNumberInput.tsx","components/Pool/WithdrawDeposit.tsx","components/common/TextBlock.tsx","components/Pool/BondUnbond.tsx","components/Pool/Header.tsx","components/Pool/Claim.tsx","components/Pool/Provide.tsx","store/MainStore.tsx","components/Pool/index.tsx","components/Pool/EmptyPool.tsx","components/Wallet/WithdrawDeposit.tsx","components/Wallet/BondUnbond.tsx","store/EpochStore.tsx","components/Wallet/MomentumHeader.tsx","components/EpochDetail/index.tsx","components/layout/overlay.tsx","components/Wallet/index.tsx","components/Stats/index.tsx","components/CouponMarket/Header.tsx","components/CouponMarket/PurchaseCoupons.tsx","components/CouponMarket/PurchaseHistory.tsx","utils/storage.ts","components/CouponMarket/ModalWarning.tsx","components/CouponMarket/index.tsx","components/Governance/Header.tsx","utils/gov.ts","components/Governance/ProposeCandidate.tsx","components/Governance/CandidateHistory.tsx","components/Governance/index.tsx","components/Candidate/Vote.tsx","components/Candidate/VoteHeader.tsx","components/common/NumberBlock.tsx","components/Candidate/CommitHeader.tsx","components/Candidate/Commit.tsx","components/common/IconHeader.tsx","components/Candidate/index.tsx","components/Regulation/Header.tsx","components/Regulation/RegulationHistory.tsx","components/Regulation/index.tsx","components/HomePageNoWeb3/index.tsx","theme/index.js","components/layout/sidebar/active-link.tsx","components/layout/sidebar/side-item.tsx","utils/txStatus.ts","components/layout/sidebar/PendingTx.tsx","components/layout/sidebar/index.tsx","components/layout/sidebar/tabbar-mobile.tsx","components/layout/sidebar/ConnectModal.tsx","components/layout/sidebar/ConnectButton.tsx","components/layout/layout.tsx","App.tsx","serviceWorker.js","index.tsx"],"names":["web3","VTD","VTDD","MAX_UINT256","BigNumber","pow","minus","GOVERNANCE_QUORUM","SUPERMAJORITY","GOVERNANCE_PROPOSAL_THRESHOLD","dollarAbi","require","daoAbi","oldRegulationsAbi","oracleAbi","poolAbi","uniswapPairAbi","undefined","window","ethereum","Web3","getTokenBalance","token","account","a","tokenContract","eth","Contract","methods","balanceOf","call","getTokenTotalSupply","totalSupply","getTokenAllowance","spender","allowance","getBalanceBonded","dao","daoContract","balanceOfBonded","getBalanceOfStaged","balanceOfStaged","getStatusOf","statusOf","getFluidUntil","fluidUntil","getLockedUntil","lockedUntil","getEpoch","epoch","getEpochTime","epochTime","getNextEpochTimestamp","nextEpochTimestamp","getCurrentEpochLength","currentEpochLength","getTotalDebt","totalDebt","getTotalRedeemable","totalRedeemable","getTotalCoupons","totalCoupons","getTotalBonded","totalBonded","getTotalStaged","totalStaged","getTotalBondedAt","totalBondedAt","getApproveFor","candidate","approveFor","getRejectFor","rejectFor","getStartFor","startFor","getPeriodFor","periodFor","getIsInitialized","isInitialized","getRecordedVote","recordedVote","getBalanceOfCoupons","balanceOfCoupons","getBatchBalanceOfCoupons","epochs","calls","map","Promise","all","getCouponsExpiration","couponsExpiration","getBatchCouponsExpiration","getCouponPremium","amount","couponPremium","toFixed","getImplementation","implementation","getCouponEpochs","purchaseP","getPastEvents","filter","fromBlock","transferP","to","bought","given","events","e","returnValues","couponAmount","concat","couponEpochs","reduce","event","prev","get","set","coupons","plus","Map","values","sort","b","getAllProposals","payload","prop","blockNumber","getAllRegulations","oldDaoContract","increaseP","decreaseP","neutralP","increase","decrease","neutral","oincreaseP","odecreaseP","oneutralP","oincrease","odecrease","oneutral","type","data","sorted","getOracleTwap","oracle","oracleContract","getLastPrice","res","getReserves","pairAddress","exchange","getInstantaneousPrice","counterTokenAddr","getToken0","reserve","token0","token0Balance","_reserve0","token1Balance","_reserve1","toLowerCase","dividedBy","getPoolStatusOf","pool","poolContract","getPoolBalanceOfBonded","getPoolBalanceOfStaged","getPoolBalanceOfRewarded","balanceOfRewarded","getPoolBalanceOfClaimable","balanceOfClaimable","getPoolTotalBonded","getPoolTotalRewarded","totalRewarded","getPoolTotalClaimable","totalClaimable","getPoolFluidUntil","getBlockNumber","bondP","unbondP","bond","unbond","startEpoch","start","parseInt","toString","toBaseUnitBN","rawAmt","decimals","raw","base","decimalsBN","times","integerValue","toTokenUnitsBN","tokenAmount","tokenDecimals","amt","digits","div","isPos","isZero","isPositive","ownership","balance","multipliedBy","formatBN","position","isLessThan","bnStr","includes","parts","split","i","length","pad","precision","ROUND_FLOOR","replace","delineate","formatMoney","n","toPrecision","Math","abs","Number","AddressBlock","label","address","style","fontSize","padding","IdentityBadge","entity","shorten","BalanceBlock","asset","suffix","integer","balanceBN","gte","tokens","StatsRowItem","value","display","lineHeight","flex","backgroundPosition","backgroundSize","backgroundImage","backgroundRepeat","SectionTitle","MaxButton","onClick","ButtonBase","opacity","PriceSection","symbol","forceDisplay","amtBN","gt","toNumber","Comment","styled","MyCheckBox","text","checked","onCheck","theme","useTheme","CheckBoxWrapper","Checkbox","onChange","margin","props","surfaceContentSecondary","fm","bn","STATUS_MAP","status","accountStatus","unlocked","AccountPageHeader","accountVTDBalance","accountVTDSBalance","totalVTDSSupply","accountStagedBalance","accountBondedBalance","flexWrap","alignItems","justifyContent","notify","v","console","log","localStorage","setItem","testnetUSDCAbi","UINT256_MAX","connect","getAccounts","addresses","enable","checkConnectedAndGetAddress","approve","tokenAddr","oToken","send","from","on","hash","advance","tryAdvance","deposit","withdraw","unbondUnderlying","purchaseCoupons","redeemCoupons","recordVote","voteType","vote","commit","depositPool","callback","withdrawPool","bondPool","unbondPool","claimPool","claim","providePool","provide","BigNumberInput","setter","adornment","disabled","TextInput","adornmentPosition","wide","isNegative","target","onBlur","WithdrawDeposit","poolAddress","user","stagedBalance","peg","useState","depositAmount","setDepositAmount","withdrawAmount","setWithdrawAmount","Box","heading","paddingTop","comparedTo","width","minWidth","Button","icon","IconCirclePlus","IconLock","pair","flexBasis","IconCircleMinus","addr","TextBlock","BondUnbond","staged","bonded","lockup","bondAmount","setBondAmount","unbondAmount","setUnbondAmount","IconCaution","textAlign","PoolPageHeader","accountUNIBalance","accountRewardedVTDBalance","accountClaimableVTDBalance","poolTotalBonded","accountPoolStatus","xs","sm","Claim","claimable","claimAmount","setClaimAmount","IconArrowDown","Provide","rewarded","pairBalanceVTD","pairBalancePeg","userPEGBalance","userPEGAllowance","provideAmount","setProvideAmount","usdcAmount","setUsdcAmount","PEGToVTDRatio","onChangeAmountVTD","amountVTD","amountVTDBN","amountVTDBU","newAmountPEG","IconArrowUp","isGreaterThan","initialPeggedTokens","name","usdcPair","enabled","stats","vtdBalance","pegBalance","poolReward","poolClaimable","price","lastTwap","usdcPrice","initialTotals","totalLPSupply","totalLPBonded","circulating","totalCoupon","MainContext","React","createContext","MainStoreProvider","children","peggedTokens","setPeggedTokenPools","totals","setTotals","updateTotals","totalSupplyStr","totalBondedStr","totalStagedStr","totalRedeemableStr","totalDebtStr","totalCouponsStr","poolTotal","totalLiquidityPoolSupply","forEach","newTotals","Provider","updatePools","oracleTwap","multiplier","rawUsdcPrice","_peg","Pool","override","useParams","setPoolAddress","userUNIBalance","setUserUNIBalance","userUNIAllowance","setUserUNIAllowance","setUserPEGBalance","setUserPEGAllowance","userStagedBalance","setUserStagedBalance","userBondedBalance","setUserBondedBalance","userRewardedBalance","setUserRewardedBalance","userClaimableBalance","setUserClaimableBalance","userStatus","setUserStatus","userStatusUnlocked","setUserStatusUnlocked","tokensPanelOpened","setTokensPanelOpened","rewardPanelOpened","setRewardPanelOpened","downMD","useContext","useMediaQuery","match","useEffect","isCancelled","updateUserInfo","poolAddressStr","usdcBalance","usdcAllowance","bondedBalance","rewardedBalance","claimableBalance","fluidUntilStr","id","setInterval","clearInterval","background","palette","accents_1","Container","gap","justify","md","y","size","ghost","open","SidePanel","title","opened","onClose","EmptyPool","flexDirection","EpochContext","initialEpochData","previousEpochTimestamp","EpochStoreProvider","regulations","setRegulations","epochData","setEpochData","updateRegulations","allRegulations","_regs","result","index","epochtype","momentumPrice","deltaRedeemable","newRedeemable","deltaDebt","lessDebt","newDebt","deltaBonded","newBonded","updateEpochData","nextEpochTimestampStr","currentEpochLengthStr","MomentumHeader","upSM","priceWeight","Date","now","estimatedTwap","regs","reverse","slice","prices","reg","labels","x","nextChange","price_data","datasets","backgroundColor","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","borderWidth","hoverBackgroundColor","hoverBorderColor","options","responsive","layout","left","right","top","bottom","scales","yAxes","ticks","xAxes","shadow","accents_3","color","accents_6","height","legend","EpochDetail","setEpoch","setEpochTime","setNextEpochTimestamp","setCurrentEpochLength","advanceMode","setAdvanceMode","endDate","calcAdvanceMode","currentEpochLengthFmt","d","h","floor","m","s","secondsToHms","epochStr","epochTimeStr","marginTop","Content","Subtitle","accents_4","Timer","showEmpty","format","end","Footer","Status","Text","Actions","auto","Overlay","customVisible","visible","setVisible","className","preventDefault","zIndex","Wallet","sidePanelOpened","setSidePanelOpened","userVTDBalance","setUserVTDBalance","userVTDAllowance","setUserVTDAllowance","userVTDSBalance","setUserVTDSBalance","setTotalVTDSSupply","vtdAllowance","vtdsBalance","vtdsSupply","lockedUntilStr","max","accents_2","ONE_COUPON","Stats","setCouponPremium","marketcap","totalYield","delta","daoYield","compound","rate","days","real_rate","LPYield","share","supply","vtdPrice","lp_size","calcLinearYield","couponPremiumStr","peggedToken","hasOwnProperty","marginLeft","CouponMarketHeader","debt","premium","redeemable","PurchaseCoupons","purchaseAmount","setPurchaseAmount","setPremium","updatePremium","lte","purchaseAmountBase","premiumFormatted","maxPurchaseAmount","PurchaseHistory","hideRedeemed","setEpochs","page","setPage","initialized","setInitialized","epochsFromEvents","epochNumbers","couponsExpirations","expiration","DataView","fields","entries","entriesPerPage","onPageChange","renderEntry","getPreference","key","defaultValue","getItem","storePreference","ModalWarning","storedShowWarning","showWarning","setShowWarning","Modal","closeButton","warning","warningSurfaceContent","CouponMarket","storedHideRedeemed","setBalance","setAllowance","setSupply","setCoupons","setRedeemable","setDebt","setHideRedeemed","balanceStr","allowanceStr","userBalance","supplyStr","debtStr","couponsStr","redeemableStr","alignSelf","CheckBox","GovernanceHeader","stake","totalStake","proposalStatus","period","reject","total","canPropose","plausibleCandidate","test","ProposeCandidate","setCandidate","IconToken","formatProposals","proposals","currentTotalStake","p","initializeds","approves","rejecteds","at","supplyAts","CandidateHistory","history","useHistory","setProposals","allProposals","formattedProposals","proposal","IconRight","push","Governance","setStake","setTotalStake","setImplementation","statusStr","stakeStr","totalStakeStr","implementationStr","VOTE_TYPE_MAP","Vote","IconRotateLeft","IconCircleCheck","IconProhibited","participation","dividedToIntegerBy","VoteHeader","showParticipation","NumberBlock","num","numNum","CommitHeader","periodEpoch","Commit","approved","IconUpload","IconHeader","marginRight","primary","Candidate","setApproveFor","setRejectFor","setVote","setStatus","userStake","setUserStake","setStartEpoch","setPeriodEpoch","voteStr","userStakeStr","approveForStr","rejectForStr","startForStr","periodForStr","epochN","startN","periodN","endsAfter","RegulationHeader","daoTotalSupply","Distribution","items","item","percentage","formatPrice","formatMomentumPrice","formatDeltaRedeemable","formatDeltaDebt","formatDeltaBonded","RegulationHistory","Regulation","setTotalSupply","setTotalBonded","setTotalStaged","setTotalRedeemable","setTotalDebt","setTotalCoupons","Split","secondary","MainButton","description","tag","Tag","HomePageNoWeb3","location","vtdTheme","vtdLight","ActiveLink","memo","href","closeSideBar","useMemo","subtitle","listen","pathname","accents_5","accents_7","success","successLight","SideItem","sides","side","localeName","breakpointMobile","border","url","waitTransaction","txnHash","interval","blocksToWait","transactionReceiptAsync","resolve","receipt","getTransactionReceipt","setTimeout","resolvedReceipt","getBlock","block","number","getTransaction","Error","Array","isArray","promises","oneTxHash","PendingTxButton","pendingTxVisible","setPendingTxVisible","pendingTxStr","setPendingTxStr","opener","setOpener","handleOpenerRef","useCallback","node","_tx","removeItem","tick","ref","fontFamily","borderRadius","LoadingRing","TransactionProgress","transactionHashUrl","SideGroup","Sidebar","boxRef","useRef","PendingTx","initialChecked","switchTheme","TabbarMobile","connectButton","downSM","ConnectModal","onConnect","wallet","useWallet","src","alt","ConnectButton","hasWeb3","setUser","reset","isModalOpen","setModalOpen","connectWeb3","disconnectWeb3","toggleModal","minHeight","IconConnect","Layout","expanded","setExpanded","mobileTabbarClickHandler","App","setHasWeb3","themeType","setThemeType","chainId","connectors","walletconnect","rpcUrl","walletlink","appName","appLogoUrl","lastThemeType","Theme","path","Boolean","hostname","Moment","locale","momentLocalizer","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.a51ce5ba.chunk.js","sourcesContent":["import Web3 from 'web3';\n\nimport BigNumber from 'bignumber.js';\nimport { UniswapV2Router02 } from '../constants/contracts';\nimport { VTD} from '../constants/tokens';\nimport { POOL_EXIT_LOCKUP_EPOCHS } from '../constants/values';\n\nconst dollarAbi = require('../constants/abi/Dollar.json');\nconst daoAbi = require('../constants/abi/Implementation.json');\nconst oldRegulationsAbi = require('../constants/abi/OldRegulationsDao.json');\nconst oracleAbi = require('../constants/abi/Oracle.json');\nconst poolAbi = require('../constants/abi/Pool.json');\nconst uniswapRouterAbi = require('../constants/abi/UniswapV2Router02.json');\nconst uniswapPairAbi = require('../constants/abi/UniswapV2Pair.json');\n\nlet web3;\n// eslint-disable-next-line no-undef\nif (window.ethereum !== undefined) {\n  // eslint-disable-next-line no-undef\n  web3 = new Web3(ethereum);\n}\n\n/**\n *\n * @param {string} token address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getTokenBalance = async (token, account) => {\n  if (account === '') return '0';\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\n  return tokenContract.methods.balanceOf(account).call();\n};\n\nexport const getTokenTotalSupply = async (token) => {\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\n  return tokenContract.methods.totalSupply().call();\n};\n\n/**\n *\n * @param {string} token\n * @param {string} account\n * @param {string} spender\n * @return {Promise<string>}\n */\nexport const getTokenAllowance = async (token, account, spender) => {\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\n  return tokenContract.methods.allowance(account, spender).call();\n};\n\n// Døllar Protocol\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getBalanceBonded = async (dao, account) => {\n  if (account === '') return '0';\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.balanceOfBonded(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getBalanceOfStaged = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.balanceOfStaged(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getStatusOf = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.statusOf(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getFluidUntil = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.fluidUntil(account).call();\n  return ''\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getLockedUntil = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.lockedUntil(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getEpoch = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.epoch().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getEpochTime = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.epochTime().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getNextEpochTimestamp = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.nextEpochTimestamp().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getCurrentEpochLength = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.currentEpochLength().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalDebt = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalDebt().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalRedeemable = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalRedeemable().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalCoupons = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalCoupons().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalBonded = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalBonded().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalStaged = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalStaged().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number} epoch number\n * @return {Promise<string>}\n */\nexport const getTotalBondedAt = async (dao, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalBondedAt(epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getApproveFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.approveFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getRejectFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.rejectFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getStartFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.startFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getPeriodFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.periodFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<boolean>}\n */\nexport const getIsInitialized = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.isInitialized(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getRecordedVote = async (dao, account, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.recordedVote(account, candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @param {number} epoch number\n * @return {Promise<string>}\n */\nexport const getBalanceOfCoupons = async (dao, account, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.balanceOfCoupons(account, epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @param {number[]} epochs number[]\n * @return {Promise<string[]>}\n */\nexport const getBatchBalanceOfCoupons = async (dao, account, epochs) => {\n  const calls = epochs.map((epoch) => getBalanceOfCoupons(dao, account, epoch));\n  return Promise.all(calls);\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number} epoch address\n * @return {Promise<string>}\n */\nexport const getOutstandingCoupons = async (dao, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.outstandingCoupons(epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number} epoch number\n * @return {Promise<string>}\n */\nexport const getCouponsExpiration = async (dao, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.couponsExpiration(epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number[]} epochs number[]\n * @return {Promise<string[]>}\n */\nexport const getBatchCouponsExpiration = async (dao, epochs) => {\n  const calls = epochs.map((epoch) => getCouponsExpiration(dao, epoch));\n  return Promise.all(calls);\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string|BigNumber} amount uint256\n * @return {Promise<string>}\n */\nexport const getCouponPremium = async (dao, amount) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.couponPremium(new BigNumber(amount).toFixed()).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getImplementation = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.implementation().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getPool = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.pool().call();\n};\n\n/**\n *\n * @param {string} dao\n * @param {string} account\n * @return {Promise<any[]>}\n */\nexport const getCouponEpochs = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  const purchaseP = daoContract.getPastEvents('CouponPurchase', {\n    filter: { account },\n    fromBlock: 0,\n  });\n  const transferP = daoContract.getPastEvents('CouponTransfer', {\n    filter: { to: account },\n    fromBlock: 0,\n  });\n  const [bought, given] = await Promise.all([purchaseP, transferP]);\n  const events = bought.map((e) => ({epoch: e.returnValues.epoch, amount: e.returnValues.couponAmount}))\n    .concat(given.map((e) => ({epoch: e.returnValues.epoch, amount: 0})));\n\n  const couponEpochs = [\n    ...events.reduce(\n      (map, event) => {\n        const { epoch, amount } = event;\n        const prev = map.get(epoch);\n\n        if (prev) {\n          map.set(epoch, { epoch, coupons: prev.coupons.plus(new BigNumber(amount)) });\n        } else {\n          map.set(epoch, { epoch, coupons: new BigNumber(amount) });\n        }\n\n        return map;\n      },\n      new Map(),\n    ).values(),\n  ];\n\n  return couponEpochs.sort((a, b) => a - b);\n};\n\n/**\n *\n * @param {string} dao\n * @return {Promise<any[]>}\n */\nexport const getAllProposals = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  const payload = (await daoContract.getPastEvents('Proposal', {\n    fromBlock: 0,\n  })).map((event) => {\n    const prop = event.returnValues;\n    prop.blockNumber = event.blockNumber;\n    return prop;\n  });\n  return payload.sort((a, b) => b.blockNumber - a.blockNumber);\n};\n\n/**\n *\n * @param {string} dao\n * @return {Promise<any[]>}\n */\nexport const getAllRegulations = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  const oldDaoContract = new web3.eth.Contract(oldRegulationsAbi, dao);\n  \n  const increaseP = daoContract.getPastEvents('SupplyIncrease', { fromBlock: 0 });\n  const decreaseP = daoContract.getPastEvents('SupplyDecrease', { fromBlock: 0 });\n  const neutralP = daoContract.getPastEvents('SupplyNeutral', { fromBlock: 0 });\n\n  let [increase, decrease, neutral] = await Promise.all([increaseP, decreaseP, neutralP]);\n\n  const oincreaseP = oldDaoContract.getPastEvents('SupplyIncrease', { fromBlock: 0 });\n  const odecreaseP = oldDaoContract.getPastEvents('SupplyDecrease', { fromBlock: 0 });\n  const oneutralP = oldDaoContract.getPastEvents('SupplyNeutral', { fromBlock: 0 });\n\n  const [oincrease, odecrease, oneutral] = await Promise.all([oincreaseP, odecreaseP, oneutralP]);\n\n  increase= increase.concat(oincrease)\n  decrease= decrease.concat(odecrease)\n  neutral = neutral.concat(oneutral)\n\n\n  const events = increase.map((e) => ({ type: 'INCREASE', data: e.returnValues }))\n    .concat(decrease.map((e) => ({ type: 'DECREASE', data: e.returnValues })))\n    .concat(neutral.map((e) => ({ type: 'NEUTRAL', data: e.returnValues })));\n\n  const sorted = events.sort((a, b) => b.data.epoch - a.data.epoch);\n  return sorted;\n};\n\n/**\n *\n * @param {string} dao\n * @return {Promise<any>}\n */\nexport const getPoolDistributions = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.updateLiquidityForAllPools().call();;\n};\n\n/**\n *\n * @param {string} oracle\n * @return {Promise<any>}\n */\nexport const getOracleTwap = async (oracle) => {\n  const oracleContract = new web3.eth.Contract(oracleAbi, oracle);\n  const res = await oracleContract.methods.getLastPrice().call();\n  return res[0][0]\n};\n\n// Uniswap Protocol\n\nexport const getCost = async (amount, counterTokenAddr) => {\n  const exchange = new web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  // eslint-disable-next-line no-unused-vars\n  const [inputAmount, _] = await exchange.methods.getAmountsIn(\n    new BigNumber(amount).toFixed(),\n    [counterTokenAddr, VTD.addr],\n  ).call();\n  return inputAmount;\n};\n\nexport const getProceeds = async (amount, counterTokenAddr) => {\n  const exchange = new web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  // eslint-disable-next-line no-unused-vars\n  const [_, outputAmount] = await exchange.methods.getAmountsOut(\n    new BigNumber(amount).toFixed(),\n    [VTD.addr, counterTokenAddr],\n  ).call();\n  return outputAmount;\n};\n\nexport const getReserves = async (pairAddress) => {\n  const exchange = new web3.eth.Contract(uniswapPairAbi, pairAddress);\n  return exchange.methods.getReserves().call();\n};\n\n// export const getTWAP = async (pairAddress, daoAddress) => {\n//   const daoContract = new web3.eth.Contract(daoAbi, dao);\n//   const exchange = new web3.eth.Contract(uniswapPairAbi, pairAddress);\n//   const previousBlockTimestamp = await daoContract.methods.previousBlockTimestamp().call();\n//   console.log('previousblock', previousBlockTimestamp)\n//   let [_, price0] = await exchange.methods.price0CumulativeLast().call();\n//   let [_, price1] = await exchange.methods.price1CumulativeLast().call();\n//   const data = await exchange.methods.getReserves().call();\n//   const reserve0 = data._reserve0;\n//   const reserve1 = data._reserve1;\n//   const blockTimestampLast = data._blockTimestampLast;\n//   const blockTimestamp = new BigNumber(Date.now()/1000);\n\n//   if (blockTimestampLast != blockTimestamp) {\n//     const timeElapsed = blockTimestamp.sub(blockTimestampLast);\n\n//     price0 += reserve1.div(reserve0).mul(timeElapsed);\n//     price1 += reserve0.div(reserve1).mul(timeElapsed);\n//   }\n\n//   const timeSinceLastEpoch = blockTimestamp.sub(previousBlockTimestamp);\n//   lastPrice*2**112*lastEpochLength\n//   return [price0, price1];\n// };\n\nexport const getInstantaneousPrice = async (counterTokenAddr, pairAddress) => {\n  const [reserve, token0] = await Promise.all([getReserves(pairAddress), getToken0(pairAddress)]);\n  const token0Balance = new BigNumber(reserve._reserve0);\n  const token1Balance = new BigNumber(reserve._reserve1);\n  if (token0.toLowerCase() === counterTokenAddr.toLowerCase()) {\n    // TODO set to DSD amounts\n    return token0Balance.dividedBy(token1Balance);\n    // return token0Balance.multipliedBy(new BigNumber(10).pow(12)).dividedBy(token1Balance);\n\n  }\n  return token1Balance.dividedBy(token0Balance);\n  // return token1Balance.multipliedBy(new BigNumber(10).pow(12)).dividedBy(token0Balance);\n\n};\n\nexport const getToken0 = async (pairAddress) => {\n  const exchange = new web3.eth.Contract(uniswapPairAbi, pairAddress);\n  return exchange.methods.token0().call();\n};\n\n// Pool\n\nexport const getPoolStatusOf = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.statusOf(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfBonded = async (pool, account) => {\n  if (account === '') return '0';\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfBonded(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfStaged = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfStaged(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfRewarded = async (pool, account) => {\n  if (account === '') return '0';\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfRewarded(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfClaimable = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfClaimable(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolTotalBonded = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.totalBonded().call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolTotalRewarded = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.totalRewarded().call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolTotalClaimable = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.totalClaimable().call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolFluidUntil = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n\n  // no need to look back further than the pool lockup period\n  const blockNumber = await web3.eth.getBlockNumber();\n  const fromBlock = blockNumber - (POOL_EXIT_LOCKUP_EPOCHS + 1) * 8640;\n  const bondP = poolContract.getPastEvents('Bond', {\n    filter: {account: account}, fromBlock: fromBlock });\n  const unbondP = poolContract.getPastEvents('Unbond', {\n    filter: {account: account}, fromBlock: fromBlock });\n\n  const [bond, unbond] = await Promise.all([bondP, unbondP]);\n  const events = bond.map((e) => e.returnValues)\n    .concat(unbond.map((e) => e.returnValues));\n\n  const startEpoch = events.reduce(\n    (epoch, event) => {\n      if (epoch > event.start)\n        return epoch\n      else\n        return event.start\n    }, 0);\n\n  // these contract events report the start epoch as one more than the active\n  // epoch when the event is emitted, so we subtract 1 here to adjust\n  return (parseInt(startEpoch, 10) + POOL_EXIT_LOCKUP_EPOCHS - 1).toString();\n};\n\n/**\n *\n * @param {string} pool address\n * @return {Promise<any[]>}\n */\nexport const getAllPoolBondings = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n\n  const payload = (await poolContract.getPastEvents('Unbond', {\n    fromBlock: 0,\n  })).map((event) => {\n    const prop = event.returnValues;\n    prop.blockNumber = event.blockNumber;\n    return prop;\n  });\n  return payload.sort((a, b) => b.blockNumber < a.blockNumber);\n};\n\nexport const getAllDaoBondings = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n\n  const payload = (await daoContract.getPastEvents('Unbond', {\n    fromBlock: 0,\n  })).map((event) => {\n    const prop = event.returnValues;\n    prop.blockNumber = event.blockNumber;\n    return prop;\n  });\n  return payload.sort((a, b) => b.blockNumber < a.blockNumber);\n};\n\n","export const VTD = {\n  addr: '0xf0E3543744AFcEd8042131582f2A19b6AEb82794',\n  decimals: 18,\n  symbol: 'VTD',\n};\n\nexport const VTDD = {\n  addr: '0x530608409991C36Ba922B69623BEc57e22B8d331',\n  decimals: 18,\n  symbol: 'VTDD',\n};\n\nexport const PeggedTokens = [\n  {\n    name: 'dsd',\n    pair: {\n      addr: '0x2008dDa1Ad792b156599cE55D12Eb82808C80f01',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0xBD2F0Cd039E0BFcf88901C98c0bFAc5ab27566e3',\n    decimals: 18,\n    symbol: 'DSD',\n    pool: '0x623EA23a36bF98a065701B08Be1Ad17246d0E337',\n    oracle: '0x5e3485B75cdD6Ba8C71Df43b7e8e62dB37357a13',\n    usdcPair: '0x66e33d2605c5fb25ebb7cd7528e7997b0afa55e8',\n    enabled: true\n  },\n\n  {\n    name: 'weth',\n    pair: {\n      addr: '0xbAFA2D6db3256c7B2478F130D511759046cE7a9A',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',\n    decimals: 18,\n    symbol: 'ETH',\n    pool: '0x26C6ee0F68f9D6cE8dd9d9A8dD972B04D7b94289',\n    oracle: '0x22d1EFAE32841FA741B1DD30eA6E8cF514D57DE9',\n    usdcPair: '0xb4e16d0168e52d35cacd2c6185b44281ec28c9dc',\n    enabled: true\n  },\n\n  {\n    name: 'usdt',\n    pair: {\n      addr: '0xe6f3FA003EA33962A4b71095165375bb9Eb42A4c',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0xdAC17F958D2ee523a2206206994597C13D831ec7',\n    decimals: 6, //IMPORTANT\n    symbol: 'USDT',\n    pool: '0x649f1A91a9693C94747e95C9CE3d9A952Ef652A9',\n    oracle: '0xB518894Be07239C2e78323244617765aDf593E86',\n    usdcPair: '0x3041cbd36888becc7bbcbc0045e3b1f144466f5f',\n    enabled: false\n  },\n\n\n  {\n    name: 'usdc',\n    pair: {\n      addr: '0xBB20875B900BFcf7BcC80A9C11C59a1264a4Bb8c',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',\n    decimals: 6, //IMPORTANT\n    symbol: 'USDC',\n    pool: '0xD3DD32395271bAC888dAAF58Aa7FAF635D6d459F',\n    oracle: '0x3121a778536FaBCe3AC903FE2df242097b79eefD',\n    usdcPair: null,\n    enabled: false\n  },\n\n  {\n    name: 'wbtc',\n    pair: {\n      addr: '0x9C57623199024B20b2157Ef6667C412688006A82',\n      decimals: 18,\n      symbol: 'UNI',\n    },\n    addr: '0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599',\n    decimals: 18,\n    symbol: 'WBTC',\n    pool: '0x8951303cB54F013b41Bcf762F6210bdc9292c1Ac',\n    oracle: '0xa86b4cf024a49CB47eEa037874bF0B1ae7702F21',\n    usdcPair: '0x004375dff511095cc5a197a54140a24efef3a416',\n    enabled: false\n  }\n]","import BigNumber from 'bignumber.js';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const MAX_UINT256 = new BigNumber(2).pow(256).minus(1);\nexport const GOVERNANCE_QUORUM = new BigNumber('0.20');\nexport const SUPERMAJORITY = new BigNumber('0.50');\nexport const GOVERNANCE_PERIOD = 8\nexport const GOVERNANCE_PROPOSAL_THRESHOLD = new BigNumber('0.005');\nexport const COUPON_EXPIRATION = 180\nexport const DAO_EXIT_LOCKUP_EPOCHS = 18\nexport const POOL_EXIT_LOCKUP_EPOCHS = 9\n","import BigNumber from 'bignumber.js';\n\n/**\n * Convert 10.999 to 10999000\n */\nexport function toBaseUnitBN(rawAmt:string| number| BigNumber, decimals: number):BigNumber {\n  const raw = new BigNumber(rawAmt);\n  const base = new BigNumber(10);\n  const decimalsBN = new BigNumber(decimals);\n  return raw.times(base.pow(decimalsBN)).integerValue();\n}\n\n/**\n * Convert 10999000 to 10.999\n */\nexport const toTokenUnitsBN = (tokenAmount:string|number|BigNumber, tokenDecimals:number): BigNumber => {\n  const amt = new BigNumber(tokenAmount);\n  const digits = new BigNumber(10).pow(new BigNumber(tokenDecimals));\n  return amt.div(digits);\n};\n\nexport const isPos = (amount: BigNumber): boolean => {\n  return !amount.isZero() && amount.isPositive();\n};\n\nexport const ownership = (balance: BigNumber, totalSupply: BigNumber): BigNumber => {\n  return balance.multipliedBy(new BigNumber(100)).dividedBy(totalSupply);\n}\n\n/**\n * BigNumber string formatting\n */\n\nexport const formatBN = (amount: BigNumber, position: number): string => {\n  if (amount.isLessThan(new BigNumber(1))) {\n    return pad(amount.precision(position, BigNumber.ROUND_FLOOR).toFixed(), position);\n\n  }\n  return delineate(amount.toFixed(position, BigNumber.ROUND_FLOOR));\n}\n\nfunction delineate(bnStr) {\n  const parts = bnStr.split('.');\n  return parts[0].toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \".\" + parts[1];\n}\n\nfunction pad(bnStr, position) {\n  if (!bnStr.includes(\".\")) {\n    bnStr += \".\";\n  }\n\n  const parts = bnStr.split(\".\");\n  for (let i = 0; i < position - parts[1].length; i++) {\n    bnStr += \"0\";\n  }\n\n  return bnStr\n}\n\nexport function formatMoney(n) {\n  n = n.toPrecision(3)\n  return Math.abs(Number(n)) >= 1.0e+9\n    ? Math.abs(Number(n)) / 1.0e+9 + \"B\"\n    : Math.abs(Number(n)) >= 1.0e+6\n      ? Math.abs(Number(n)) / 1.0e+6 + \"MM\"\n      : Math.abs(Number(n)) >= 1.0e+3\n        ? Math.abs(Number(n)) / 1.0e+3 + \"K\"\n        : Math.abs(Number(n));\n}","import React from 'react';\nimport { IdentityBadge } from '@aragon/ui';\n\ntype AddressBlockProps = {\n  label:string,\n  address: string\n}\n\nfunction AddressBlock({ label, address }: AddressBlockProps) {\n  return (\n    <>\n      <div style={{ fontSize: 16, padding: 3 }}>{label}</div>\n      <div style={{ padding: 5 }}>\n        <IdentityBadge entity={address} shorten />\n      </div>\n    </>\n  );\n}\n\nexport default AddressBlock;\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\nimport {formatBN} from \"../../utils/number\";\n\ntype BlanceBlockProps = {\n  asset: string,\n  balance: BigNumber | string | number\n  suffix?: string\n}\n\nfunction BalanceBlock({ asset, balance, suffix=\"\"}: BlanceBlockProps) {\n  let integer = '0';\n  let digits = '0';\n  const balanceBN = new BigNumber(balance);\n  if (balanceBN.gte(new BigNumber(0))) {\n    const tokens = formatBN(balanceBN, 2).split('.')\n    integer = tokens[0];\n    digits = tokens[1];\n  }\n\n  return (\n    <>\n      <div style={{ fontSize: 14, padding: 3 }}>{asset}</div>\n      <div style={{ padding: 3 }}>\n        <span style={{ fontSize: 24 }}>{integer}</span>\n        .\n        <span style={{ fontSize: 18 }}>\n          {' '}\n          {digits}\n          {' '}\n        </span>\n        {suffix === \"\" ? '' : <span style={{ fontSize: 18 }}>{suffix}</span> }\n      </div>\n    </>\n  );\n}\n\nexport default BalanceBlock;\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\nimport {formatBN} from \"../../utils/number\";\n\ntype BlanceBlockProps = {\n  asset: string,\n  value: BigNumber | string | number\n  suffix?: string,\n}\n\nfunction StatsRowItem({ asset, value, suffix=\"\"}: BlanceBlockProps) {\n  return (\n    <div style={{display: 'flex'}}>\n      <div style={{ fontSize: 12, lineHeight: 2}}>{asset}</div>\n      <div style={{ \n        flex: '1 1 0%',\n        backgroundPosition: 'center bottom',\n        backgroundSize: '0.5rem 0.0625rem',\n        backgroundImage: 'linear-gradient(to right, rgba(225, 225, 225, 0.4) 20%, rgba(255, 255, 255, 0) 0%)',\n        backgroundRepeat: 'repeat-x'\n      }}></div>\n      <div style={{ fontSize: 12, lineHeight: 2}}>\n        <span>{value}</span><span> {suffix}</span>\n      </div>\n    </div>\n  );\n}\n\nexport default StatsRowItem;\n","import React from 'react';\n\nfunction SectionTitle({ title }:{title: string}) {\n  return <div style={{ padding: 10, fontSize: 20 }}>{title}</div>;\n}\n\nexport default SectionTitle;\n","import React from 'react';\n\nimport {\n  ButtonBase,\n} from '@aragon/ui';\n\nfunction MaxButton({ onClick }:{ onClick: Function }) {\n  return (\n    <div style={{ padding: 3 }}>\n      <ButtonBase onClick={onClick}>\n        <span style={{ opacity: 0.5 }}> Max </span>\n      </ButtonBase>\n    </div>\n  );\n}\n\nexport default MaxButton;\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\n\nfunction PriceSection({\n  label, amt, symbol = '', forceDisplay = false,\n}:{label:string, amt: string|number|BigNumber, symbol?:string, forceDisplay?:boolean }) {\n  const amtBN = new BigNumber(amt);\n  if (amtBN.gt(new BigNumber(0)) || forceDisplay) {\n    return (\n      <div style={{ padding: 3, opacity: 0.5 }}>\n        <span style={{ fontSize: 13 }}>{label}</span>\n        <span style={{ fontSize: 13 }}>{amtBN.toNumber().toFixed(5)}</span>\n        <span style={{ fontSize: 13 }}>{symbol}</span>\n      </div>\n    );\n  }\n  return <div style={{ padding: 3, opacity: 0.5 }} />;\n}\n\n\nexport default PriceSection;\n","import React, { ReactChild } from 'react';\n\ntype commentProps = {\n  text: string | ReactChild\n}\n\nfunction Comment({ text }: commentProps) {\n  return (\n    <div style={{ padding: 5, opacity: 0.5 }}>\n      {text}\n    </div>\n  );\n}\n\nexport default Comment;\n","import styled from 'styled-components';\n\nconst FlexWrapper = styled.div`\n  // display: flex;\n  padding-left: 20%;\n  padding-right: 20%;\n`;\n\nexport default FlexWrapper;\n","import React from 'react';\nimport { Checkbox, useTheme } from '@aragon/ui';\nimport styled from 'styled-components';\n\ntype checkBoxProps = {\n  text: string,\n  checked: boolean,\n  onCheck: Function\n}\n\nfunction MyCheckBox({ text, checked, onCheck }: checkBoxProps) {\n  const theme = useTheme();\n  return (\n    <CheckBoxWrapper theme={theme}>\n      <Checkbox\n        checked={checked}\n        onChange={onCheck}\n      />\n      <span style={{ margin: '4px' }}>\n        {text}\n      </span>\n      <br />\n    </CheckBoxWrapper>\n  );\n}\n\nexport default MyCheckBox;\n\nconst CheckBoxWrapper = styled.div`{\n  display: flex;\n  font-size: 14px;\n  color: ${(props) => props.theme.surfaceContentSecondary}\n}`;","import React from 'react';\nimport BigNumber from 'bignumber.js';\n\nimport { StatsRowItem } from '../common/index';\nimport TextBlock from \"../common/TextBlock\";\nimport {ownership} from \"../../utils/number\";\nimport {formatBN} from \"../../utils/number\";\n\ntype AccountPageHeaderProps = {\n  accountVTDBalance: BigNumber,\n  accountVTDSBalance: BigNumber,\n  totalVTDSSupply: BigNumber,\n  accountStagedBalance: BigNumber,\n  accountBondedBalance: BigNumber,\n  accountStatus: number,\n  unlocked: number,\n};\n\nfunction fm(bn){\n  let num = (formatBN(bn, 2))\n  return num;\n}\n\nconst STATUS_MAP = [\"Unlocked\", \"Locked\", \"Locked\"];\n\nfunction status(accountStatus, unlocked) {\n  return STATUS_MAP[accountStatus] + (accountStatus === 0 ? \"\" : \" until epoch:\" + unlocked)\n}\n\nconst AccountPageHeader = ({\n  accountVTDBalance, accountVTDSBalance, totalVTDSSupply, accountStagedBalance, accountBondedBalance, accountStatus, unlocked\n}: AccountPageHeaderProps) => (\n\n<div style={{display: 'flex'}}>\n     \n  <div style={{ flex: '1 0 50%',  padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center', justifyContent: 'space-between' }}>\n      <div style={{ flex: '1 0 50%'}}>\n      <StatsRowItem asset=\"Balance\" value={fm(accountVTDBalance)} suffix={\" VTD\"}/>\n      <StatsRowItem asset=\"Staged\" value={fm(accountStagedBalance)}  suffix={\" VTD\"}/>\n      <StatsRowItem asset=\"Bonded\" value={fm(accountBondedBalance)}  suffix={\" VTD\"}/>\n      </div>\n  </div>\n  <div style={{ flex: '1 0 50%', padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center', justifyContent: 'space-between' }}>\n      <div style={{flex: '1 0 50%'}}>\n          <StatsRowItem asset=\"Dao Ownership\" value={fm(ownership(accountVTDSBalance, totalVTDSSupply))} suffix={\"%\"} />\n          <StatsRowItem asset=\"Dao status\" value={status(accountStatus, unlocked)}  suffix={\"\"}/>\n      </div>\n  </div>\n</div>\n);\n\n\nexport default AccountPageHeader;\n","export const notify = {\n  hash: (v) => {\n    console.log(v)\n    localStorage.setItem('pendingtx', v);\n  }\n}","/* eslint-disable camelcase */\nimport Web3 from 'web3';\nimport BigNumber from 'bignumber.js';\n\nimport { notify } from './txNotifier.ts';\nimport { UniswapV2Router02 } from '../constants/contracts';\n\nimport { VTD } from '../constants/tokens';\n\nconst uniswapRouterAbi = require('../constants/abi/UniswapV2Router02.json');\nconst testnetUSDCAbi = require('../constants/abi/TestnetUSDC.json');\nconst daoAbi = require('../constants/abi/Implementation.json');\nconst poolAbi = require('../constants/abi/Pool.json');\n\nconst DEADLINE_FROM_NOW = 60 * 15;\nconst UINT256_MAX = '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff';\n\n/**\n * Connection Utilities\n */\n\nexport const updateModalMode = async (theme) => {\n  window.darkMode = theme === 'dark';\n};\n\nexport const connect = async (ethereum) => {\n  window.web3 = new Web3(ethereum);\n  let addresses = await window.web3.eth.getAccounts();\n  if (!addresses.length) {\n    try {\n      addresses = await window.ethereum.enable();\n    } catch (e) {\n      console.log(e);\n      return false;\n    }\n  }\n\n  return addresses.length ? addresses[0].toLowerCase() : null;\n};\n\n// eslint-disable-next-line consistent-return\nexport const checkConnectedAndGetAddress = async () => {\n  let addresses = await window.web3.eth.getAccounts();\n  if (!addresses.length) {\n    try {\n      addresses = await window.ethereum.enable();\n      // eslint-disable-next-line no-empty\n    } catch (e) { }\n  }\n\n  return addresses[0];\n};\n\n/**\n * ERC20 Utilities\n */\n\nexport const approve = async (tokenAddr, spender, amt = UINT256_MAX) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new window.web3.eth.Contract(testnetUSDCAbi, tokenAddr);\n  await oToken.methods\n    .approve(spender, amt)\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n\nexport const checkTxStatus = async (hash, callback) => {\n  new window.web3.eth.getTransactionReceipt(hash, callback);\n};\n\n\n// export const mintTestnetUSDC = async (amount) => {\n//   const account = await checkConnectedAndGetAddress();\n//   const dsd = new window.web3.eth.Contract(testnetUSDCAbi, DSD.addr);\n\n//   await dsd.methods.mint(account, new BigNumber(amount).toFixed())\n//     .send({ from: account })\n//     .on('transactionHash', (hash) => {\n//       notify.hash(hash);\n//     });\n// };\n\n/**\n * Uniswap Protocol\n */\n\nexport const buyVTD = async (buyAmount, maxInputAmount, inputTokenAddr) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n\n  await router.methods.swapTokensForExactTokens(\n    buyAmount,\n    maxInputAmount,\n    [inputTokenAddr, VTD.addr],\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const sellVTD = async (sellAmount, minOutputAmount, outputTokenAddr) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n\n  await router.methods.swapExactTokensForTokens(\n    sellAmount,\n    minOutputAmount,\n    [VTD.addr, outputTokenAddr],\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const addLiquidity = async (amountVTD, amountPeg, slippage, counterTokenAddr) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n  const slippageBN = new BigNumber(slippage);\n  const minAmountVTD = new BigNumber(amountVTD)\n    .multipliedBy(new BigNumber(1).minus(slippageBN))\n    .integerValue(BigNumber.ROUND_FLOOR);\n  const minAmountUSDC = new BigNumber(amountPeg)\n    .multipliedBy(new BigNumber(1).minus(slippageBN))\n    .integerValue(BigNumber.ROUND_FLOOR);\n\n  await router.methods.addLiquidity(\n    VTD.addr,\n    counterTokenAddr,\n    new BigNumber(amountVTD).toFixed(),\n    new BigNumber(amountPeg).toFixed(),\n    minAmountVTD,\n    minAmountUSDC,\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const removeLiquidity = async (liquidityAmount, minAmountVTD, minAmountPeg, pegAddress) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n\n  await router.methods.removeLiquidity(\n    VTD.addr,\n    pegAddress,\n    new BigNumber(liquidityAmount).toFixed(),\n    new BigNumber(minAmountVTD).toFixed(),\n    new BigNumber(minAmountPeg).toFixed(),\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n * Døllar Protocol\n */\n\nexport const advance = async (dao) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .tryAdvance()\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const deposit = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  console.log(account)\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  console.log(daoContract)\n  await daoContract.methods\n    .deposit(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const withdraw = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .withdraw(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const bond = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .bond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const unbond = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .unbond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const unbondUnderlying = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .unbondUnderlying(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const purchaseCoupons = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .purchaseCoupons(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const redeemCoupons = async (dao, epoch, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .redeemCoupons(epoch, new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const recordVote = async (dao, candidate, voteType) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .vote(candidate, voteType)\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const commit = async (dao, candidate) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .commit(candidate)\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/* UNI-V2 Incentivization Pool */\nexport const depositPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .deposit(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const withdrawPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .withdraw(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const bondPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .bond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const unbondPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .unbond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const claimPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .claim(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const providePool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .provide(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\nimport {\n  TextInput,\n} from '@aragon/ui';\n\ntype BigNumberInputProps = {\n  value: BigNumber,\n  setter: (value: BigNumber) => void\n  adornment?: any,\n  disabled?: boolean\n}\n\nfunction BigNumberInput({ value, setter, adornment, disabled=false }: BigNumberInputProps) {\n  return (\n    <>\n      <TextInput\n        type=\"number\"\n        adornmentPosition=\"end\"\n        adornment={adornment}\n        wide\n        value={value.isNegative() ? '' : value.toFixed()}\n        onChange={(event) => {\n          if (event.target.value) {\n            setter(new BigNumber(event.target.value));\n          } else {\n            setter(new BigNumber(-1));\n          }\n        }}\n        onBlur={() => {\n          if (value.isNegative()) {\n            setter(new BigNumber(0))\n          }\n        }}\n        disabled={disabled}\n      />\n    </>\n  );\n}\n\nexport default BigNumberInput;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconLock\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {approve, depositPool, withdrawPool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {MAX_UINT256} from \"../../constants/values\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype WithdrawDepositProps = {\n  poolAddress: string\n  user: string\n  balance: BigNumber,\n  allowance: BigNumber,\n  stagedBalance: BigNumber,\n  status: number,\n  peg: any\n};\n\nfunction WithdrawDeposit({\n  poolAddress, user, balance, allowance, stagedBalance, status, peg\n}: WithdrawDepositProps) {\n  const [depositAmount, setDepositAmount] = useState(new BigNumber(0));\n  const [withdrawAmount, setWithdrawAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Stage\" style={{ paddingTop: '2%'}}>\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\n        <div>\n          {/* total Issued */}\n          <div>\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"UNI-V2\"}/>\n          </div>\n          {/* Deposit UNI-V2 into Pool */}\n          <div>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"UNI-V2\"\n                    value={depositAmount}\n                    setter={setDepositAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setDepositAmount(balance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCirclePlus/> : <IconLock/>}\n                  label=\"Deposit\"\n                  onClick={() => {\n                    depositPool(\n                      poolAddress,\n                      toBaseUnitBN(depositAmount, peg.pair.decimals),\n                      (hash) => setDepositAmount(new BigNumber(0))\n                    );\n                  }}\n                  disabled={poolAddress === '' || status !== 0 || !isPos(depositAmount)}\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Withdraw Døllar from DAO */}\n          <div style={{paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"UNI-V2\"\n                    value={withdrawAmount}\n                    setter={setWithdrawAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setWithdrawAmount(stagedBalance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCircleMinus/> : <IconLock/>}\n                  label=\"Withdraw\"\n                  onClick={() => {\n                    withdrawPool(\n                      poolAddress,\n                      toBaseUnitBN(withdrawAmount, peg.pair.decimals),\n                      (hash) => setWithdrawAmount(new BigNumber(0))\n                    );\n                  }}\n                  disabled={poolAddress === '' || status !== 0 || !isPos(withdrawAmount)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        :\n        <div style={{}}>\n          {/* total Issued */}\n          <div >\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"UNI-V2\"}/>\n          </div>\n          <div/>\n          {/* Approve Pool to spend UNI-V2 */}\n          <div style={{ paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus />}\n              label=\"Approve\"\n              onClick={() => {\n                approve(peg.pair.addr, peg.pool);\n              }}\n              disabled={peg.pool === '' || user === ''}\n            />\n          </div>\n        </div>\n      }\n    </Box>\n  );\n}\n\nexport default WithdrawDeposit;\n","import React from 'react';\n\ntype TextBlockProps = {\n  label: string,\n  text: string\n}\n\nfunction TextBlock({ label, text }: TextBlockProps) {\n  return (\n    <>\n      <div style={{ fontSize: 16, padding: 3 }}>{label}</div>\n      <div style={{ fontSize: 16, padding: 3 }}>{text}</div>\n    </>\n  );\n}\n\nexport default TextBlock;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconCaution\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {bondPool, unbondPool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport BigNumberInput from \"../common/BigNumberInput\";\nimport TextBlock from \"../common/TextBlock\";\n\ntype BondUnbondProps = {\n  poolAddress: string,\n  staged: BigNumber,\n  bonded: BigNumber,\n  status: number,\n  lockup: number,\n  peg: any\n};\n\nfunction BondUnbond({\n  poolAddress, staged, bonded, status, lockup, peg\n}: BondUnbondProps) {\n  const [bondAmount, setBondAmount] = useState(new BigNumber(0));\n  const [unbondAmount, setUnbondAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Bond\">\n      <div>\n        {/* Total bonded */}\n        <div>\n          <BalanceBlock asset=\"Bonded\" balance={bonded} suffix={\"UNI-V2\"} />\n        </div>\n        {/* Exit lockup */}\n        <div>\n          <TextBlock label=\"Exit Lockup\" text={lockup === 0 ? \"\" : lockup === 1 ? \"1 epoch\" : `${lockup} epochs`}/>\n        </div>\n        {/* Bond UNI-V2 within Pool */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  adornment=\"UNI-V2\"\n                  value={bondAmount}\n                  setter={setBondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setBondAmount(staged);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCirclePlus/> : <IconCaution/>}\n                label=\"Bond\"\n                onClick={() => {\n                  bondPool(\n                    poolAddress,\n                    toBaseUnitBN(bondAmount, peg.pair.decimals),\n                    (hash) => setBondAmount(new BigNumber(0))\n                  );\n                }}\n                disabled={poolAddress === '' || !isPos(bondAmount)}\n              />\n            </div>\n          </div>\n        </div>\n        <div style={{flexBasis: '2%'}}/>\n        {/* Unbond UNI-V2 within Pool */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  adornment=\"UNI-V2\"\n                  value={unbondAmount}\n                  setter={setUnbondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setUnbondAmount(bonded);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCircleMinus/> : <IconCaution/>}\n                label=\"Unbond\"\n                onClick={() => {\n                  unbondPool(\n                    poolAddress,\n                    toBaseUnitBN(unbondAmount, peg.pair.decimals),\n                    (hash) => setUnbondAmount(new BigNumber(0))\n                  );\n                }}\n                disabled={poolAddress === '' || !isPos(unbondAmount)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> Bonding events will restart the lockup timer </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default BondUnbond;\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\n\nimport { BalanceBlock,StatsRowItem } from '../common/index';\n\nimport {Grid} from '@geist-ui/react'\nimport {ownership} from \"../../utils/number\";\nimport {formatBN} from \"../../utils/number\";\n\ntype PoolPageHeaderProps = {\n  accountUNIBalance: BigNumber,\n  accountStagedBalance: BigNumber,\n  accountBondedBalance: BigNumber,\n  accountRewardedVTDBalance: BigNumber,\n  accountClaimableVTDBalance: BigNumber,\n  poolTotalBonded: BigNumber,\n  accountPoolStatus: number,\n  unlocked: number,\n};\n\nconst STATUS_MAP = [\"Unlocked\", \"Locked\"];\n\nfunction status(accountStatus, unlocked) {\n  return STATUS_MAP[accountStatus] + (accountStatus === 0 ? \"\" : \" until \" + unlocked)\n}\n\nfunction fm(bn){\n  let num = (formatBN(bn, 2))\n  return num;\n}\n\n\n\nconst PoolPageHeader = ({\n  accountUNIBalance, accountStagedBalance, accountBondedBalance, accountRewardedVTDBalance, accountClaimableVTDBalance, poolTotalBonded, accountPoolStatus, unlocked\n}: PoolPageHeaderProps) => (\n  <>\n    <Grid xs={24} sm={12}>\n        <StatsRowItem asset=\"Balance\" value={fm(accountUNIBalance)} suffix={\" UNI-V2\"}/>\n        <StatsRowItem asset=\"Staged\" value={fm(accountStagedBalance)}  suffix={\" UNI-V2\"}/>\n        <StatsRowItem asset=\"Bonded\" value={fm(accountBondedBalance)}  suffix={\" UNI-V2\"}/>\n     </Grid>\n     <Grid xs={24} sm={12}>\n\n            <StatsRowItem asset=\"Rewarded\" value={fm(accountRewardedVTDBalance)}  suffix={\" VTD\"}/>\n            <StatsRowItem asset=\"Claimable\" value={fm(accountClaimableVTDBalance)}  suffix={\" VTD\"}/>\n            <StatsRowItem asset=\"Pool Ownership\" value={fm(ownership(accountBondedBalance, poolTotalBonded))} suffix={\"%\"} />\n            <StatsRowItem asset=\"Pool status\" value={status(accountPoolStatus, unlocked)}  suffix={\"\"}/>\n    </Grid>\n  </>\n);\n\n\nexport default PoolPageHeader;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconArrowDown\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {claimPool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {VTD} from \"../../constants/tokens\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype ClaimProps = {\n  poolAddress: string\n  claimable: BigNumber,\n  status: number\n};\n\nfunction Claim({\n  poolAddress, claimable, status\n}: ClaimProps) {\n  const [claimAmount, setClaimAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Claim\">\n      <div>\n        {/* total Issued */}\n        <div>\n          <BalanceBlock asset=\"Claimable\" balance={claimable} suffix={\"VTD\"} />\n        </div>\n        {/* Deposit UNI-V2 into Pool */}\n        <div/>\n        <div style={{paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  adornment=\"VTD\"\n                  value={claimAmount}\n                  setter={setClaimAmount}\n                  disabled={status !== 0}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setClaimAmount(claimable);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '6em'}}>\n              <Button\n                wide\n                icon={<IconArrowDown/>}\n                label=\"Claim\"\n                onClick={() => {\n                  claimPool(\n                    poolAddress,\n                    toBaseUnitBN(claimAmount, VTD.decimals),\n                    (hash) => setClaimAmount(new BigNumber(0))\n                  );\n                }}\n                disabled={poolAddress === '' || status !== 0 || !isPos(claimAmount)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> Unbond to make rewards claimable after your status is Unlocked </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default Claim;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconArrowUp, IconCirclePlus\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton, PriceSection,\n} from '../common/index';\nimport {approve, providePool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN, toTokenUnitsBN} from '../../utils/number';\nimport {VTD} from \"../../constants/tokens\";\nimport {MAX_UINT256} from \"../../constants/values\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype ProvideProps = {\n  poolAddress: string,\n  user: string,\n  rewarded: BigNumber,\n  pairBalanceVTD: BigNumber,\n  pairBalancePeg: BigNumber,\n  userPEGBalance: BigNumber,\n  userPEGAllowance: BigNumber,\n  status: number,\n  peg: any,\n};\n\nfunction Provide({\n  poolAddress, user, rewarded, pairBalanceVTD, pairBalancePeg, userPEGBalance, userPEGAllowance, status, peg\n}: ProvideProps) {\n  const [provideAmount, setProvideAmount] = useState(new BigNumber(0));\n  const [usdcAmount, setUsdcAmount] = useState(new BigNumber(0));\n\n  const PEGToVTDRatio = pairBalancePeg.isZero() ? new BigNumber(1) : pairBalancePeg.div(pairBalanceVTD);\n\n  const onChangeAmountVTD = (amountVTD) => {\n    if (!amountVTD) {\n      setProvideAmount(new BigNumber(0));\n      setUsdcAmount(new BigNumber(0));\n      return;\n    }\n\n    const amountVTDBN = new BigNumber(amountVTD)\n    setProvideAmount(amountVTDBN);\n\n    const amountVTDBU = toBaseUnitBN(amountVTDBN, VTD.decimals);\n    const newAmountPEG = toTokenUnitsBN(\n      amountVTDBU.multipliedBy(PEGToVTDRatio).integerValue(BigNumber.ROUND_FLOOR),\n      VTD.decimals);\n    setUsdcAmount(newAmountPEG);\n  };\n\n  return (\n    <Box heading=\"Provide\">\n      {userPEGAllowance.comparedTo(MAX_UINT256.dividedBy(2)) > 0 ?\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total rewarded */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset=\"Rewarded\" balance={rewarded} suffix={\"VTD\"} />\n          </div>\n          <div style={{flexBasis: '33%'}}>\n            <BalanceBlock asset={`${peg.symbol} Balance`} balance={userPEGBalance} suffix={peg.symbol} />\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Provide liquidity using Pool rewards */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"VTD\"\n                    value={provideAmount}\n                    setter={onChangeAmountVTD}\n                    disabled={status === 1}\n                  />\n                  <PriceSection label=\"Requires \" amt={usdcAmount} symbol={peg.symbol}/>\n                  <MaxButton\n                    onClick={() => {\n                      onChangeAmountVTD(rewarded);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '6em'}}>\n                <Button\n                  wide\n                  icon={<IconArrowUp/>}\n                  label=\"Provide\"\n                  onClick={() => {\n                    providePool(\n                      poolAddress,\n                      toBaseUnitBN(provideAmount, VTD.decimals),\n                      (hash) => setProvideAmount(new BigNumber(0))\n                    );\n                  }}\n                  disabled={poolAddress === '' || status !== 0 || !isPos(provideAmount) || usdcAmount.isGreaterThan(userPEGBalance)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        :\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total rewarded */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset=\"Rewarded\" balance={rewarded} suffix={\"VTD\"} />\n          </div>\n          <div style={{flexBasis: '33%'}}>\n            <BalanceBlock asset={`${peg.symbol} Balance`} balance={userPEGBalance} suffix={peg.symbol}/>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Approve Pool to spend DSD */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus/>}\n              label=\"Approve\"\n              onClick={() => {\n                approve(peg.addr, poolAddress);\n              }}\n              disabled={poolAddress === '' || user === ''}\n            />\n          </div>\n        </div>\n      }\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> Zap your rewards directly to LP by providing more ${peg.symbol} </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default Provide;\n","import React from 'react';\nimport {VTD, VTDD, PeggedTokens} from \"../constants/tokens\";\nimport BigNumber from 'bignumber.js';\nimport {\n  getPoolTotalBonded,\n  getTokenBalance,\n  getOracleTwap,\n  getInstantaneousPrice,\n  getPoolTotalClaimable, getPoolTotalRewarded,\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged\n} from '../utils/infura';\nimport { toTokenUnitsBN } from '../utils/number';\n\nexport interface ITodo {\n  id: number\n  title: string\n  description: string\n  status: boolean\n}\n\nexport interface IPeggedToken {\n  name: string,\n  pair: {\n    addr: string,\n    decimals: number,\n    symbol: string,\n  },\n  addr: string,\n  decimals: number,\n  symbol: string,\n  pool: string,\n  oracle: string,\n  enabled: boolean,\n  usdcPair: string,\n  usdcPrice: BigNumber,\n  stats: PegStats\n}\n\nexport interface PegStats {\n  vtdBalance: BigNumber,\n  pegBalance: BigNumber,\n  poolReward: BigNumber,\n  poolClaimable: BigNumber,\n  poolTotalBonded: BigNumber,\n  price: BigNumber,\n  lastTwap: BigNumber\n}\n\nexport type ContextType = {\n  peggedTokens: IPeggedToken[],\n  totals: {\n    totalSupply: BigNumber,\n    totalBonded: BigNumber,\n    totalStaged: BigNumber,\n    totalLPSupply: BigNumber,\n    totalLPBonded: BigNumber,\n    circulating: BigNumber,\n    totalRedeemable: BigNumber,\n    totalDebt: BigNumber,\n    totalCoupon: BigNumber\n  },\n  updatePools: () => void,\n  updateTotals: () => {}\n}\n\n//@ts-ignore\nconst initialPeggedTokens: IPeggedToken[] = PeggedTokens.map((peg) => {\n  peg.stats = {\n    vtdBalance: new BigNumber(0),\n    pegBalance: new BigNumber(0),\n    poolReward: new BigNumber(0),\n    poolClaimable: new BigNumber(0),\n    poolTotalBonded: new BigNumber(0),\n    price: new BigNumber(0),\n    lastTwap: new BigNumber(0)\n  } \n\n  peg.usdcPrice = new BigNumber(0)\n  return peg\n})\n\nconst initialTotals = {\n  totalSupply: new BigNumber(0),\n  totalBonded: new BigNumber(0),\n  totalStaged: new BigNumber(0),\n  totalLPSupply: new BigNumber(0),\n  totalLPBonded: new BigNumber(0),\n  circulating: new BigNumber(0),\n  totalRedeemable: new BigNumber(0),\n  totalDebt: new BigNumber(0),\n  totalCoupon: new BigNumber(0)\n}\n\nexport const MainContext = React.createContext<ContextType | null>(null);\n\nexport const MainStoreProvider: React.FC<React.ReactNode> = ({ children }) => {\n  const [peggedTokens, setPeggedTokenPools] = React.useState<IPeggedToken[]>(initialPeggedTokens);\n  const [totals, setTotals] = React.useState(initialTotals);\n\n  const updatePools = () => {\n    let pegs: IPeggedToken[] = []\n    peggedTokens.forEach(async (peg) =>  { \n      if (peg.enabled) {\n        let [vtdBalance, pegBalance, poolReward, poolClaimable, totalBonded, oracleTwap] = await Promise.all([\n          getTokenBalance(VTD.addr, peg.pair.addr),\n          getTokenBalance(peg.addr, peg.pair.addr),\n          getPoolTotalRewarded(peg.pool),\n          getPoolTotalClaimable(peg.pool),\n          getPoolTotalBonded(peg.pool),\n          getOracleTwap(peg.oracle)\n          ]);\n        \n        let usdcPrice = new BigNumber(1e18);\n        if (!(peg.symbol === 'USDC')) {\n           let multiplier = peg.decimals == 18 ? 1e12 : 1;\n           const [rawUsdcPrice] = await Promise.all([getInstantaneousPrice('0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48', peg.usdcPair)])\n           usdcPrice = rawUsdcPrice.multipliedBy(new BigNumber(multiplier));\n        }\n\n        peg.stats = {\n          vtdBalance: toTokenUnitsBN(vtdBalance, VTD.decimals),\n          pegBalance: toTokenUnitsBN(pegBalance, peg.decimals),\n          poolReward: toTokenUnitsBN(poolReward, VTD.decimals),\n          poolClaimable: toTokenUnitsBN(poolClaimable, VTD.decimals),\n          poolTotalBonded: toTokenUnitsBN(totalBonded, VTD.decimals),\n          price: toTokenUnitsBN(pegBalance, peg.decimals).dividedBy(toTokenUnitsBN(vtdBalance, VTD.decimals)),\n          lastTwap: toTokenUnitsBN(new BigNumber(oracleTwap), VTD.decimals),\n        }\n\n        peggedTokens.filter((_peg: IPeggedToken) => {\n          if (_peg.symbol === peg.symbol) {\n            _peg.stats = peg.stats;\n            _peg.usdcPrice = usdcPrice;\n            setPeggedTokenPools([...peggedTokens]);\n          }\n        });\n      }\n    })\n  };\n\n  const updateTotals = async () => {\n    const [\n      totalSupplyStr,\n      totalBondedStr, totalStagedStr, totalRedeemableStr,\n      totalDebtStr, totalCouponsStr\n      ] = await Promise.all([\n      getTokenTotalSupply(VTD.addr),\n\n      getTotalBonded(VTDD.addr),\n      getTotalStaged(VTDD.addr),\n      getTotalRedeemable(VTDD.addr),\n\n      getTotalDebt(VTDD.addr),\n      getTotalCoupons(VTDD.addr)\n\n      ]);\n\n    let poolTotal = new BigNumber(0);\n    let totalLiquidityPoolSupply = new BigNumber(0);\n    peggedTokens.forEach((peg) => {\n      totalLiquidityPoolSupply = totalLiquidityPoolSupply.plus(peg.stats.poolReward)\n        .plus(peg.stats.poolClaimable)\n        poolTotal = poolTotal.plus(peg.stats.vtdBalance)\n    })\n\n    const newTotals = {\n      totalSupply: toTokenUnitsBN(totalSupplyStr, VTD.decimals),\n      totalBonded: toTokenUnitsBN(totalBondedStr, VTD.decimals),\n      totalStaged: toTokenUnitsBN(totalStagedStr, VTD.decimals),\n      totalLPSupply: totalLiquidityPoolSupply,\n      totalLPBonded: poolTotal,\n      circulating: new BigNumber(0),\n      totalRedeemable: toTokenUnitsBN(totalRedeemableStr, VTD.decimals),\n      totalDebt: toTokenUnitsBN(totalDebtStr, VTD.decimals),\n      totalCoupon: toTokenUnitsBN(totalCouponsStr, VTD.decimals)\n    }\n    newTotals.circulating = newTotals.totalSupply.minus(newTotals.totalLPBonded)\n                                                 .minus(newTotals.totalBonded)\n                                                 .minus(newTotals.totalStaged)\n                                                 .minus(newTotals.totalLPSupply)\n    setTotals(newTotals);\n  }\n\n  return (\n    <MainContext.Provider value={{peggedTokens, totals, updatePools, updateTotals }}>\n      {children}\n    </MainContext.Provider>\n  );\n};\n\nexport default MainStoreProvider;\n","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport BigNumber from 'bignumber.js';\nimport {\n  getPoolBalanceOfBonded, getPoolBalanceOfClaimable,\n  getPoolBalanceOfRewarded,\n  getPoolBalanceOfStaged,\n  getPoolStatusOf, getPoolTotalBonded,\n  getTokenAllowance,\n  getTokenBalance,\n  getPoolFluidUntil,\n  getPoolDistributions\n} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {formatBN} from \"../../utils/number\";\nimport {POOL_EXIT_LOCKUP_EPOCHS} from \"../../constants/values\";\nimport { toTokenUnitsBN } from '../../utils/number';\nimport { SidePanel } from '@aragon/ui';\nimport { ButtonGroup, Button, Card, Divider, useTheme, Grid, useMediaQuery, Link } from '@geist-ui/react'\nimport { X } from '@geist-ui/react-icons'\n\nimport WithdrawDeposit from \"./WithdrawDeposit\";\nimport BondUnbond from \"./BondUnbond\";\nimport PoolPageHeader from \"./Header\";\nimport Claim from \"./Claim\";\nimport Provide from \"./Provide\";\nimport { MainContext, ContextType } from \"../../store/MainStore\";\n\n// import Migrate from \"./Migrate\";\n// import {DollarPool4} from \"../../constants/contracts\";\n\ntype PoolProps = {user: string, peg: any};\n\nfunction Pool({ user, peg }: PoolProps) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n  const theme = useTheme();\n  const [poolAddress, setPoolAddress] = useState(\"\");\n  const [userUNIBalance, setUserUNIBalance] = useState(new BigNumber(0));\n  const [userUNIAllowance, setUserUNIAllowance] = useState(new BigNumber(0));\n  const [userPEGBalance, setUserPEGBalance] = useState(new BigNumber(0));\n  const [userPEGAllowance, setUserPEGAllowance] = useState(new BigNumber(0));\n  const [userStagedBalance, setUserStagedBalance] = useState(new BigNumber(0));\n  const [userBondedBalance, setUserBondedBalance] = useState(new BigNumber(0));\n  const [userRewardedBalance, setUserRewardedBalance] = useState(new BigNumber(0));\n  const [userClaimableBalance, setUserClaimableBalance] = useState(new BigNumber(0));\n  const [userStatus, setUserStatus] = useState(0);\n  const [userStatusUnlocked, setUserStatusUnlocked] = useState(0);\n  const [lockup, setLockup] = useState(0);\n  const [tokensPanelOpened, setTokensPanelOpened] = useState(false)\n  const [rewardPanelOpened, setRewardPanelOpened] = useState(false)\n  const { updatePools } = React.useContext(MainContext) as ContextType;\n  const downMD = useMediaQuery('sm', { match: 'down' })\n\n  function fm(bn){\n    let num = (formatBN(bn, 2))\n    return num;\n  }\n  //Update User balances\n  useEffect(() => {\n    if (user === '') {\n      setPoolAddress(\"\");\n      setUserUNIBalance(new BigNumber(0));\n      setUserUNIAllowance(new BigNumber(0));\n      setUserPEGBalance(new BigNumber(0));\n      setUserPEGAllowance(new BigNumber(0));\n      setUserStagedBalance(new BigNumber(0));\n      setUserBondedBalance(new BigNumber(0));\n      setUserRewardedBalance(new BigNumber(0));\n      setUserClaimableBalance(new BigNumber(0));\n      setUserStatus(0);\n      setUserStatusUnlocked(0);\n      \n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const poolAddressStr = await peg.pool;\n\n      const [\n        balance, usdcBalance,\n        allowance, usdcAllowance, stagedBalance, bondedBalance,\n        rewardedBalance, claimableBalance, status, fluidUntilStr\n      ] = await Promise.all([\n        getTokenBalance(peg.pair.addr, user),\n        getTokenBalance(peg.addr, user),\n\n        getTokenAllowance(peg.pair.addr, user, poolAddressStr),\n        getTokenAllowance(peg.addr, user, poolAddressStr),\n        getPoolBalanceOfStaged(poolAddressStr, user),\n        getPoolBalanceOfBonded(poolAddressStr, user),\n\n        getPoolBalanceOfRewarded(poolAddressStr, user),\n        getPoolBalanceOfClaimable(poolAddressStr, user),\n        getPoolStatusOf(poolAddressStr, user),\n        getPoolFluidUntil(poolAddressStr, user),\n        // getPoolDistributions(VTDD.address)\n      ]);\n      \n      const userUNIBalance = toTokenUnitsBN(balance, peg.pair.decimals);\n      const userPEGBalance = toTokenUnitsBN(usdcBalance, peg.decimals);\n      const userStagedBalance = toTokenUnitsBN(stagedBalance, peg.pair.decimals);\n      const userBondedBalance = toTokenUnitsBN(bondedBalance, peg.pair.decimals);\n      const userRewardedBalance = toTokenUnitsBN(rewardedBalance, VTD.decimals);\n      const userClaimableBalance = toTokenUnitsBN(claimableBalance, VTD.decimals);\n      const userStatus = parseInt(status, 10);\n      const fluidUntil = parseInt(fluidUntilStr, 10);\n\n      if (!isCancelled) {\n        setPoolAddress(poolAddressStr);\n        setUserUNIBalance(new BigNumber(userUNIBalance));\n        setUserUNIAllowance(new BigNumber(allowance));\n        setUserPEGAllowance(new BigNumber(usdcAllowance));\n        setUserPEGBalance(new BigNumber(userPEGBalance));\n        setUserStagedBalance(new BigNumber(userStagedBalance));\n        setUserBondedBalance(new BigNumber(userBondedBalance));\n        setUserRewardedBalance(new BigNumber(userRewardedBalance));\n        setUserClaimableBalance(new BigNumber(userClaimableBalance));\n        setUserStatus(userStatus);\n        setUserStatusUnlocked(fluidUntil);\n        // setLockup(poolAddressStr === DollarPool4 ? POOL_EXIT_LOCKUP_EPOCHS : 1);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n  // Check for error in .call()\n  return (\n    <>\n      <Card type=\"lite\" style={{margin: '10px 0', background: `${theme.palette.accents_1}`}}>\n        <Grid.Container gap={2} justify=\"center\">\n          <Grid xs={12} md={12}>\n            {peg.symbol}/\n            <div style={{fontSize: '10px'}}>\n              VTD\n            </div> \n          </Grid>\n          <Grid xs={12} md={4}>\n            <div>\n            Price: \n            </div>\n            <div style={{fontSize: '10px'}}>\n              {fm(peg.stats.price)} {peg.symbol} / {fm(peg.stats.price.multipliedBy(peg.usdcPrice))} USD \n            </div>  \n          </Grid>\n          <Grid xs={12} md={4}>\n            <div>\n            VTD Pooled: \n            </div>\n            <div style={{fontSize: '12px'}}>\n              {fm(peg.stats.vtdBalance)}\n            </div>   \n          </Grid>\n          <Grid xs={12} md={4}>\n            <div>\n            {peg.symbol} Pooled: \n            </div>\n            <div style={{fontSize: '12px'}}>\n              {fm(peg.stats.pegBalance)}\n            </div>  \n          </Grid>\n          <Divider y={0} />\n          \n            <PoolPageHeader\n              accountUNIBalance={userUNIBalance}\n              accountStagedBalance={userStagedBalance}\n              accountBondedBalance={userBondedBalance}\n              accountRewardedVTDBalance={userRewardedBalance}\n              accountClaimableVTDBalance={userClaimableBalance}\n              poolTotalBonded={peg.stats.poolTotalBonded}\n              accountPoolStatus={userStatus}\n              unlocked={userStatusUnlocked}\n            />\n          <Grid xs>\n            <ButtonGroup size={downMD? 'mini' : 'medium'} type=\"success\" ghost>\n              <Button\n              type=\"success\"\n                onClick={() => setTokensPanelOpened(true)}\n              >Bond/Unbond Tokens</Button>\n              <Button\n              type=\"success\"\n              // icon={<IconPlus />}\n              onClick={() => setRewardPanelOpened(true)}\n            >Claim/Provide Rewards</Button>\n            </ButtonGroup>\n          </Grid>\n          <Grid xs>\n            <ButtonGroup size={downMD? 'mini' : 'medium'} ghost>\n            <Button \n                onClick={() => window.open(`https://app.uniswap.org/#/swap?inputCurrency=${peg.addr}&outputCurrency=${VTD.addr}`, '_blank')}\n                ghost>Trade VTD/{peg.symbol}</Button>\n              <Button \n              // icon={<IconPlus />}\n              onClick={() => window.open(`https://app.uniswap.org/#/add/${VTD.addr}/${peg.addr}`, '_blank')}\n              ghost>Add Uniswap Liquidity</Button>\n            </ButtonGroup>\n          </Grid>\n          </Grid.Container>\n        </Card>\n        <SidePanel\n          title=\"Add/Remove Liquidity\"\n          opened={tokensPanelOpened}\n          onClose={() => setTokensPanelOpened(false)}\n        >\n          <Link onClick={() => setTokensPanelOpened(false)}><X /></Link>\n          <WithdrawDeposit\n          poolAddress={poolAddress}\n          user={user}\n          balance={userUNIBalance}\n          allowance={userUNIAllowance}\n          stagedBalance={userStagedBalance}\n          status={userStatus}\n          peg={peg}\n        />\n\n        <BondUnbond\n          poolAddress={poolAddress}\n          staged={userStagedBalance}\n          bonded={userBondedBalance}\n          status={userStatus}\n          lockup={lockup}\n          peg={peg}\n        />\n    \n        \n      </SidePanel>\n\n      <SidePanel\n        title=\"Claim/Zap Rewards\"\n        opened={rewardPanelOpened}\n        onClose={() => setRewardPanelOpened(false)}\n      >\n          <Link onClick={() => setRewardPanelOpened(false)}><X /></Link>\n        \n        <Claim\n          poolAddress={poolAddress}\n          claimable={userClaimableBalance}\n          status={userStatus}\n        />\n\n        <Provide\n          poolAddress={poolAddress}\n          user={user}\n          rewarded={userRewardedBalance}\n          status={userStatus}\n          pairBalanceVTD={peg.stats.vtdBalance}\n          pairBalancePeg={peg.stats.pegBalance}\n          userPEGBalance={userPEGBalance}\n          userPEGAllowance={userPEGAllowance}\n          peg={peg}\n        />\n        \n      </SidePanel>\n    </>\n  );\n}\n\nexport default Pool;\n","import React, { useState, useEffect } from 'react';\nimport { Card, useTheme } from '@geist-ui/react'\n\n// import Migrate from \"./Migrate\";\n// import {DollarPool4} from \"../../constants/contracts\";\n\ntype PoolProps = {peg: any};\n\nfunction EmptyPool({ peg }: PoolProps) {\n  const theme = useTheme();\n  \n  return (\n    <>\n    <Card type=\"lite\" style={{margin: '10px 0', opacity: '30%', background: theme.palette.accents_1}}>\n            <div style={{display: 'flex', flexDirection: 'row', justifyContent: 'space-between', flexBasis:'100%'}}>\n              <div>\n                <div>\n                {peg.symbol}/\n                </div>\n                <div style={{fontSize: '10px'}}>\n                  VTD\n                </div> \n              </div>\n                <div style={{flexBasis: '30%'}}/>\n                <div style={{flexBasis: '20%'}}>\n                <div >\n                Coming Soon\n                </div>\n                <div style={{fontSize: '12px'}}>\n                  \n                </div>    \n              </div>\n            </div>\n          </Card>\n    </>\n  );\n}\n\nexport default EmptyPool;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconLock\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {approve, deposit, withdraw} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {MAX_UINT256} from \"../../constants/values\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype WithdrawDepositProps = {\n  user: string\n  balance: BigNumber,\n  allowance: BigNumber,\n  stagedBalance: BigNumber,\n  status: number\n};\n\nfunction WithdrawDeposit({\n  user, balance, allowance, stagedBalance, status\n}: WithdrawDepositProps) {\n  const [depositAmount, setDepositAmount] = useState(new BigNumber(0));\n  const [withdrawAmount, setWithdrawAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Stage\" style={{ paddingTop: '2%'}}>\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\n        <div>\n          {/* total Issued */}\n          <div>\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"VTD\"}/>\n          </div>\n          {/* Deposit Døllar into DAO */}\n          <div style={{ paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    value={depositAmount}\n                    setter={setDepositAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setDepositAmount(balance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '6em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCirclePlus/> : <IconLock/>}\n                  label=\"Deposit\"\n                  onClick={() => {\n                    deposit(\n                      VTDD.addr,\n                      toBaseUnitBN(depositAmount, VTD.decimals),\n                    );\n                  }}\n                  disabled={status === 1 || !isPos(depositAmount) || depositAmount.isGreaterThan(balance)}\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Withdraw Døllar from DAO */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '7em'}}>\n                <>\n                  <BigNumberInput\n                    value={withdrawAmount}\n                    setter={setWithdrawAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setWithdrawAmount(stagedBalance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCircleMinus/> : <IconLock/>}\n                  label=\"Withdraw\"\n                  onClick={() => {\n                    withdraw(\n                      VTDD.addr,\n                      toBaseUnitBN(withdrawAmount, VTD.decimals),\n                    );\n                  }}\n                  disabled={status === 1 || !isPos(withdrawAmount) || withdrawAmount.isGreaterThan(stagedBalance)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        :\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total Issued */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"VTD\"}/>\n          </div>\n          <div style={{flexBasis: '35%'}}/>\n          {/* Approve DAO to spend Døllar */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus />}\n              label=\"Approve\"\n              onClick={() => {\n                approve(VTD.addr, VTDD.addr);\n              }}\n              disabled={user === ''}\n            />\n          </div>\n        </div>\n      }\n    </Box>\n  );\n}\n\nexport default WithdrawDeposit;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconCaution\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport { bond, unbondUnderlying } from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport { VTD, VTDD } from \"../../constants/tokens\";\nimport BigNumberInput from \"../common/BigNumberInput\";\nimport TextBlock from \"../common/TextBlock\";\n\ntype BondUnbondProps = {\n  staged: BigNumber,\n  bonded: BigNumber,\n  status: number,\n  lockup: number,\n};\n\nfunction BondUnbond({\n  staged, bonded, status, lockup\n}: BondUnbondProps) {\n  const [bondAmount, setBondAmount] = useState(new BigNumber(0));\n  const [unbondAmount, setUnbondAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading=\"Bond VTD\">\n      <div>\n        {/* Total bonded */}\n        <div style={{flexBasis: '16%'}}>\n          <BalanceBlock asset=\"Bonded\" balance={bonded} suffix={\"VTD\"}/>\n        </div>\n        {/* Total bonded */}\n        <div style={{flexBasis: '16%'}}>\n          <TextBlock label=\"Exit Lockup\" text={lockup === 0 ? \"\" : lockup === 1 ? \"1 epoch\" : `${lockup} epochs`}/>\n        </div>\n        {/* Bond Døllar within DAO */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  value={bondAmount}\n                  setter={setBondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setBondAmount(staged);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCirclePlus/> : <IconCaution/>}\n                label=\"Bond\"\n                onClick={() => {\n                  bond(\n                    VTDD.addr,\n                    toBaseUnitBN(bondAmount, VTD.decimals),\n                  );\n                }}\n                disabled={status === 2 || !isPos(bondAmount) || bondAmount.isGreaterThan(staged)}\n              />\n            </div>\n          </div>\n        </div>\n        <div style={{width: '2%'}}/>\n        {/* Unbond Døllar within DAO */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n      \n                  value={unbondAmount}\n                  setter={setUnbondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setUnbondAmount(bonded);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCircleMinus/> : <IconCaution/>}\n                label=\"Unbond\"\n                onClick={() => {\n                  unbondUnderlying(\n                    VTDD.addr,\n                    toBaseUnitBN(unbondAmount, VTD.decimals),\n                  );\n                }}\n                disabled={status === 2 || !isPos(unbondAmount) || unbondAmount.isGreaterThan(bonded)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> Bonding events will restart the lockup timer </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default BondUnbond;\n","import React from 'react';\nimport {VTD, VTDD, PeggedTokens} from \"../constants/tokens\";\nimport BigNumber from 'bignumber.js';\nimport {\n  getPoolBalanceOfBonded, getPoolBalanceOfClaimable,\n  getPoolBalanceOfRewarded,\n  getPoolBalanceOfStaged,\n  getPoolStatusOf, getPoolTotalBonded,\n  getTokenAllowance,\n  getTokenBalance,\n  getPoolFluidUntil,\n  getPoolDistributions,\n  getInstantaneousPrice,\n  getPoolTotalClaimable, getPoolTotalRewarded,\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged,\n  getEpoch, getEpochTime, getNextEpochTimestamp, getCurrentEpochLength, getAllRegulations\n} from '../utils/infura';\nimport { toTokenUnitsBN } from '../utils/number';\n\nexport type ContextType = {\n  regulations: IEpochs[],\n  epochData: EpochData,\n  updateEpochData: () => void,\n  updateRegulations: () => void,\n}\n\nexport const EpochContext = React.createContext<ContextType | null>(null);\n\nexport type EpochData = {\n  currentEpochLength: number,\n  nextEpochTimestamp: number,\n  previousEpochTimestamp: number,\n}\nexport type IEpochs = {\n    type: string;\n    epoch: number;\n    price: BigNumber;\n    momentumPrice?: BigNumber;\n    deltaRedeemable: BigNumber;\n    deltaDebt: BigNumber;\n    deltaBonded: BigNumber;\n  }\n  \nconst initialEpochData = {\n  currentEpochLength: 0,\n  nextEpochTimestamp: 0,\n  previousEpochTimestamp: 0,\n}\n\nexport const EpochStoreProvider: React.FC<React.ReactNode> = ({ children }) => {\n  const [regulations, setRegulations] = React.useState<IEpochs[]>([]);\n  const [epochData, setEpochData] = React.useState<EpochData>(initialEpochData);\n\n  const updateRegulations = async () => {\n    const [allRegulations] = await Promise.all([\n        getAllRegulations(VTDD.addr),\n      ]);\n\n      const _regs = allRegulations.map((result, index) => {\n        const data = result.data;\n        const epochtype = result.type;\n        return {\n            type: epochtype,\n            // @ts-ignore\n            epoch: Number(data.epoch),\n            // @ts-ignore\n            price: toTokenUnitsBN(data.price, VTD.decimals),\n            // @ts-ignore\n            momentumPrice: data.momentumPrice ? toTokenUnitsBN(data.momentumPrice, VTD.decimals) : new BigNumber(0),\n            // @ts-ignore\n            deltaRedeemable: toTokenUnitsBN(data.newRedeemable, VTD.decimals),\n            // @ts-ignore\n            deltaDebt: epochtype === 'INCREASE' ? toTokenUnitsBN(data.lessDebt, VTD.decimals) : toTokenUnitsBN(data.newDebt, VTD.decimals),\n            // @ts-ignore\n            deltaBonded: toTokenUnitsBN(data.newBonded, VTD.decimals)\n        }\n      })\n      setRegulations(_regs)\n    }\n    const updateEpochData = async () => {\n      const [nextEpochTimestampStr, currentEpochLengthStr] = await Promise.all([\n        getNextEpochTimestamp(VTDD.addr),\n        getCurrentEpochLength(VTDD.addr)\n      ]);\n      const nextEpochTimestamp = parseInt(nextEpochTimestampStr, 10);\n      const currentEpochLength= parseInt(currentEpochLengthStr, 10);\n      const previousEpochTimestamp = nextEpochTimestamp - currentEpochLength;\n\n      setEpochData({\n        currentEpochLength: currentEpochLength,\n        nextEpochTimestamp: nextEpochTimestamp,\n        previousEpochTimestamp: previousEpochTimestamp,\n      })\n    }\n\n  return (\n    <EpochContext.Provider value={{regulations, epochData, updateEpochData, updateRegulations}}>\n      {children}\n    </EpochContext.Provider>\n  );\n};\n\nexport default EpochStoreProvider;\n","import { Line } from 'react-chartjs-2';\n\nimport React, { useContext, useEffect } from 'react';\nimport BigNumber from 'bignumber.js';\n\nimport {Card, Grid, Divider, useMediaQuery, useTheme} from '@geist-ui/react'\nimport { StatsRowItem } from '../common/index';\nimport {formatBN} from \"../../utils/number\";\nimport {EpochContext, ContextType } from \"../../store/EpochStore\";\nimport {MainContext, ContextType as MainContextType } from \"../../store/MainStore\";\n\nimport { createVoidZero } from 'typescript';\n\nfunction fm(bn){\n  let num = (formatBN(bn, 2))\n  return num;\n}\n\nconst MomentumHeader = ({ user }: {user: string}) => {\n  const theme = useTheme();\n  const { peggedTokens } = React.useContext(MainContext) as MainContextType;\n  const { regulations, epochData, updateEpochData, updateRegulations} = React.useContext(EpochContext) as ContextType;\n\n  const downMD = useMediaQuery('md', { match: 'down' })\n  const upSM = useMediaQuery('sm', { match: 'up' })\n\n  let price =  new BigNumber(0);\n  let lastTwap = new BigNumber(0);\n  peggedTokens.filter((_peg) => {\n    if (_peg.symbol === 'DSD') {\n      price = _peg.stats.price\n      lastTwap = _peg.stats.lastTwap\n    }\n  })\n\n  const timeElapsed = Date.now()/1000 - epochData.previousEpochTimestamp;\n  const priceWeight = timeElapsed/epochData.currentEpochLength;\n  const estimatedTwap = priceWeight*price.toNumber() + (1-priceWeight)*lastTwap.toNumber();\n\n  // chart data\n  let regs = regulations.reverse().slice(-15)\n  const prices = regs.map((reg) => Number(reg.price.toNumber().toFixed(2)));\n  const momentumPrice = regs.map((reg) =>  reg.momentumPrice ? Number(reg.momentumPrice.toNumber().toFixed(2)): 0);\n  const labels = regs.map((x) => x.epoch)\n  // @ts-ignore\n  const nextChange = momentumPrice.length > 1 ? (momentumPrice[momentumPrice.length-1].toFixed(2) > estimatedTwap.toFixed(2) ? 'Contraction' : 'Expansion' ) : ''\n  const price_data = {\n      labels: labels,\n      datasets: [\n        {\n          label: 'Price ($)',\n          data: prices,\n          backgroundColor: 'rgba(75,192,192,0.4)',\n          borderColor: 'rgba(75,192,192,1)',\n          borderCapStyle: 'butt',\n          borderDash: [],\n          borderDashOffset: 0.0,\n          borderJoinStyle: 'miter',\n          pointBorderColor: 'rgba(75,192,192,1)',\n          pointBackgroundColor: '#fff',\n          pointBorderWidth: 1,\n          pointHoverRadius: 5,\n          pointHoverBackgroundColor: 'rgba(75,192,192,1)',\n          pointHoverBorderColor: 'rgba(220,220,220,1)',\n          pointHoverBorderWidth: 2,\n          pointRadius: 3,\n        },\n        {\n          label: 'Momentum ($)',\n          borderDash: [5,15],\n          backgroundColor: 'rgba(255,99,132,0.2)',\n      borderColor: 'rgba(255,99,132,1)',\n      borderWidth: 1,\n      hoverBackgroundColor: 'rgba(255,99,132,0.4)',\n      hoverBorderColor: 'rgba(255,99,132,1)',\n          data: momentumPrice\n        }\n      ]\n    };\n  const options = {\n    responsive: true,\n    layout: {\n        padding: {\n            left: 10,\n            right: 10,\n            top: 10,\n            bottom: 10\n        }\n    },\n    scales: {\n      yAxes: [{\n        display: downMD ? false :true,\n        position: 'right',\n        ticks: {\n          callback: function(label, index, labels) {\n              return '$' + label;\n          }\n      },\n      }],\n      xAxes: [{\n        display: downMD ? false :true,\n        ticks: {\n          callback: function(label, index, labels) {\n              return 'Ep ' + label;\n          }\n        }\n      }]\n    }\n  }\n\n  useEffect(() => {\n      updateRegulations();\n      updateEpochData();\n  },[user])\n  return (\n      <Card style={{display: 'flex'}}>\n        <Card type=\"lite\" shadow style={{fontSize: '12px', background: theme.palette.accents_3}}>\n          <Grid.Container gap={2} justify=\"center\">\n\n              <Grid xs={24} md={6}>\n               Momentum Price: <span style={{color: theme.palette.accents_6, fontSize: '12px'}}>{momentumPrice[momentumPrice.length -1]?.toFixed(2) || 0}DSD</span>\n              </Grid>\n              <Grid xs={24} md={6}>\n              Estimated TWAP: <span style={{color: theme.palette.accents_6, fontSize: '12px'}}>{estimatedTwap.toFixed(2)}DSD</span>\n              </Grid>\n              <Grid xs={24} md={6}>\n              Last TWAP Price: <span style={{color: theme.palette.accents_6, fontSize: '12px'}}>{fm(lastTwap)}DSD</span>\n              </Grid>\n              <Grid xs={24} md={6}>\n              Next Epoch: <span style={{color: theme.palette.accents_6, fontSize: '12px'}}>{nextChange}</span>\n              </Grid>\n              </Grid.Container>\n          </Card>\n          <Line height={upSM ? 55 : 400}\n                          legend={{display: false}}\n                          data={price_data}\n                          options={options}/> \n\n        \n      </Card>\n  )\n};\n\n\nexport default MomentumHeader;\n","import React, { useState, useEffect } from 'react';\nimport {\n  Box, IconCirclePlus, Timer,\n  Table, TableHeader, TableRow, TableCell, Text, Help\n} from '@aragon/ui';\n\nimport {Fieldset, Button, Divider, useTheme} from '@geist-ui/react'\nimport { SkipForward } from '@geist-ui/react-icons'\nimport {getEpoch, getEpochTime, getNextEpochTimestamp, getCurrentEpochLength\n} from '../../utils/infura';\nimport {advance} from '../../utils/web3';\nimport {VTDD} from \"../../constants/tokens\";\n// import AdvanceEpoch from './AdvanceEpoch';\n// import EpochPageHeader from \"./Header\";\nimport IconHeader from \"../common/IconHeader\";\n\ntype ButtonTypes =\n  | 'default'\n  | 'secondary'\n  | 'success'\n  | 'warning'\n  | 'error'\n  | 'abort'\n  | 'secondary-light'\n  | 'success-light'\n  | 'warning-light'\n  | 'error-light'\n\n\nfunction EpochDetail({ user }: {user: string}) {\n  const [epoch, setEpoch] = useState(0);\n  const [epochTime, setEpochTime] = useState(0);\n  const [nextEpochTimestamp, setNextEpochTimestamp] = useState(0);\n  const [currentEpochLength, setCurrentEpochLength] = useState(0);\n  const [advanceMode, setAdvanceMode] = useState<ButtonTypes>('success');\n  const theme = useTheme();\n  var endDate = nextEpochTimestamp*1000\n  var safetyEnd = (nextEpochTimestamp+91)\n\n  function secondsToHms(d) {\n    d = Number(d);\n    var h = Math.floor(d / 3600);\n    var m = Math.floor(d % 3600 / 60);\n    var s = Math.floor(d % 3600 % 60);\n\n    var hDisplay = h > 0 ? h + (h == 1 ? \" hour, \" : \" hours, \") : \"\";\n    var mDisplay = m > 0 ? m + (m == 1 ? \" minute, \" : \" minutes, \") : \"\";\n    var sDisplay = s > 0 ? s + (s == 1 ? \" second\" : \" seconds\") : \"\";\n    return hDisplay + mDisplay + sDisplay; \n  }\n\n  function calcAdvanceMode() {\n    const now = Date.now()/1000 \n    if (now < nextEpochTimestamp) {\n      setAdvanceMode('error');\n    } else {\n      setAdvanceMode('success');\n    }\n  }\n\n  var currentEpochLengthFmt = secondsToHms(currentEpochLength)\n\n  useEffect(() => {\n    let isCancelled = false;\n    async function updateUserInfo() {\n      const [epochStr, epochTimeStr, nextEpochTimestampStr, currentEpochLengthStr] = await Promise.all([\n        getEpoch(VTDD.addr),\n        getEpochTime(VTDD.addr),\n        getNextEpochTimestamp(VTDD.addr),\n        getCurrentEpochLength(VTDD.addr)\n\n      ]);\n\n      if (!isCancelled) {\n        setEpoch(parseInt(epochStr, 10));\n        setEpochTime(parseInt(epochTimeStr, 10));\n        setNextEpochTimestamp(parseInt(nextEpochTimestampStr, 10));\n        setCurrentEpochLength(parseInt(currentEpochLengthStr, 10));\n        calcAdvanceMode();\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 1200);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <Fieldset style={{marginTop: '10px'}}>\n      <Divider y={0} />\n      <Fieldset.Content>\n        <Fieldset.Subtitle>Current Epoch:  <span style={{color: theme.palette.accents_4}}>{epoch}</span></Fieldset.Subtitle>\n        <Fieldset.Subtitle>Epoch Length: <span style={{color: theme.palette.accents_4}}>{currentEpochLengthFmt}</span></Fieldset.Subtitle>\n        <Fieldset.Subtitle>Next Epoch In: </Fieldset.Subtitle>\n        <Timer showEmpty={true} format='hms' end={endDate} /> \n      </Fieldset.Content>\n      <Fieldset.Footer>\n        <Fieldset.Footer.Status>\n          <Text type=\"error\">Advance the Epoch for reward:</Text>\n        </Fieldset.Footer.Status>\n        <Fieldset.Footer.Actions>\n          <Button icon={<SkipForward />} auto size=\"mini\" type={advanceMode}\n               onClick={() => {\n                advance(VTDD.addr);\n              }}\n          >Advance</Button>\n        </Fieldset.Footer.Actions>\n      </Fieldset.Footer>\n    </Fieldset>\n  );\n}\n\nexport default EpochDetail;\n","import React, { useEffect, useState } from 'react'\nimport { useTheme, Link } from '@geist-ui/react'\nimport _JSXStyle from \"styled-jsx/style\"\nimport { X } from '@geist-ui/react-icons'\n\n\ninterface Props {\n  visible: boolean\n  onClose?: () => void\n}\n\nconst Overlay: React.FC<React.PropsWithChildren<Props>> = ({\n  visible: customVisible,\n  onClose,\n  children,\n}) => {\n  const theme = useTheme()\n  const [visible, setVisible] = useState<boolean>(false)\n\n  useEffect(() => {\n    if (customVisible !== undefined) {\n      setVisible(customVisible)\n    }\n  }, [customVisible])\n\n  const clickHandler = (e) => {\n    setVisible(false)\n    onClose && onClose()\n    e.preventDefault()\n\n  }\n  return (\n    <section className={visible ? 'active' : ''}>\n      <Link className='overlayClose' onClick={clickHandler} style={{position: 'fixed', right: '20px', top: '10px', zIndex: 5001}}><X /></Link>\n      {children}\n      <style jsx>{`\n        section {\n          position: fixed;\n          width: 100vw;\n          height: 100vh;\n          background-color: ${theme.palette.background};\n          z-index: 5000;\n          top: -5000px;\n          left: -5000px;\n          display: none;\n        }\n\n        .active {\n          top: 0;\n          left: 0;\n          bottom: 0;\n          display: block;\n        }\n      `}</style>\n    </section>\n  )\n}\n\nexport default Overlay\n","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport BigNumber from 'bignumber.js';\nimport {\n  getBalanceBonded,\n  getBalanceOfStaged, getFluidUntil, getLockedUntil,\n  getStatusOf, getTokenAllowance,\n  getTokenBalance, getTokenTotalSupply,\n} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport { toTokenUnitsBN } from '../../utils/number';\n\nimport AccountPageHeader from \"./Header\";\nimport Pool from \"../Pool\";\nimport EmptyPool from \"../Pool/EmptyPool\";\n\nimport WithdrawDeposit from \"./WithdrawDeposit\";\nimport BondUnbond from \"./BondUnbond\";\nimport MomentumHeader from \"./MomentumHeader\";\n\nimport EpochDetail from \"../EpochDetail\";\n\nimport { SidePanel} from '@aragon/ui'\nimport Overlay from '../layout/overlay'\nimport { useTheme, Grid, Card, Button, Divider, Page } from '@geist-ui/react'\n\nimport { MainContext, ContextType } from \"../../store/MainStore\";\n\nfunction Wallet({ user }: {user: string}) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n  const theme = useTheme();\n  const [sidePanelOpened, setSidePanelOpened] = useState(false)\n  const [userVTDBalance, setUserVTDBalance] = useState(new BigNumber(0));\n  const [userVTDAllowance, setUserVTDAllowance] = useState(new BigNumber(0));\n  const [userVTDSBalance, setUserVTDSBalance] = useState(new BigNumber(0));\n  const [totalVTDSSupply, setTotalVTDSSupply] = useState(new BigNumber(0));\n  const [userStagedBalance, setUserStagedBalance] = useState(new BigNumber(0));\n  const [userBondedBalance, setUserBondedBalance] = useState(new BigNumber(0));\n  const [userStatus, setUserStatus] = useState(0);\n  const [userStatusUnlocked, setUserStatusUnlocked] = useState(0);\n  const [lockup, setLockup] = useState(0);\n  const [selectedTab, setSelectedTab] = useState(0)\n  \n  const { peggedTokens, updatePools } = React.useContext(MainContext) as ContextType;\n\n  //Update User balances\n  useEffect(() => {\n    if (user === '') {\n      setUserVTDBalance(new BigNumber(0));\n      setUserVTDAllowance(new BigNumber(0));\n      setUserVTDSBalance(new BigNumber(0));\n      setTotalVTDSSupply(new BigNumber(0));\n      setUserStagedBalance(new BigNumber(0));\n      setUserBondedBalance(new BigNumber(0));\n      setUserStatus(0);\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [\n        vtdBalance, vtdAllowance, vtdsBalance, vtdsSupply, stagedBalance, bondedBalance, status,\n        fluidUntilStr, lockedUntilStr\n      ] = await Promise.all([\n        getTokenBalance(VTD.addr, user),\n        getTokenAllowance(VTD.addr, user, VTDD.addr),\n        getTokenBalance(VTDD.addr, user),\n        getTokenTotalSupply(VTDD.addr),\n        getBalanceOfStaged(VTDD.addr, user),\n        getBalanceBonded(VTDD.addr, user),\n        getStatusOf(VTDD.addr, user),\n\n        getFluidUntil(VTDD.addr, user),\n        getLockedUntil(VTDD.addr, user),\n      ]);\n\n      const userVTDBalance = toTokenUnitsBN(vtdBalance, VTD.decimals);\n      const userVTDSBalance = toTokenUnitsBN(vtdsBalance, VTDD.decimals);\n      const totalVTDSSupply = toTokenUnitsBN(vtdsSupply, VTDD.decimals);\n      const userStagedBalance = toTokenUnitsBN(stagedBalance, VTDD.decimals);\n      const userBondedBalance = toTokenUnitsBN(bondedBalance, VTDD.decimals);\n      const userStatus = parseInt(status, 10);\n      const fluidUntil = parseInt(fluidUntilStr, 10);\n      const lockedUntil = parseInt(lockedUntilStr, 10);\n\n      if (!isCancelled) {\n        setUserVTDBalance(new BigNumber(userVTDBalance));\n        setUserVTDAllowance(new BigNumber(vtdAllowance));\n        setUserVTDSBalance(new BigNumber(userVTDSBalance));\n        setTotalVTDSSupply(new BigNumber(totalVTDSSupply));\n        setUserStagedBalance(new BigNumber(userStagedBalance));\n        setUserBondedBalance(new BigNumber(userBondedBalance));\n        setUserStatus(userStatus);\n        setUserStatusUnlocked(Math.max(fluidUntil, lockedUntil))\n        // setLockup(poolAddress === DollarPool4 ? DAO_EXIT_LOCKUP_EPOCHS : 1);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 10000);\n    updatePools();\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n\n  return (\n    <>\n    <Grid.Container gap={2} justify=\"center\">\n      <Grid xs={24} md={18}>\n         <MomentumHeader user={user}/> \n         <Card type=\"lite\" style={{margin: '10px 0', background: `${theme.palette.accents_2}`}}>\n            DAO\n            <Divider y={0} />\n            <AccountPageHeader\n              accountVTDBalance={userVTDBalance}\n              accountVTDSBalance={userVTDSBalance}\n              totalVTDSSupply={totalVTDSSupply}\n              accountStagedBalance={userStagedBalance}\n              accountBondedBalance={userBondedBalance}\n              accountStatus={userStatus}\n              unlocked={userStatusUnlocked}\n            />\n            <Divider y={0} />\n\n                  <Button\n                  // icon={<IconPlus />}\n                  onClick={() => setSidePanelOpened(true)}\n                >Bond/Unbond Tokens </Button>\n\n          </Card>\n\n          {peggedTokens.map((peg, index) => \n            peg.enabled ? <Pool user={user} peg={peg} /> : <EmptyPool peg={peg} />\n          )}\n      </Grid>\n      <Grid xs={24} md={6}>\n      <EpochDetail user={user}/>\n      \n      </Grid>\n    </Grid.Container>\n            \n      \n      <Overlay\n        visible={sidePanelOpened}\n        onClose={() => setSidePanelOpened(false)}\n      >\n        <Page>\n    \n            <WithdrawDeposit\n            user={user}\n            balance={userVTDBalance}\n            allowance={userVTDAllowance}\n            stagedBalance={userStagedBalance}\n            status={userStatus}\n          />\n    \n          <BondUnbond\n            staged={userStagedBalance}\n            bonded={userBondedBalance}\n            status={userStatus}\n            lockup={lockup}\n          />\n\n        \n      </Page>\n      </Overlay>\n    </>\n  );\n}\n\nexport default Wallet;\n","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport {Grid} from '@geist-ui/react'\nimport BigNumber from 'bignumber.js';\nimport {\n  getBalanceBonded,\n  getBalanceOfStaged, getFluidUntil, getLockedUntil,\n  getStatusOf, getTokenAllowance,\n  getTokenBalance,\n  getCouponPremium,\n  getPoolTotalClaimable, getPoolTotalRewarded,\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged,\n  getEpoch, getEpochTime, getNextEpochTimestamp, getCurrentEpochLength,\n} from '../../utils/infura';\n\nimport {formatBN, ownership} from \"../../utils/number\";\n\nimport {VTD, VTDD} from \"../../constants/tokens\";\n\nimport {BalanceBlock, StatsRowItem} from \"../common/index\";\n\nimport {DAO_EXIT_LOCKUP_EPOCHS, GOVERNANCE_PERIOD, POOL_EXIT_LOCKUP_EPOCHS} from \"../../constants/values\";\nimport { toTokenUnitsBN } from '../../utils/number';\n\nimport { MainContext, ContextType, IPeggedToken} from \"../../store/MainStore\";\n\nconst ONE_COUPON = new BigNumber(10).pow(18);\n\nfunction Stats({ user }: {user: string}) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\n  const [epoch, setEpoch] = useState(0);\n  const [epochTime, setEpochTime] = useState(0);\n  const [nextEpochTimestamp, setNextEpochTimestamp] = useState(0);\n  const [currentEpochLength, setCurrentEpochLength] = useState(0);\n  const [_pegs, setPegs] = useState([]);\n  const { peggedTokens, totals, updatePools, updateTotals} = React.useContext(MainContext) as ContextType;\n  \n  let price =  new BigNumber(0);\n  let lastTwap = new BigNumber(0);\n  peggedTokens.filter((_peg) => {\n    if (_peg.symbol === 'ETH') {\n      price = _peg.stats.price.multipliedBy(_peg.usdcPrice)\n      lastTwap = _peg.stats.lastTwap.multipliedBy(_peg.usdcPrice)\n    }\n  })\n  \n  const marketcap = totals.totalSupply.multipliedBy(price);\n  const currentEpochLengthFmt = secondsToM(currentEpochLength);\n  const infinity = '\\u221E'; \n\n  function secondsToM(d) {\n    d = Number(d);\n    var m = Math.floor(d / 60);\n    return m;\n  }\n\n  function fm(bn){\n    let num = (formatBN(bn, 2));\n    return num;\n  }\n\n  function inUsdc(amount, rate) {\n    return amount.multipliedBy(rate)\n  }\n\n  function totalYield() {\n      var delta = (price.toNumber()-1)/12\n      delta = delta > 0.1 ? 0.1 : delta\n      delta = epoch > 36 ? delta : 0.06\n      return (totals.totalSupply.toNumber())*delta\n  }\n\n  function daoYield(){\n    return (totalYield()*0.6/totals.totalBonded.toNumber()*100).toFixed(3)\n  }\n\n  function compound(rate, days) {\n      let epochs_per_day = 24*60/currentEpochLengthFmt\n      let times = days*epochs_per_day\n      let real_rate =((1+rate/100)**times -1)*100 \n      return real_rate < 5000000 ? real_rate.toFixed(3) : infinity\n  }\n\n  function LPYield(share, peg){\n    const supply = peg.stats.vtdBalance;\n    const vtdPrice = peg.stats.price.multipliedBy(peg.usdcPrice)\n    const pegValue = peg.stats.pegBalance.multipliedBy(peg.usdcPrice)\n    let lp_size = supply.multipliedBy(vtdPrice).multipliedBy(2)\n    return (totalYield()*price.toNumber()*0.4/lp_size.toNumber()*share.toNumber()).toFixed(3)\n  }\n\n  function calcLinearYield(rate, days) {\n    let epochs_per_day = 24*60/currentEpochLengthFmt\n    let times = days*epochs_per_day\n    return (rate*times).toFixed(3)\n  }\n  //Update User balances\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n        const [epochStr, epochTimeStr, nextEpochTimestampStr, currentEpochLengthStr] = await Promise.all([\n            getEpoch(VTDD.addr),\n            getEpochTime(VTDD.addr),\n            getNextEpochTimestamp(VTDD.addr),\n            getCurrentEpochLength(VTDD.addr),\n        ]);\n\n        if (!isCancelled) {\n            setEpoch(parseInt(epochStr, 10));\n            setEpochTime(parseInt(epochTimeStr, 10));\n            setNextEpochTimestamp(parseInt(nextEpochTimestampStr, 10));\n            setCurrentEpochLength(parseInt(currentEpochLengthStr, 10));\n\n            if (totals.totalDebt.isGreaterThan(ONE_COUPON)) {\n            const couponPremiumStr = await getCouponPremium(VTDD.addr, ONE_COUPON)\n            setCouponPremium(toTokenUnitsBN(couponPremiumStr, VTD.decimals));\n            } else {\n            setCouponPremium(new BigNumber(0));\n            }\n            // setLockup(poolAddress === DollarPool4 ? DAO_EXIT_LOCKUP_EPOCHS : 1);\n            \n        }\n    }\n    updateUserInfo(); \n    updatePools(); \n    updateTotals();\n  }, [user]);\n\n\n  return (\n    <>\n    <Grid.Container gap={5} justify=\"center\">\n        <Grid xs={12} sm={6}>\n        <BalanceBlock asset=\"Epoch Length\" balance={currentEpochLengthFmt} suffix={\" min\"}/>\n\n        </Grid>\n        <Grid xs={12} sm={6}>\n        <BalanceBlock asset=\"Epoch #\" balance={epoch}  suffix={\"\"}/>\n\n        </Grid>\n        <Grid xs={12} sm={6}>\n        <BalanceBlock asset=\"Spot Price (USD)\" balance={price} suffix={\"\"} />\n        </Grid>\n        <Grid xs={12} sm={6}>\n        <BalanceBlock asset=\"Last TWAP Price (USD)\" balance={lastTwap} suffix={\"\"} />\n        </Grid>\n\n    <Grid xs={24} sm={12}>\n\n      <StatsRowItem asset=\"Market Cap ($)\" value={fm(marketcap)} suffix={\" USD\"}/>\n      <StatsRowItem asset=\"Tokens\" value={fm(totals.totalSupply)}  suffix={\"\"}/>\n    </Grid>\n    <Grid xs={24} sm={12}>\n      <StatsRowItem asset=\"Coupon\" value={fm(totals.totalCoupon)} suffix={\"\"} />\n      <StatsRowItem asset=\"Coupon Premium\" value={fm(couponPremium)}  suffix={\"%\"}/>\n    </Grid>\n    <Grid xs={24} sm={12}>\n      <div style={{ fontSize: 14, lineHeight: 2}}>Stats</div>\n        <StatsRowItem asset=\"Circulating Supply\" value={fm(totals.circulating)}  suffix={\"\"}/>\n        <StatsRowItem asset=\"DAO Staged\" value={fm(totals.totalStaged)} suffix={\"\"} />\n        <StatsRowItem asset=\"DAO Bonded\" value={fm(totals.totalBonded)}  suffix={\"\"}/>\n    </Grid>\n    <Grid xs={24} sm={12}>\n          <div style={{ fontSize: 14, lineHeight: 2}}>DAO Yield</div>\n\n      <StatsRowItem asset=\"Day Yield\" value={compound(daoYield(), 1)} suffix={\"%\"}/>\n      <StatsRowItem asset=\"Month Yield\" value={compound(daoYield(),30)}  suffix={\"%\"}/>\n      <StatsRowItem asset=\"Annual Yield\" value={compound(daoYield(), 365)} suffix={\"%\"} />\n    </Grid>\n\n     {\n    //  @ts-ignore\n    peggedTokens.map((peggedToken) =>\n    //@ts-ignore\n      peggedToken.hasOwnProperty('stats') && peggedToken.enabled ?\n      <Grid xs={24} sm={12}>\n        <div style={{ fontSize: 14, lineHeight: 2}}>{peggedToken.symbol} Pool: <small>{`1 ${peggedToken.symbol} = ${peggedToken.usdcPrice.toFixed(2)} USD`}</small></div>\n        <StatsRowItem asset=\"Price\" value={fm(peggedToken.stats.pegBalance.dividedBy(peggedToken.stats.vtdBalance))} suffix={peggedToken.symbol}/>\n        <StatsRowItem asset=\"VTD Bonded\" value={fm(peggedToken.stats.vtdBalance)} suffix={\"VTD\"}/>\n        <StatsRowItem asset={`${peggedToken.symbol} Bonded`} value={fm(peggedToken.stats.pegBalance)} suffix={peggedToken.symbol}/>\n        <div style={{marginTop: '10px', marginLeft: '20px'}}>\n          <StatsRowItem asset=\"LP Rewarded\" value={fm(peggedToken.stats.poolReward)} suffix={\"\"} />\n          <StatsRowItem asset=\"LP Claimable\" value={fm(peggedToken.stats.poolClaimable)} suffix={\"\"}/>\n          <StatsRowItem asset=\"% LP Rewards\" value={fm(ownership(peggedToken.stats.vtdBalance, totals.totalLPBonded))} suffix={\"%\"}/>\n\n          <div style={{ fontSize: 14, lineHeight: 2}}>LP Yield (in USD)</div>\n\n          <StatsRowItem asset=\"Day Yield\" value={calcLinearYield(LPYield(ownership(peggedToken.stats.vtdBalance,totals.totalLPBonded), peggedToken),1)} suffix={\"%\"}/>\n          <StatsRowItem asset=\"Month Yield\" value={calcLinearYield(LPYield(ownership(peggedToken.stats.vtdBalance,totals.totalLPBonded), peggedToken),30)}  suffix={\"%\"}/>\n          <StatsRowItem asset=\"Annual Yield\" value={calcLinearYield(LPYield(ownership(peggedToken.stats.vtdBalance,totals.totalLPBonded), peggedToken), 365)} suffix={\"%\"} />\n        </div>\n        </Grid> : <></>\n     )}\n          <Grid xs={24} sm={12}>\n\n                <div style={{ fontSize: 14, lineHeight: 2}}>Info:</div>\n\n              <StatsRowItem asset=\"DAO Lockup\" value={DAO_EXIT_LOCKUP_EPOCHS} suffix={\"\"}/>\n              <StatsRowItem asset=\"LP Lockup\" value={POOL_EXIT_LOCKUP_EPOCHS}  suffix={\"\"}/>\n              <StatsRowItem asset=\"Governance Period\" value={GOVERNANCE_PERIOD} suffix={\"\"} />\n          </Grid>\n          <Grid xs={24} sm={12}>\n\n                <div style={{ fontSize: 14, lineHeight: 2}}>Current Settings:</div>\n\n                <StatsRowItem asset=\"Max Expansion\" value={10} suffix={\"%\"}/>\n                <StatsRowItem asset=\"Advance Reward\" value='Reverse Dutch Auction'  suffix={\"\"}/>\n                <StatsRowItem asset=\"Current Pegged Token\" value={'DSD'} suffix={\"\"} />\n          </Grid>\n    </Grid.Container>\n    </>\n  );\n}\n\nexport default Stats;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\nimport { BalanceBlock } from \"../common\";\nimport {ownership} from \"../../utils/number\";\n\ntype CouponMarketHeaderProps = {\n  debt: BigNumber,\n  supply: BigNumber,\n  coupons: BigNumber,\n  premium: BigNumber,\n  redeemable: BigNumber,\n};\n\nconst CouponMarketHeader = ({\n  debt, supply, coupons, premium, redeemable\n}: CouponMarketHeaderProps) => (\n  <div style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Debt Ratio\" balance={ownership(debt, supply)} suffix={\"%\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Total Debt\" balance={debt} suffix={\"VTD\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Coupons\" balance={coupons} />\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Premium\" balance={premium.multipliedBy(100)} suffix={\"%\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset=\"Redeemable\" balance={redeemable}/>\n    </div>\n  </div>\n);\n\n\nexport default CouponMarketHeader;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton, PriceSection,\n} from '../common/index';\nimport {approve, purchaseCoupons} from '../../utils/web3';\n\nimport {isPos, toBaseUnitBN, toTokenUnitsBN} from '../../utils/number';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {MAX_UINT256} from \"../../constants/values\";\nimport {getCouponPremium} from \"../../utils/infura\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype PurchaseCouponsProps = {\n  user: string,\n  allowance: BigNumber,\n  balance: BigNumber,\n  debt: BigNumber,\n};\n\nfunction PurchaseCoupons({\n  user, balance, allowance, debt,\n}: PurchaseCouponsProps) {\n  const [purchaseAmount, setPurchaseAmount] = useState(new BigNumber(0));\n  const [premium, setPremium] = useState(new BigNumber(0));\n\n  const updatePremium = async (purchaseAmount) => {\n    if (purchaseAmount.lte(new BigNumber(0))) {\n      setPremium(new BigNumber(0));\n      return;\n    }\n    const purchaseAmountBase = toBaseUnitBN(purchaseAmount, VTD.decimals);\n    const premium = await getCouponPremium(VTDD.addr, purchaseAmountBase)\n    const premiumFormatted = toTokenUnitsBN(premium, VTD.decimals);\n    setPremium(premiumFormatted);\n  };\n\n  return (\n    <Box heading=\"Purchase\">\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* User balance */}\n          <div style={{flexBasis: '30%'}}>\n            <BalanceBlock asset={`Balance`} balance={balance} suffix={\" VTD\"}/>\n          </div>\n          <div style={{flexBasis: '38%'}}/>\n          {/* Purchase coupons */}\n          <div style={{flexBasis: '32%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"VTD\"\n                    value={purchaseAmount}\n                    setter={(value) => {\n                      setPurchaseAmount(value);\n                      isPos(value) ? updatePremium(value) : updatePremium(new BigNumber(0));\n                    }}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      const maxPurchaseAmount = debt.comparedTo(balance) > 0 ? balance : debt\n                      setPurchaseAmount(maxPurchaseAmount);\n                      updatePremium(maxPurchaseAmount);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '6em'}}>\n                <Button\n                  wide\n                  icon={<IconCircleMinus/>}\n                  label=\"Burn\"\n                  onClick={() => {\n                    purchaseCoupons(\n                      VTDD.addr,\n                      toBaseUnitBN(purchaseAmount, VTD.decimals),\n                    );\n                  }}\n                  disabled={user === '' || debt.isZero() || balance.isZero() || !isPos(purchaseAmount)}\n                />\n              </div>\n            </div>\n            <PriceSection label=\"Coupons \" amt={purchaseAmount.plus(premium)}/>\n          </div>\n        </div>\n        :\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* User balance */}\n          <div style={{flexBasis: '30%'}}>\n            <BalanceBlock asset={`Døllar Balance`} balance={balance}/>\n          </div>\n          <div style={{flexBasis: '40%'}}/>\n          {/* Approve DAO to spend Døllar */}\n          <div style={{flexBasis: '30%', paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus/>}\n              label=\"Approve\"\n              onClick={() => {\n                approve(VTD.addr, VTDD.addr);\n              }}\n              disabled={user === ''}\n            />\n          </div>\n        </div>\n      }\n    </Box>\n  );\n}\n\nexport default PurchaseCoupons;\n","import React, {useEffect, useState} from 'react';\nimport {\n  DataView, Button, IconCirclePlus\n} from '@aragon/ui';\n\nimport {getBatchBalanceOfCoupons, getBatchCouponsExpiration, getCouponEpochs} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {formatBN, toBaseUnitBN, toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport {redeemCoupons} from \"../../utils/web3\";\n\ntype PurchaseHistoryProps = {\n  user: string,\n  hideRedeemed: boolean,\n  totalRedeemable: BigNumber\n};\n\nfunction PurchaseHistory({\n  user, hideRedeemed, totalRedeemable\n}: PurchaseHistoryProps) {\n  const [epochs, setEpochs] = useState([]);\n  const [page, setPage] = useState(0)\n  const [initialized, setInitialized] = useState(false)\n\n  //Update User balances\n  useEffect(() => {\n    if (user === '') return;\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const epochsFromEvents = await getCouponEpochs(VTDD.addr, user);\n      const epochNumbers = epochsFromEvents.map(e => parseInt(e.epoch));\n      const balanceOfCoupons = await getBatchBalanceOfCoupons(VTDD.addr, user, epochNumbers);\n      const couponsExpirations = await getBatchCouponsExpiration(VTDD.addr, epochNumbers);\n\n      const couponEpochs = epochsFromEvents.map((epoch, i) => {\n        epoch.balance = new BigNumber(balanceOfCoupons[i]);\n        epoch.expiration = couponsExpirations[i];\n        return epoch;\n      });\n\n      if (!isCancelled) {\n        // @ts-ignore\n        setEpochs(couponEpochs);\n        setInitialized(true);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user, totalRedeemable]);\n\n  return (\n    <DataView\n      fields={['Epoch', 'Purchased', 'Balance', 'Expires', '']}\n      status={ initialized ? 'default' : 'loading' }\n      // @ts-ignore\n      entries={hideRedeemed ? epochs.filter((epoch) => !epoch.balance.isZero()) : epochs}\n      entriesPerPage={10}\n      page={page}\n      onPageChange={setPage}\n      renderEntry={(epoch) => [\n        epoch.epoch.toString(),\n        formatBN(toTokenUnitsBN(epoch.coupons, VTD.decimals), 2),\n        formatBN(toTokenUnitsBN(epoch.balance, VTD.decimals), 2),\n        epoch.expiration.toString(),\n        <Button\n          icon={<IconCirclePlus />}\n          label=\"Redeem\"\n          onClick={() => redeemCoupons(\n            VTDD.addr,\n            epoch.epoch,\n            epoch.balance.isGreaterThan(toBaseUnitBN(totalRedeemable, VTD.decimals))\n              ? toBaseUnitBN(totalRedeemable, VTD.decimals)\n              : epoch.balance\n          )}\n          disabled={epoch.balance.isZero()}\n        />\n      ]}\n    />\n  );\n}\n\nexport default PurchaseHistory;\n","/**\n * Get value by key\n * @param {string} key\n * @param {string} defaultValue\n */\nexport function getPreference(key:string, defaultValue:string): string {\n  return localStorage.getItem(key) || defaultValue;\n}\n\n/**\n * store value to storage\n * @param {string} key\n * @param {string} value\n */\nexport function storePreference(key:string, value:string):void {\n  localStorage.setItem(key, value);\n}\n","import React, { useState } from 'react';\nimport { Modal, Button, useTheme } from '@aragon/ui';\nimport { getPreference, storePreference } from \"../../utils/storage\";\nimport { COUPON_EXPIRATION } from \"../../constants/values\";\n\nfunction ModalWarning() {\n  const storedShowWarning = getPreference('showCouponWarning', '1');\n  const [showWarning, setShowWarning] = useState(storedShowWarning === '1');\n  const theme = useTheme();\n\n  return (\n    <Modal visible={showWarning} closeButton={false}>\n      <div style={{ width: '100%' }}>\n        <div style={{ fontSize: 24, padding: 3, color: theme.warning }}>\n          Warning\n        </div>\n\n        <div style={{\n          marginLeft: '3%',\n          fontSize: 16,\n          padding: 5\n        }}>\n          <div>\n            By purchasing coupons the buyer incurs significant risk of loss.\n            Coupons will only become redeemable during the next supply\n            expansion. Each expansionary epoch, a tranche of rewards are\n            reserved for coupon redemptions by the DAO. At that time, the\n            redemption process is first come, first served. Coupon redemption\n            is not guaranteed.\n          </div>\n\n          <div style={{\n            padding: 10,\n            textAlign: 'center',\n            color: theme.warningSurfaceContent\n          }}>\n            Coupons will expire worthless if not redeemed\n            within {COUPON_EXPIRATION} epochs.\n          </div>\n        </div>\n\n        <div style={{ textAlign: 'right' }}>\n          <Button\n            label={'I understand'}\n            onClick={() => {\n              storePreference('showCouponWarning', '0');\n              setShowWarning(false);\n            }}\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default ModalWarning;\n","import React, { useState, useEffect } from 'react';\nimport { Header, Box } from '@aragon/ui';\nimport { useParams } from 'react-router-dom';\n\nimport {\n  getCouponPremium,\n  getTokenAllowance,\n  getTokenBalance,\n  getTokenTotalSupply, getTotalCoupons,\n  getTotalDebt, getTotalRedeemable,\n} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport CouponMarketHeader from \"./Header\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport PurchaseCoupons from \"./PurchaseCoupons\";\nimport PurchaseHistory from \"./PurchaseHistory\";\nimport ModalWarning from \"./ModalWarning\";\nimport IconHeader from \"../common/IconHeader\";\nimport {getPreference, storePreference} from \"../../utils/storage\";\nimport {CheckBox} from \"../common\";\n\nconst ONE_COUPON = new BigNumber(10).pow(18);\n\nfunction CouponMarket({ user }: {user: string}) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n\n  const storedHideRedeemed = getPreference('hideRedeemedCoupons', '0');\n\n  const [balance, setBalance] = useState(new BigNumber(0));\n  const [allowance, setAllowance] = useState(new BigNumber(0));\n  const [supply, setSupply] = useState(new BigNumber(0));\n  const [coupons, setCoupons] = useState(new BigNumber(0));\n  const [redeemable, setRedeemable] = useState(new BigNumber(0));\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\n  const [debt, setDebt] = useState(new BigNumber(0));\n  const [hideRedeemed, setHideRedeemed] = useState(storedHideRedeemed === '1');\n\n  useEffect(() => {\n    if (user === '') {\n      setBalance(new BigNumber(0));\n      setAllowance(new BigNumber(0));\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [balanceStr, allowanceStr] = await Promise.all([\n        getTokenBalance(VTD.addr, user),\n        getTokenAllowance(VTD.addr, user, VTDD.addr),\n      ]);\n\n      const userBalance = toTokenUnitsBN(balanceStr, VTD.decimals);\n\n      if (!isCancelled) {\n        setBalance(new BigNumber(userBalance));\n        setAllowance(new BigNumber(allowanceStr));\n        (new BigNumber(allowanceStr));\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [supplyStr, debtStr, couponsStr, redeemableStr] = await Promise.all([\n        getTokenTotalSupply(VTD.addr),\n        getTotalDebt(VTDD.addr),\n        getTotalCoupons(VTDD.addr),\n        getTotalRedeemable(VTDD.addr),\n      ]);\n\n      const totalSupply = toTokenUnitsBN(supplyStr, VTD.decimals);\n      const totalDebt = toTokenUnitsBN(debtStr, VTD.decimals);\n      const totalCoupons = toTokenUnitsBN(couponsStr, VTD.decimals);\n      const totalRedeemable = toTokenUnitsBN(redeemableStr, VTD.decimals);\n\n      if (!isCancelled) {\n        setSupply(new BigNumber(totalSupply));\n        setDebt(new BigNumber(totalDebt));\n        setCoupons(new BigNumber(totalCoupons));\n        setRedeemable(new BigNumber(totalRedeemable));\n\n        if (totalDebt.isGreaterThan(new BigNumber(1))) {\n          const couponPremiumStr = await getCouponPremium(VTDD.addr, ONE_COUPON)\n          setCouponPremium(toTokenUnitsBN(couponPremiumStr, VTD.decimals));\n        } else {\n          setCouponPremium(new BigNumber(0));\n        }\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <ModalWarning/>\n\n      <Box>\n\n      <CouponMarketHeader\n        debt={debt}\n        supply={supply}\n        coupons={coupons}\n        premium={couponPremium}\n        redeemable={redeemable}\n      />\n      </Box>\n\n      <h5 style={{\n                    fontSize: '10px',\n                    margin: '10px 0'\n                  }}\n                  >Purchase Coupons</h5>\n\n      <PurchaseCoupons\n        user={user}\n        allowance={allowance}\n        balance={balance}\n        debt={debt}\n      />\n\n      <div style={{ display: 'flex' }}>\n        <h5 style={{\n                    fontSize: '10px',\n                    margin: '10px 0'\n                  }}\n                  >Your Coupons</h5>\n        <div style={{ marginLeft: 'auto', alignSelf: 'flex-end' }}>\n          <CheckBox\n            text=\"Hide Redeemed\"\n            onCheck={(checked) => {\n              storePreference('hideRedeemedCoupons', checked ? '1' : '0');\n              setHideRedeemed(checked);\n            }}\n            checked={hideRedeemed}\n          />\n        </div>\n      </div>\n\n      <PurchaseHistory\n        user={user}\n        hideRedeemed={hideRedeemed}\n        totalRedeemable={redeemable}\n      />\n    </>\n  );\n}\n\nexport default CouponMarket;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\nimport {AddressBlock, BalanceBlock} from \"../common\";\nimport TextBlock from \"../common/TextBlock\";\nimport {ownership} from \"../../utils/number\";\nimport {GOVERNANCE_PROPOSAL_THRESHOLD} from \"../../constants/values\";\n\ntype GovernanceHeaderProps = {\n  stake: BigNumber,\n  totalStake: BigNumber,\n  accountStatus: number,\n  implementation: string\n};\n\nconst STATUS_MAP = [\"Frozen\", \"Fluid\", \"Locked\"];\n\nconst GovernanceHeader = ({\n  stake, totalStake, accountStatus, implementation\n}: GovernanceHeaderProps) => (\n  <div style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n    <div style={{ flexBasis: '25%' }}>\n      <BalanceBlock asset=\"DAO Ownership\" balance={ownership(stake, totalStake)} suffix=\"%\" />\n    </div>\n    <div style={{ flexBasis: '25%' }}>\n      <BalanceBlock asset=\"Proposal Threshold\" balance={GOVERNANCE_PROPOSAL_THRESHOLD.multipliedBy(100)} suffix=\"%\" />\n    </div>\n    <div style={{ flexBasis: '25%' }}>\n      <TextBlock label=\"Status\" text={STATUS_MAP[accountStatus]}/>\n    </div>\n    <div style={{ flexBasis: '25%' }}>\n      <AddressBlock label=\"Implementation\" address={implementation} />\n    </div>\n  </div>\n);\n\n\nexport default GovernanceHeader;\n","import {GOVERNANCE_PROPOSAL_THRESHOLD, GOVERNANCE_QUORUM, SUPERMAJORITY} from \"../constants/values\";\nimport BigNumber from \"bignumber.js\";\n\nexport function proposalStatus(epoch, start, period, initialized, approve, reject, total): string {\n  if (start === 0) {\n    return \"N/A\";\n  }\n  if (epoch < start) {\n    return \"Unknown\";\n  }\n  if (initialized) {\n    return \"Committed\"\n  }\n  if (approve.plus(reject).dividedBy(total).comparedTo(SUPERMAJORITY) > 0) {\n    return \"Fast Trackable\"; // Didn't meet quorum\n  }\n  if (epoch < (start + period)) {\n    return \"Voting\"\n  }\n  if (epoch < (start + period)) {\n    return \"Rejected\"; // Not ended\n  }\n  if (approve.plus(reject).dividedBy(total).comparedTo(GOVERNANCE_QUORUM) < 0) {\n    return \"Rejected\"; // Didn't meet quorum\n  }\n  return approve.comparedTo(reject) > 0 ? \"Approved\" : \"Rejected\";\n}\n\nexport function canPropose(stake: BigNumber, totalStake: BigNumber): boolean {\n  return stake.div(totalStake).comparedTo(GOVERNANCE_PROPOSAL_THRESHOLD) >= 0;\n}","import React, { useState } from 'react';\nimport {\n  Box, TextInput, Button, IconToken,\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {recordVote} from '../../utils/web3';\n\nimport {VTDD} from \"../../constants/tokens\";\nimport {canPropose} from \"../../utils/gov\";\n\ntype ProposeCandidateProps = {\n  user: string,\n  stake: BigNumber,\n  totalStake: BigNumber,\n  accountStatus: number\n};\n\nfunction plausibleCandidate(candidate: string): boolean {\n  return (/^(0x)[0-9a-fA-F]{40}$/i.test(candidate));\n}\n\nfunction ProposeCandidate({\n  user, stake, totalStake, accountStatus,\n}: ProposeCandidateProps) {\n  const [candidate, setCandidate] = useState(\"0x\");\n\n  return (\n    <Box heading=\"Propose\">\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\n        {/* User balance */}\n        <div style={{flexBasis: '62%', paddingTop: '2%'}}>\n          <>\n            <TextInput\n              wide\n              value={candidate}\n              onChange={(event) => {\n                if (event.target.value) {\n                  setCandidate(event.target.value);\n                } else {\n                  setCandidate(\"0x\");\n                }\n              }}\n            />\n          </>\n        </div>\n        <div style={{flexBasis: '6%'}}/>\n        {/* Purchase coupons */}\n        <div style={{flexBasis: '32%', paddingTop: '2%'}}>\n          <Button\n            wide\n            icon={<IconToken/>}\n            label=\"Propose\"\n            onClick={() => {\n              recordVote(\n                VTDD.addr,\n                candidate,\n                1 // APPROVE\n              );\n            }}\n            disabled={user === '' || !canPropose(stake, totalStake) || !plausibleCandidate(candidate) || accountStatus === 1}\n          />\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nexport default ProposeCandidate;\n","import React, {useEffect, useState} from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Button, IconRight, DataView\n} from '@aragon/ui';\n\nimport {\n  getAllProposals,\n  getApproveFor,\n  getEpoch,\n  getIsInitialized,\n  getRejectFor,\n  getTokenTotalSupply, getTotalBondedAt\n} from '../../utils/infura';\nimport {VTDD} from \"../../constants/tokens\";\nimport {AddressBlock} from \"../common\";\nimport {proposalStatus} from \"../../utils/gov\";\nimport BigNumber from \"bignumber.js\";\n\ntype CandidateHistoryProps = {\n  user: string;\n};\n\ntype Proposal = {\n  index: number\n  candidate: string,\n  account: string,\n  start: number,\n  period: number,\n  status: string\n}\n\nasync function formatProposals(epoch: number, proposals: any[]): Promise<Proposal[]> {\n  const currentTotalStake = await getTokenTotalSupply(VTDD.addr);\n  const initializeds = await Promise.all(proposals.map((p) => getIsInitialized(VTDD.addr, p.candidate)));\n  const approves = await Promise.all(proposals.map((p) => getApproveFor(VTDD.addr, p.candidate)));\n  const rejecteds = await Promise.all(proposals.map((p) => getRejectFor(VTDD.addr, p.candidate)));\n  const supplyAts = await Promise.all(proposals.map(async (p) => {\n    const at = (p.start + p.period - 1);\n    if (epoch > at) {\n      return await getTotalBondedAt(VTDD.addr, at);\n    }\n    return currentTotalStake;\n  }));\n\n  for (let i = 0; i < proposals.length; i++) {\n    proposals[i].index = (proposals.length - i);\n    proposals[i].start = parseInt(proposals[i].start);\n    proposals[i].period = parseInt(proposals[i].period);\n    proposals[i].status = proposalStatus(\n      epoch,\n      proposals[i].start,\n      proposals[i].period,\n      initializeds[i],\n      new BigNumber(approves[i]),\n      new BigNumber(rejecteds[i]),\n      new BigNumber(supplyAts[i])\n    );\n  }\n  return proposals\n}\n\nfunction CandidateHistory({user}: CandidateHistoryProps) {\n  const history = useHistory();\n  const [proposals, setProposals] = useState<Proposal[]>([]);\n  const [page, setPage] = useState(0)\n  const [initialized, setInitialized] = useState(false)\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [epochStr, allProposals] = await Promise.all([\n        getEpoch(VTDD.addr),\n        getAllProposals(VTDD.addr),\n      ]);\n\n      if (!isCancelled) {\n        const formattedProposals = await formatProposals(parseInt(epochStr), allProposals);\n        setProposals(formattedProposals);\n        setInitialized(true);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <DataView\n      fields={['Proposal', 'Candidate', 'Proposed', 'Complete', 'Proposer', 'Status', '']}\n      status={ initialized ? 'default' : 'loading' }\n      // @ts-ignore\n      entries={proposals}\n      entriesPerPage={10}\n      page={page}\n      onPageChange={setPage}\n      renderEntry={(proposal) => [\n        \"#\" + proposal.index,\n        <AddressBlock label=\"\" address={proposal.candidate} />,\n        proposal.start.toString(),\n        (proposal.start + proposal.period).toString(),\n        <AddressBlock label=\"\" address={proposal.account} />,\n        proposal.status,\n        <Button\n          wide\n          icon={<IconRight />}\n          label=\"Go To\"\n          onClick={() => {\n            history.push(`/governance/candidate/${proposal.candidate}`);\n          }}\n        />\n      ]}\n    />\n  );\n}\n\nexport default CandidateHistory;\n","import React, { useState, useEffect } from 'react';\nimport { Header, Box } from '@aragon/ui';\n\nimport {\n  getImplementation,\n  getStatusOf,\n  getTokenBalance,\n  getTokenTotalSupply,\n} from '../../utils/infura';\nimport {VTDD} from \"../../constants/tokens\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport GovernanceHeader from \"./Header\";\nimport ProposeCandidate from \"./ProposeCandidate\";\nimport CandidateHistory from \"./CandidateHistory\";\nimport IconHeader from \"../common/IconHeader\";\nimport {canPropose} from \"../../utils/gov\";\n\nfunction Governance({ user }: {user: string}) {\n\n  const [stake, setStake] = useState(new BigNumber(0));\n  const [totalStake, setTotalStake] = useState(new BigNumber(0));\n  const [userStatus, setUserStatus] = useState(0);\n  const [implementation, setImplementation] = useState(\"0x\");\n\n  useEffect(() => {\n    if (user === '') {\n      setStake(new BigNumber(0));\n      setUserStatus(0);\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [statusStr, stakeStr] = await Promise.all([\n        getStatusOf(VTDD.addr, user),\n        getTokenBalance(VTDD.addr, user),\n      ]);\n\n      if (!isCancelled) {\n        setStake(toTokenUnitsBN(stakeStr, VTDD.decimals));\n        setUserStatus(parseInt(statusStr, 10));\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [totalStakeStr, implementationStr] = await Promise.all([\n        getTokenTotalSupply(VTDD.addr),\n        getImplementation(VTDD.addr),\n      ]);\n\n      if (!isCancelled) {\n        setTotalStake(toTokenUnitsBN(totalStakeStr, VTDD.decimals));\n        setImplementation(implementationStr)\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <Box>\n      <GovernanceHeader\n        stake={stake}\n        totalStake={totalStake}\n        accountStatus={userStatus}\n        implementation={implementation}\n      />\n      </Box>\n\n      {\n        canPropose(stake, totalStake) ?\n          <>\n        <h5 style={{\n          fontSize: '10px',\n          margin: '10px 0'\n        }}\n        >Propose Upgrade Candidate</h5>\n            <ProposeCandidate\n              user={user}\n              stake={stake}\n              totalStake={totalStake}\n              accountStatus={userStatus}\n            />\n          </>\n          :\n          ''\n      }\n\n      <h5 style={{\n          fontSize: '10px',\n          margin: '10px 0'\n        }}\n        >Proposals</h5>\n\n      <CandidateHistory user={user}/>\n    </>\n  );\n}\n\nexport default Governance;\n","import React from 'react';\nimport {\n  Box, Button, IconRotateLeft, IconCircleCheck, IconProhibited\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock,\n} from '../common/index';\nimport {recordVote} from '../../utils/web3';\n\nimport {VTDD} from \"../../constants/tokens\";\nimport TextBlock from \"../common/TextBlock\";\n\ntype VoteProps = {\n  candidate: string,\n  stake: BigNumber,\n  vote: number,\n  status: number\n};\n\nconst VOTE_TYPE_MAP = [\"Undecided\", \"Approve\", \"Reject\"]\n\nfunction Vote({\n  candidate, stake, vote, status\n}: VoteProps) {\n  return (\n    <Box heading=\"Vote\">\n      <div style={{display: 'flex'}}>\n        {/* User stake */}\n        <div style={{width: '20%'}}>\n          <BalanceBlock asset=\"My Stake\" balance={stake} suffix={ \"VTDD\"}/>\n        </div>\n        <div style={{width: '20%'}}>\n          <TextBlock label=\"My Vote\" text={VOTE_TYPE_MAP[vote]}/>\n        </div>\n        {/* Remove vote for candidate */}\n        <div style={{width: '18%', paddingTop: '2%'}}>\n          <Button\n            wide\n            icon={<IconRotateLeft/>}\n            label=\"Unvote\"\n            onClick={() => {\n              recordVote(\n                VTDD.addr,\n                candidate,\n                0 // UNDECIDED\n              );\n            }}\n            disabled={status === 1 || vote === 0 || stake.isZero()}\n          />\n        </div>\n        {/* Vote to approve candidate */}\n        <div style={{width: '3%'}} />\n        <div style={{width: '18%', paddingTop: '2%'}}>\n          <Button\n            wide\n            icon={<IconCircleCheck/>}\n            label=\"Accept\"\n            onClick={() => {\n              recordVote(\n                VTDD.addr,\n                candidate,\n                1 // APPROVE\n              );\n            }}\n            disabled={status === 1 || vote === 1 || stake.isZero()}\n          />\n        </div>\n        {/* Vote to reject candidate */}\n        <div style={{width: '3%'}} />\n        <div style={{width: '18%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n              <Button\n                wide\n                icon={<IconProhibited/>}\n                label=\"Reject\"\n                onClick={() => {\n                  recordVote(\n                    VTDD.addr,\n                    candidate,\n                    2 // REJECT\n                  );\n                }}\n                disabled={status === 1 || vote === 2 || stake.isZero()}\n              />\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nexport default Vote;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\nimport { BalanceBlock } from \"../common\";\n\ntype VoteHeaderProps = {\n  approveFor: BigNumber,\n  rejectFor: BigNumber,\n  totalStake: BigNumber,\n  showParticipation: boolean,\n};\n\nfunction approval(approve: BigNumber, reject: BigNumber): BigNumber {\n  return approve.multipliedBy(10000).dividedToIntegerBy(approve.plus(reject)).dividedBy(100)\n}\n\nfunction participation(approve: BigNumber, reject: BigNumber, totalStake: BigNumber): BigNumber {\n  return approve.plus(reject).multipliedBy(10000).dividedToIntegerBy(totalStake).dividedBy(100)\n}\n\nconst VoteHeader = ({\n  approveFor, rejectFor, totalStake, showParticipation\n}: VoteHeaderProps) => (\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\n    <div style={{ width: '25%' }}>\n      <BalanceBlock asset=\"Approve\" balance={approveFor} suffix={ \"VTDD\"}/>\n    </div>\n    <div style={{ width: '25%' }}>\n      <BalanceBlock asset=\"Reject\" balance={rejectFor} suffix={ \"VTDD\"}/>\n    </div>\n    <div style={{ width: '25%' }}>\n      <BalanceBlock asset=\"Approval\" balance={approval(approveFor, rejectFor)} suffix=\"%\" />\n    </div>\n    {showParticipation ?\n      <div style={{width: '25%'}}>\n        <BalanceBlock asset=\"Participation\" balance={participation(approveFor, rejectFor, totalStake)} suffix=\"%\"/>\n      </div> : ''\n    }\n  </div>\n);\n\n\nexport default VoteHeader;\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\n\ntype NumberBlockProps = {\n  title: string,\n  num: BigNumber | string | number\n}\n\nfunction NumberBlock({ title, num }: NumberBlockProps) {\n  const numNum = new BigNumber(num).toNumber();\n\n  return (\n    <>\n      <div style={{ fontSize: 14, padding: 3 }}>{title}</div>\n      <div style={{ fontSize: 24, padding: 3 }}>{numNum}</div>\n\n    </>\n  );\n}\n\nexport default NumberBlock;\n","import React from 'react';\n\nimport NumberBlock from \"../common/NumberBlock\";\n\ntype CommitHeaderProps = {\n  epoch: number\n  startEpoch: number,\n  periodEpoch: number,\n};\n\nconst CommitHeader = ({\n   epoch, startEpoch, periodEpoch,\n}: CommitHeaderProps) => (\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\n    <div style={{ width: '25%' }}>\n      <NumberBlock title=\"Epoch\" num={epoch} />\n    </div>\n    <div style={{ width: '25%' }}>\n      <NumberBlock title=\"Starts\" num={startEpoch} />\n    </div>\n    <div style={{ width: '25%' }}>\n      <NumberBlock title=\"Period\" num={periodEpoch} />\n    </div>\n  </div>\n);\n\n\nexport default CommitHeader;\n","import React from 'react';\nimport {\n  Box, Button, IconUpload\n} from '@aragon/ui';\nimport TextBlock from \"../common/TextBlock\";\nimport {VTDD} from \"../../constants/tokens\";\nimport {commit} from \"../../utils/web3\";\n\ntype CommitProps = {\n  user: string,\n  candidate: string,\n  epoch: number\n  startEpoch: number,\n  periodEpoch: number,\n  initialized: boolean,\n  approved: boolean\n};\n\nfunction Commit({\n  user, candidate, epoch, startEpoch, periodEpoch, initialized, approved,\n}: CommitProps) {\n  function status(epoch, startEpoch, periodEpoch, initialized, approved): string {\n    if (startEpoch === 0) {\n      return \"N/A\";\n    }\n    if (epoch < startEpoch) {\n      return \"Unknown\";\n    }\n    if (epoch < (startEpoch + periodEpoch)) {\n      return \"Voting\"\n    }\n    if (initialized) {\n      return \"Committed\"\n    }\n    if (approved) {\n      return \"Approved\"\n    }\n    return \"Rejected\"\n  }\n  const s = status(epoch, startEpoch, periodEpoch, initialized, approved);\n\n  return (\n    <Box heading=\"Commit\">\n      <div style={{display: 'flex'}}>\n        {/* Status */}\n        <div style={{ width: '30%' }}>\n          <TextBlock label=\"Status\" text={s} />\n        </div>\n        <div style={{width: '40%'}} />\n        {/* Commit candidate */}\n        <div style={{width: '30%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n              <Button\n                wide\n                icon={<IconUpload/>}\n                label=\"Commit\"\n                onClick={() => {\n                  commit(\n                    VTDD.addr,\n                    candidate\n                  );\n                }}\n                disabled={user === '' || s !== 'Approved'}\n              />\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nexport default Commit;\n","import React from 'react';\n\nimport {\n  Header,\n} from '@aragon/ui';\n\ntype IconHeaderProps = {\n  icon: any,\n  text: string\n}\n\nfunction IconHeader({ icon, text }: IconHeaderProps) {\n  return (\n    <>\n      <div style={{ padding: '1%', display: 'flex', alignItems: 'center' }}>\n        <div style={{ marginRight: '2%', fontSize: 48 }}>\n          {icon}\n        </div>\n        <div>\n          <Header primary={text} />\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default IconHeader;\n","import React, { useState, useEffect } from 'react';\nimport { Header, IdentityBadge } from '@aragon/ui';\nimport { useParams } from 'react-router-dom';\n\nimport {\n  getApproveFor, getEpoch, getIsInitialized, getPeriodFor,\n  getRecordedVote,\n  getRejectFor, getStartFor, getStatusOf,\n  getTokenBalance,\n  getTokenTotalSupply, getTotalBondedAt\n} from '../../utils/infura';\nimport {VTDD} from \"../../constants/tokens\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport Vote from \"./Vote\";\nimport VoteHeader from \"./VoteHeader\";\nimport CommitHeader from \"./CommitHeader\";\nimport Commit from \"./Commit\";\nimport IconHeader from \"../common/IconHeader\";\nimport {proposalStatus} from \"../../utils/gov\";\n\nfunction Candidate({ user }: {user: string}) {\n  const { candidate } = useParams();\n\n  const [approveFor, setApproveFor] = useState(new BigNumber(0));\n  const [rejectFor, setRejectFor] = useState(new BigNumber(0));\n  const [totalStake, setTotalStake] = useState(new BigNumber(0));\n  const [vote, setVote] = useState(0);\n  const [status, setStatus] = useState(0);\n  const [userStake, setUserStake] = useState(new BigNumber(0));\n  const [epoch, setEpoch] = useState(0);\n  const [startEpoch, setStartEpoch] = useState(0);\n  const [periodEpoch, setPeriodEpoch] = useState(0);\n  const [initialized, setInitialized] = useState(false);\n\n  useEffect(() => {\n    if (user === '') {\n      setVote(0);\n      setStatus(0);\n      setUserStake(new BigNumber(0));\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [\n        voteStr, statusStr, userStakeStr,\n      ] = await Promise.all([\n        getRecordedVote(VTDD.addr, user, candidate),\n        getStatusOf(VTDD.addr, user),\n        getTokenBalance(VTDD.addr, user),\n      ]);\n\n      if (!isCancelled) {\n        setVote(parseInt(voteStr, 10));\n        setStatus(parseInt(statusStr, 10));\n        setUserStake(toTokenUnitsBN(userStakeStr, VTDD.decimals));\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user, candidate]);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      let [\n        approveForStr, rejectForStr, totalStakeStr,\n        epochStr, startForStr, periodForStr, isInitialized\n      ] = await Promise.all([\n        getApproveFor(VTDD.addr, candidate),\n        getRejectFor(VTDD.addr, candidate),\n        getTokenTotalSupply(VTDD.addr),\n        getEpoch(VTDD.addr),\n        getStartFor(VTDD.addr, candidate),\n        getPeriodFor(VTDD.addr, candidate),\n        getIsInitialized(VTDD.addr, candidate),\n      ]);\n\n      const epochN = parseInt(epochStr, 10);\n      const startN = parseInt(startForStr, 10);\n      const periodN = parseInt(periodForStr, 10);\n\n      const endsAfter = (startN + periodN - 1);\n      if (epochN > endsAfter) {\n        totalStakeStr = await getTotalBondedAt(VTDD.addr, endsAfter);\n      }\n\n      if (!isCancelled) {\n        setApproveFor(toTokenUnitsBN(approveForStr, VTDD.decimals));\n        setRejectFor(toTokenUnitsBN(rejectForStr, VTDD.decimals));\n        setTotalStake(toTokenUnitsBN(totalStakeStr, VTDD.decimals));\n        setEpoch(epochN);\n        setStartEpoch(startN);\n        setPeriodEpoch(periodN);\n        setInitialized(isInitialized);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [candidate]);\n\n  return (\n    <>\n      <IconHeader icon={<i className=\"fas fa-poll\"/>} text=\"Candidate\"/>\n      <IdentityBadge entity={candidate} shorten={false} />\n\n      <VoteHeader\n        approveFor={approveFor}\n        rejectFor={rejectFor}\n        totalStake={totalStake}\n        showParticipation={startEpoch > 106}\n      />\n\n      <Header primary=\"Vote\" />\n      <Vote\n        candidate={candidate}\n        stake={userStake}\n        vote={vote}\n        status={status}\n      />\n\n      <Header primary=\"Commit\" />\n      <CommitHeader\n        epoch={epoch}\n        startEpoch={startEpoch}\n        periodEpoch={periodEpoch}\n      />\n\n      <Commit\n        user={user}\n        candidate={candidate}\n        epoch={epoch}\n        startEpoch={startEpoch}\n        periodEpoch={periodEpoch}\n        initialized={initialized}\n        approved={proposalStatus(epoch, startEpoch, periodEpoch, false, approveFor, rejectFor, totalStake) === \"Approved\"}\n      />\n    </>\n  );\n}\n\nexport default Candidate;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\n\nimport {Box, Distribution} from '@aragon/ui';\nimport {formatMoney, ownership} from \"../../utils/number\";\n\ntype RegulationHeaderProps = {\n  totalSupply: BigNumber,\n\n  totalBonded: BigNumber,\n  totalStaged: BigNumber,\n  totalRedeemable: BigNumber,\n\n  totalDebt: BigNumber,\n  totalCoupons: BigNumber,\n  couponPremium: BigNumber,\n};\n\nconst RegulationHeader = ({\n  totalSupply,\n  totalBonded, totalStaged, totalRedeemable,\n  totalDebt, totalCoupons, couponPremium\n}: RegulationHeaderProps) => {\n  const daoTotalSupply = totalBonded.plus(totalStaged).plus(totalRedeemable);\n  // const circulatingSupply = totalSupply.minus(daoTotalSupply).minus(poolTotalSupply);\n\n  return (\n    <>\n      <div>\n          <Box heading=\"Supply Allocation\">\n            <Distribution\n              heading={`v:${formatMoney(totalSupply.toNumber())}`}\n              items={[\n                { item: 'DAO', percentage: +(ownership(daoTotalSupply, totalSupply).toNumber().toFixed(2)) },\n                // { item: 'Uniswap', percentage: +(ownership(poolTotalSupply, totalSupply).toNumber().toFixed(2)) },\n                // { item: 'Circulating', percentage: +(ownership(circulatingSupply, totalSupply).toNumber().toFixed(2)) },\n              ]}\n            />\n          </Box>\n\n          <Box heading=\"DAO Breakdown\">\n            <Distribution\n              heading={`v:${formatMoney(daoTotalSupply.toNumber())}`}\n              items={[\n                { item: 'Bonded', percentage: +(ownership(totalBonded, daoTotalSupply).toNumber().toFixed(2)) },\n                { item: 'Staged', percentage: +(ownership(totalStaged, daoTotalSupply).toNumber().toFixed(2)) },\n                { item: 'Redeemable', percentage: +(ownership(totalRedeemable, daoTotalSupply).toNumber().toFixed(2)) },\n              ]}\n            />\n          </Box>\n\n\n          {/* <Box heading=\"Uniswap Breakdown\">\n            <Distribution\n              heading={`v:${formatMoney(poolTotalSupply.toNumber())}`}\n              items={[\n                { item: 'Liquidity', percentage: +(ownership(poolLiquidity, poolTotalSupply).toNumber().toFixed(2)) },\n                { item: 'Rewarded', percentage: +(ownership(poolRewarded, poolTotalSupply).toNumber().toFixed(2)) },\n                { item: 'Claimable', percentage: +(ownership(poolClaimable, poolTotalSupply).toNumber().toFixed(2)) },\n              ]}\n            />\n          </Box> */}\n\n      </div>\n    </>\n  );\n}\n\n\nexport default RegulationHeader;\n","import React, {useEffect, useState, useContext} from 'react';\nimport { DataView } from '@aragon/ui';\n\nimport {getAllRegulations} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {formatBN, toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport {EpochContext, ContextType, IEpochs } from \"../../store/EpochStore\";\n\ntype RegulationHistoryProps = {\n  user: string,\n};\n\ntype Regulation = {\n  type: string,\n  data: RegulationEntry\n}\n\ntype RegulationEntry = {\n  epoch: string;\n  price: string;\n  momentumPrice: string;\n  deltaRedeemable: string;\n  deltaDebt: string;\n  deltaBonded: string;\n}\n\nfunction formatPrice(reg) {\n  return reg.type === 'NEUTRAL' ? '1.00' : formatBN(reg.price, 2)\n}\n\nfunction formatMomentumPrice(reg) {\n  return !!reg.momentumPrice.toNumber() ? formatBN(reg.momentumPrice, 2) : '-'\n}\nfunction formatDeltaRedeemable(reg) {\n  return reg.type === 'INCREASE' ?\n    '+' + formatBN(reg.deltaRedeemable, 2) :\n    '+0.00';\n}\n\nfunction formatDeltaDebt(reg) {\n  return reg.type === 'INCREASE' ?\n    '-' + formatBN(reg.deltaDebt, 2) :\n    reg.type === 'DECREASE' ?\n      '+' + formatBN(reg.deltaDebt, 2) :\n      '+0.00';\n}\n\nfunction formatDeltaBonded(reg) {\n  return reg.type === 'INCREASE' ?\n    '+' + formatBN(reg.deltaBonded, 2) :\n    '+0.00';\n}\n\nfunction renderEntry(reg: IEpochs): string[] {\n  return [\n    reg.epoch.toString(),\n    formatPrice(reg),\n    formatMomentumPrice(reg),\n    formatDeltaRedeemable(reg),\n    formatDeltaDebt(reg),\n    formatDeltaBonded(reg),\n  ]\n}\n\nfunction RegulationHistory({\n  user,\n}: RegulationHistoryProps) {\n  const [page, setPage] = useState(0)\n  const [initialized, setInitialized] = useState(false)\n  const { regulations, updateRegulations} = React.useContext(EpochContext) as ContextType;\n\n  //Update User balances\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      updateRegulations();\n    }\n\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <DataView\n      fields={['Epoch', 'Price', 'Momentum Price', 'Δ Redeemable', 'Δ Debt', 'Δ Bonded']}\n      status={ initialized ? 'default' : 'loading' }\n      entries={regulations}\n      entriesPerPage={10}\n      page={page}\n      onPageChange={setPage}\n      renderEntry={renderEntry}\n    />\n  );\n}\n\nexport default RegulationHistory;\n","import React, { useState, useEffect } from 'react';\nimport { Header, Split } from '@aragon/ui';\n\nimport {\n  getCouponPremium,\n  getPoolTotalClaimable, getPoolTotalRewarded, getTokenBalance,\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged,\n} from '../../utils/infura';\nimport {VTD, VTDD} from \"../../constants/tokens\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport RegulationHeader from \"./Header\";\nimport RegulationHistory from \"./RegulationHistory\";\nimport IconHeader from \"../common/IconHeader\";\n\nconst ONE_COUPON = new BigNumber(10).pow(18);\n\nfunction Regulation({ user }: {user: string}) {\n\n  const [totalSupply, setTotalSupply] = useState(new BigNumber(0));\n  const [totalBonded, setTotalBonded] = useState(new BigNumber(0));\n  const [totalStaged, setTotalStaged] = useState(new BigNumber(0));\n  const [totalRedeemable, setTotalRedeemable] = useState(new BigNumber(0));\n  const [poolLiquidity, setPoolLiquidity] = useState(new BigNumber(0));\n  const [poolTotalRewarded, setPoolTotalRewarded] = useState(new BigNumber(0));\n  const [poolTotalClaimable, setPoolTotalClaimable] = useState(new BigNumber(0));\n  const [legacyPoolTotalRewarded, setLegacyPoolTotalRewarded] = useState(new BigNumber(0));\n  const [legacyPoolTotalClaimable, setLegacyPoolTotalClaimable] = useState(new BigNumber(0));\n  const [totalDebt, setTotalDebt] = useState(new BigNumber(0));\n  const [totalCoupons, setTotalCoupons] = useState(new BigNumber(0));\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\n\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n\n      const [\n        totalSupplyStr,\n        totalBondedStr, totalStagedStr, totalRedeemableStr,\n        totalDebtStr, totalCouponsStr\n      ] = await Promise.all([\n        getTokenTotalSupply(VTD.addr),\n\n        getTotalBonded(VTDD.addr),\n        getTotalStaged(VTDD.addr),\n        getTotalRedeemable(VTDD.addr),\n\n        // getTokenBalance(VTD.addr, UNI.addr),\n        // getPoolTotalRewarded(poolAddress),\n        // getPoolTotalClaimable(poolAddress),\n\n        // getPoolTotalRewarded(legacyPoolAddress),\n        // getPoolTotalClaimable(legacyPoolAddress),\n\n        getTotalDebt(VTDD.addr),\n        getTotalCoupons(VTDD.addr),\n      ]);\n\n      if (!isCancelled) {\n        setTotalSupply(toTokenUnitsBN(totalSupplyStr, VTD.decimals));\n\n        setTotalBonded(toTokenUnitsBN(totalBondedStr, VTD.decimals));\n        setTotalStaged(toTokenUnitsBN(totalStagedStr, VTD.decimals));\n        setTotalRedeemable(toTokenUnitsBN(totalRedeemableStr, VTD.decimals));\n\n        // setPoolLiquidity(toTokenUnitsBN(poolLiquidityStr, VTD.decimals));\n        // setPoolTotalRewarded(toTokenUnitsBN(poolTotalRewardedStr, VTD.decimals));\n        // setPoolTotalClaimable(toTokenUnitsBN(poolTotalClaimableStr, VTD.decimals));\n\n        // setLegacyPoolTotalRewarded(toTokenUnitsBN(legacyPoolTotalRewardedStr, VTD.decimals));\n        // setLegacyPoolTotalClaimable(toTokenUnitsBN(legacyPoolTotalClaimableStr, VTD.decimals));\n\n        setTotalDebt(toTokenUnitsBN(totalDebtStr, VTD.decimals));\n        setTotalCoupons(toTokenUnitsBN(totalCouponsStr, VTD.decimals));\n\n        if (new BigNumber(totalDebtStr).isGreaterThan(ONE_COUPON)) {\n          const couponPremiumStr = await getCouponPremium(VTDD.addr, ONE_COUPON)\n          setCouponPremium(toTokenUnitsBN(couponPremiumStr, VTD.decimals));\n        } else {\n          setCouponPremium(new BigNumber(0));\n        }\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <Split\n        primary={\n          <>\n          {/* <Header primary=\"Supply History\" /> */}\n\n          <RegulationHistory\n            user={user}\n          />\n          </>\n        }\n        secondary={\n          <RegulationHeader\n          totalSupply={totalSupply}\n  \n          totalBonded={totalBonded}\n          totalStaged={totalStaged}\n          totalRedeemable={totalRedeemable}\n  \n          totalDebt={totalDebt}\n          totalCoupons={totalCoupons}\n          couponPremium={couponPremium}\n        />\n        }\n      />\n    </>\n  );\n}\n\nexport default Regulation;\n","import React from 'react';\nimport {\n  Box, LinkBase, Tag,\n} from '@aragon/ui';\n\nfunction HomePageNoWeb3() {\n\n  return (\n    <>\n      <div style={{ padding: '1%', display: 'flex', alignItems: 'center' }}>\n        <MainButton\n          title=\"No web3 wallet detected\"\n          description=\"Click to get Metamask.\"\n          icon={<i className=\"fas fa-times-circle\"/>}\n          onClick={() => {\n            // @ts-ignore\n            window.location = 'https://www.metamask.io/';\n          }}\n        />\n      </div>\n    </>\n  );\n}\n\ntype MainButtonPropx = {\n  title: string,\n  description: string,\n  icon: any,\n  onClick: Function,\n  tag?:string\n}\n\nfunction MainButton({\n  title, description, icon, onClick, tag,\n}:MainButtonPropx) {\n  return (\n    <LinkBase onClick={onClick} style={{ width: '100%' }}>\n      <Box>\n        <div style={{ padding: 10, fontSize: 18 }}>\n          {title}\n          {tag ? <Tag>{tag}</Tag> : <></>}\n        </div>\n        <span style={{ fontSize: 48 }}>\n          {icon}\n        </span>\n        {/*<img alt=\"icon\" style={{ padding: 10, height: 64 }} src={iconUrl} />*/}\n        <div style={{ paddingTop: 5, opacity: 0.5 }}>\n          {' '}\n          {description}\n          {' '}\n        </div>\n\n      </Box>\n    </LinkBase>\n  );\n}\n\nexport default HomePageNoWeb3;\n","export const vtdTheme = {\n    \"name\": 'vtdDark',\n    \"palette\": {\n      \"accents_1\": \"#111\",\n      \"accents_2\": \"#333\",\n      \"accents_3\": \"#444\",\n      \"accents_4\": \"#666\",\n      \"accents_5\": \"#888\",\n      \"accents_6\": \"#999\",\n      \"accents_7\": \"#eaeaea\",\n      \"accents_8\": \"#fafafa\",\n      \"background\": \"#212121\",\n      \"foreground\": \"#fff\",\n      \"selection\": \"#f81ce5\",\n      \"secondary\": \"#888\",\n      \"code\": \"#79ffe1\",\n      \"border\": \"#333\",\n      \"link\": \"#3291ff\"\n    },\n    \"expressiveness\": {\n      \"dropdownBoxShadow\": \"0 0 0 1px #333\",\n      \"shadowSmall\": \"0 0 0 1px #333\",\n      \"shadowMedium\": \"0 0 0 1px #333\",\n      \"shadowLarge\": \"0 0 0 1px #333\",\n      \"portalOpacity\": 0.75\n    }\n  }\n\nexport const vtdLight = {\n  \"name\": 'vtdLight',\n  \"palette\": {\n    \"accents_1\": \"#bbbbbb\",\n    \"accents_2\": \"#d6e1e9\",\n    \"accents_3\": \"rgb(142, 211, 220)\",\n    \"background\": \"#ffffff\"\n  },\n  \"expressiveness\": {\n    \"dropdownBoxShadow\": \"0 4px 4px 0 rgba(0, 0, 0, 0.05)\"\n  }\n}\n\nexport default vtdTheme;","import React, { useMemo, useEffect, useState } from 'react'\nimport { useTheme } from '@geist-ui/react'\nimport { useHistory } from 'react-router-dom';\nimport _JSXStyle from \"styled-jsx/style\"\n\nexport interface Props {\n  href: string\n  text: string\n  closeSideBar: Function\n}\n\nconst ActiveLink: React.FC<Props> = React.memo(({ href, text, closeSideBar }) => {\n  const [page, setPage] = useState(\"\");\n  const theme = useTheme()\n  const history = useHistory()\n  const [title, subtitle] = useMemo(() => {\n    if (!/[\\u4E00-\\u9FA5]/.test(text)) return [text, null]\n    if (/zeit|ui|ZEIT|geist|Geist|UI/.test(text)) return [text, null]\n    return [text.replace(/[^\\u4E00-\\u9FA5]/g, ''), text.replace(/[^a-zA-Z]/g, '')]\n  }, [text])\n\n  useEffect(() => {\n    return history.listen((location) => {\n      setPage(location.pathname)\n    })\n  }, [history]);\n  \n  return (\n    <div className=\"link\">\n        <a onClick={() => {closeSideBar(); history.push(href)}} className={page.includes(href) ? 'active' : ''}>\n          {title}\n          {subtitle && <span>&nbsp;{subtitle}</span>}\n        </a>\n\n      <style jsx>{`\n        .link {\n          width: 100%;\n          color: ${theme.palette.accents_5};\n          display: flex;\n          height: 2.25rem;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          text-transform: capitalize;\n          padding-bottom: 1rem;\n        }\n\n        a {\n          color: ${theme.palette.accents_7};\n          font-size: 1rem;\n          transition: all 200ms ease;\n          font-weight: 400;\n          display: inline-flex;\n          align-items: baseline;\n        }\n\n        a.active {\n          color: ${theme.palette.success};\n          font-weight: 600;\n        }\n\n        a.active span {\n          color: ${theme.palette.successLight};\n        }\n\n        span {\n          font-size: 0.75rem;\n          color: ${theme.palette.accents_4};\n          font-weight: 400;\n        }\n      `}</style>\n    </div>\n  )\n})\n\nexport default ActiveLink\n","import React, { ReactElement } from 'react'\nimport { useTheme, Spacer } from '@geist-ui/react'\nimport ActiveLink from './active-link'\nimport _JSXStyle from \"styled-jsx/style\"\n\nexport type Sides = {\n  name: string\n  url?: string\n  localeName?: string\n  children?: Sides | Array<Sides>\n}\n\nexport interface SideItemProps {\n  sides: Array<Sides>\n  closeSideBar: Function\n}\n\nconst SideItem: React.FC<React.PropsWithChildren<SideItemProps>> = React.memo(\n  ({sides, closeSideBar }) => {\n    const theme = useTheme()\n\n    return (\n      <>\n        {sides.map((side, index) => {\n          // const showChildren = side.children && children\n          return (\n            <div key={`${side.localeName || side.name}-${index}`} className=\"item\">\n              {side.url && <ActiveLink href={side.url} text={side.name} closeSideBar={closeSideBar}/>}\n\n              {/* {showChildren && (\n                <div className=\"children\">\n                  {React.cloneElement(children as ReactElement, {\n                    sides: side.children,\n                  })}\n                </div>\n              )} */}\n            </div>\n          )\n        })}\n        <style jsx>{`\n          .item {\n            width: 100%;\n          }\n\n          .children {\n            display: flex;\n            justify-content: center;\n            align-items: flex-start;\n            flex-direction: column;\n            transition: all 0.2s ease-in-out;\n            position: relative;\n            margin-top: 0.5rem;\n          }\n\n          .active-title {\n            font-weight: bold;\n          }\n\n          @media only screen and (max-width: ${theme.layout.breakpointMobile}) {\n            .link {\n              border-bottom: 1px solid ${theme.palette.border};\n              height: 3.5rem;\n            }\n          }\n        `}</style>\n      </>\n    )\n  },\n)\n\nexport default SideItem\n","/**\n * Wait transactions to be mined.\n *\n * Based on https://raw.githubusercontent.com/Kaisle/await-transaction-mined/master/index.js\n */\n\nimport Web3 from 'web3';\n\nconst DEFAULT_INTERVAL = 500;\n\nconst DEFAULT_BLOCKS_TO_WAIT = 0;\n\ninterface Options {\n  interval: number;\n  blocksToWait: number;\n}\n\n/**\n * Wait for one or multiple transactions to confirm.\n *\n * @param txnHash A transaction hash or list of those\n * @param options Wait timers\n * @return Transaction receipt\n */\nexport function waitTransaction(txnHash: string|string[], options?: Options): Promise<any> {\n    // @ts-ignore\n    const web3 = window.web3;\n    const interval = options && options.interval ? options.interval : DEFAULT_INTERVAL;\n    const blocksToWait = options && options.blocksToWait ? options.blocksToWait : DEFAULT_BLOCKS_TO_WAIT;\n    var transactionReceiptAsync = async function(txnHash, resolve, reject) {\n        try {\n            var receipt = web3.eth.getTransactionReceipt(txnHash);\n            if (!receipt) {\n                setTimeout(function () {\n                    transactionReceiptAsync(txnHash, resolve, reject);\n                }, interval);\n            } else {\n      \n                var resolvedReceipt = await receipt;\n                if (!resolvedReceipt || !resolvedReceipt.blockNumber) setTimeout(function () { transactionReceiptAsync(txnHash, resolve, reject);\n                }, interval);\n                else {\n                  try {\n                  var block = await web3.eth.getBlock(resolvedReceipt.blockNumber)\n                  var current = await web3.eth.getBlock('latest');\n                  if (current.number - block.number >= blocksToWait) {\n                    var txn = await web3.eth.getTransaction(txnHash)\n                    if (txn.blockNumber != null) resolve(resolvedReceipt);\n                    else reject(new Error('Transaction with hash: ' + txnHash + ' ended up in an uncle block.'));\n                  }\n                  else setTimeout(function () {\n                      transactionReceiptAsync(txnHash, resolve, reject);\n                  }, interval);\n                  }\n                  catch (e) {\n                    setTimeout(function () {\n                        transactionReceiptAsync(txnHash, resolve, reject);\n                    }, interval);\n                  }\n                }\n            }\n        } catch(e) {\n            reject(e);\n        }\n    };\n\n    // Resolve multiple transactions once\n    if (Array.isArray(txnHash)) {\n        var promises = [];\n        txnHash.forEach(function (oneTxHash) {\n            //@ts-ignore\n            promises.push(waitTransaction(oneTxHash, options));\n        });\n        return Promise.all(promises);\n    } else {\n        return new Promise(function (resolve, reject) {\n                transactionReceiptAsync(txnHash, resolve, reject);\n            });\n    }\n};\n\n\n/**\n * Check if the transaction was success based on the receipt.\n *\n * https://ethereum.stackexchange.com/a/45967/620\n *\n * @param receipt Transaction receipt\n */\nexport function isSuccessfulTransaction(receipt: any): boolean {\n  if(receipt.status == '0x1' || receipt.status == 1) {\n    return true;\n  } else {\n    return false;\n  }\n}","import React, { useState, useCallback } from 'react';\nimport { LoadingRing } from '@aragon/ui'\nimport {waitTransaction} from '../../../utils/txStatus'\nimport {\n  Button, TransactionProgress\n} from '@aragon/ui';\n\nfunction PendingTxButton() {\n    const [pendingTxVisible, setPendingTxVisible] = useState(false);\n    const [pendingTxStr, setPendingTxStr] = useState('');\n    const [opener, setOpener] = useState(null);\n    const handleOpenerRef = useCallback(node => {\n      setOpener(node)\n    }, [])\n    \n    async function tick(){\n        const _tx = localStorage.getItem('pendingtx')\n        if (_tx) {\n            setPendingTxStr(_tx);\n            var status = await waitTransaction(_tx);\n            console.log(status)\n            localStorage.removeItem('pendingtx');\n        } else {\n            setPendingTxStr('');\n            setPendingTxVisible(false);\n        }\n    };\n\n    setInterval(\n    () => tick(),\n    5000\n    );\n  return (\n    <div style={{display: 'flex', margin:'0 auto'}}>\n        {pendingTxStr ? \n        <div ref={handleOpenerRef} style={{display: 'flex'}}>\n            <Button style={{\n                background: 'rgb(181, 106, 52)',\n                fontSize: '14px',\n                fontFamily: 'aragon-ui',\n                borderRadius: '25px'\n            }} ref={handleOpenerRef} onClick={() => setPendingTxVisible(true)}><LoadingRing/>Pending Tx</Button>\n        </div>\n        : ''}\n\n            <TransactionProgress\n              transactionHashUrl={'https://etherscan.io/tx/' + pendingTxStr}\n              visible={pendingTxVisible}\n              onClose={() => setPendingTxVisible(false)}\n              opener={opener}\n            />\n    </div>\n  );\n}\n\n\nexport default PendingTxButton;\n","import React, { useRef, useState} from 'react'\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport { useTheme, Spacer, Toggle} from '@geist-ui/react'\nimport SideItem, { Sides } from './side-item'\nimport PendingTxButton from './PendingTx';\nimport _JSXStyle from \"styled-jsx/style\"\nimport { Moon } from '@geist-ui/react-icons'\nimport {EpochContext, ContextType} from \"../../../store/EpochStore\";\n\nexport interface Props {\n  hasWeb3: boolean,\n  user: string,\n  setUser: Function,\n  closeSideBar: Function,\n  switchTheme: Function\n}\n\nexport type SideChildren = Sides | Array<Sides>\n\nexport const SideGroup: React.FC<{ sides?: SideChildren, closeSideBar }> = React.memo(({ sides, closeSideBar }) => {\n  if (!sides) return null\n  sides = Array.isArray(sides) ? sides : [sides]\n  return (\n    <SideItem sides={sides} closeSideBar={closeSideBar}>\n      <SideGroup closeSideBar={closeSideBar}/>\n    </SideItem>\n  )\n})\n\nexport const Sidebar: React.FC<Props> = React.memo((props) => {\n  const theme = useTheme()\n  const boxRef = useRef<HTMLDivElement>(null)\n  const { updateEpochData, updateRegulations} = React.useContext(EpochContext) as ContextType;\n\n  const sides = [\n    {name: \"Core\", url: '/dao/', children: []},\n    {name: \"Supply\", url: '/supply/', children: []},\n    {name: \"Propose/Vote\", url: '/governance/', children: []},\n    {name: \"Debt\", url: '/coupons/', children: []},\n    {name: \"Tools\", url: '/tools/', children: []}  \n  ]\n\n  // const tabbarData = useMemo(() => {\n  //   const allSides = [Metadatas[locale]]\n  //   const currentSide = allSides.filter(side => side.name === tabbar)[0]\n  //   return (currentSide.children || []) as Array<Sides>\n  // }, [locale, tabbar])\n\n  // useEffect(() => {\n  //   Router.events.on('routeChangeStart', () => {\n  //     if (!boxRef.current) return\n  //     updateSidebarScrollHeight(boxRef.current.scrollTop || 0)\n  //   })\n  // }, [])\n\n  // useEffect(() => {\n  //   if (!boxRef.current) return\n  //   boxRef.current.scrollTo({ top: sidebarScrollHeight })\n  // }, [boxRef.current])\n\n  return (\n    <div ref={boxRef} className=\"sides box\">\n      <Spacer />\n      <SideItem sides={sides} closeSideBar={props.closeSideBar}>\n        {/* <SideGroup /> */}\n      </SideItem>\n      <Spacer />\n      <PendingTxButton />\n      <Spacer/>\n      {/* @ts-ignore */}\n      <Moon /><Toggle initialChecked={true} onChange={() => {\n          updateRegulations();\n          updateEpochData(); \n          props.switchTheme();\n        }}/>\n      <style jsx>{`\n        .sides {\n          width: 100%;\n          padding-bottom: ${theme.layout.gap};\n        }\n\n        .box {\n          overflow-y: auto;\n          overflow-x: hidden;\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n        }\n\n        .box::-webkit-scrollbar {\n          width: 0;\n          background-color: transparent;\n        }\n\n        .box > :global(.item) {\n          margin-bottom: ${theme.layout.gap};\n        }\n\n        @media only screen and (max-width: ${theme.layout.breakpointMobile}) {\n          .box {\n            padding: calc(3.5 * ${theme.layout.gap}) 15vw;\n            width: 100vw;\n            height: 100%;\n          }\n        }\n      `}</style>\n    </div>\n  )\n})\n\nexport default Sidebar\n","import React from 'react'\nimport { Button, useTheme, useMediaQuery } from '@geist-ui/react'\nimport SlidersIcon from '@geist-ui/react-icons/sliders'\nimport _JSXStyle from \"styled-jsx/style\"\n\ninterface Props {\n  connectButton: any\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => void\n}\n\nconst TabbarMobile: React.FC<Props> = ({ onClick, connectButton }) => {\n  const theme = useTheme()\n  const downSM = useMediaQuery('sm', { match: 'down' })\n  const handler = (event: React.MouseEvent<HTMLButtonElement>) => {\n    onClick && onClick(event)\n  }\n\n  return (\n    <div className=\"tabbar\">\n      <Button className=\"toggle\" auto type=\"abort\" onClick={handler}>\n        <SlidersIcon size={16} />\n      </Button>\n      {downSM ? connectButton : <></>}\n\n      <style jsx>{`\n        .tabbar {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          z-index: 950;\n          height: 3.7rem;\n          background-color: ${theme.palette.background};\n          display: flex;\n          align-items: center;\n          padding: 0 calc(${theme.layout.gap} * 2);\n          box-sizing: border-box;\n          justify-content: space-between;\n          border-bottom: 1px solid ${theme.palette.border};\n        }\n\n        .tabbar :global(.toggle) {\n          width: 40px;\n          height: 40px;\n          padding: 0;\n          display: inline-flex;\n          justify-content: center;\n          align-items: center;\n          color: ${theme.palette.accents_6};\n        }\n\n        span {\n          color: ${theme.palette.accents_7};\n          font-size: 0.75rem;\n          display: inline-flex;\n          text-transform: capitalize;\n        }\n\n        @media only screen and (min-width: ${theme.layout.breakpointMobile}) {\n          .tabbar {\n            display: none;\n            visibility: hidden;\n            top: -1000px;\n          }\n        }\n      `}</style>\n    </div>\n  )\n}\n\nexport default TabbarMobile\n","import React, { useEffect } from 'react';\nimport { Modal, Button, Header } from '@aragon/ui';\nimport { useWallet } from 'use-wallet';\nimport {useTheme} from '@geist-ui/react'\ntype ConnectModalProps = {\n  visible: boolean,\n  onClose: Function,\n  onConnect: Function\n};\n\nfunction ConnectModal({\n  visible, onClose, onConnect\n}:ConnectModalProps) {\n  const wallet = useWallet();\n  const theme = useTheme();\n\n  const connectMetamask = () => {\n    wallet.connect(\"injected\");\n  };\n\n  const connectWalletConnect = () => {\n    wallet.connect(\"walletconnect\");\n  };\n\n  const connectCoinbase = () => {\n    wallet.connect(\"walletlink\");\n  };\n\n  useEffect(() => {\n    if (wallet.account) {\n      onConnect && onConnect(wallet);\n      onClose && onClose();\n    }\n  }, [wallet, onConnect, onClose]);\n\n  return (\n    <Modal visible={visible} onClose={onClose} style={{zIndex: '500', backgroundColor: theme.palette.background}}>\n\n      <div style={{width: '50%', margin: 'auto', padding: '1%'}}>\n        <Button\n          wide\n          label={'Metamask'}\n          icon={<img src={`./wallets/metamask-fox.svg`} style={{ height: 24 }} alt=\"Metamask\"/>}\n          onClick={connectMetamask}\n        />\n      </div>\n      <div style={{width: '50%', margin: 'auto', padding: '1%'}}>\n        <Button\n          wide\n          label={'WalletConnect'}\n          icon={<img src={`./wallets/wallet-connect.svg`} style={{ height: 24 }} alt=\"WalletConnect\"/>}\n          onClick={connectWalletConnect}\n        />\n      </div>\n      <div style={{width: '50%', margin: 'auto', padding: '1%'}}>\n        <Button\n          wide\n          label={'Coinbase Wallet'}\n          icon={<img src={`./wallets/coinbase-wallet.png`} style={{ height: 24 }} alt=\"Coinbase Wallet\"/>}\n          onClick={connectCoinbase}\n        />\n      </div>\n    </Modal>\n  );\n}\n\nexport default ConnectModal;\n","import React, { useState } from 'react';\nimport { useWallet } from 'use-wallet';\nimport { LogOut } from '@geist-ui/react-icons'\nimport { Button, Spacer, useMediaQuery } from '@geist-ui/react'\n\nimport {\n  IdentityBadge, IconConnect, LinkBase,\n} from '@aragon/ui';\n\nimport { connect } from '../../../utils/web3';\n// import TotalBalance from \"./TotalBalance\";\nimport ConnectModal from './ConnectModal';\n\ntype connectButtonProps = {\n  hasWeb3: boolean,\n  user: string,\n  setUser: Function\n}\n\nfunction ConnectButton({ hasWeb3, user, setUser }: connectButtonProps) {\n  const { status, reset } = useWallet();\n\n  const [isModalOpen, setModalOpen] = useState(false);\n  const downSM = useMediaQuery('sm', { match: 'down' })\n\n  const connectWeb3 = async (wallet) => {\n    connect(wallet.ethereum);\n    setUser(wallet.account);\n  };\n\n  const disconnectWeb3 = async () => {\n    setUser('');\n    reset();\n  };\n\n  const toggleModal = () => setModalOpen(!isModalOpen);\n\n  return status === 'connected' ? (\n    <div style={{display: 'flex', flexDirection: 'column', minHeight: '5rem', justifyContent: 'space-evenly'}}>\n      {downSM ? <></> :<IdentityBadge entity={user} /> }\n      <LinkBase onClick={disconnectWeb3} style={{marginRight: '8px', height: '24px'}}>\n        <Button shadow icon={<LogOut />} auto size=\"small\">Log Out</Button>\n      </LinkBase>\n    </div>\n  ) : (\n    <>\n      <ConnectModal visible={isModalOpen} onClose={toggleModal} onConnect={connectWeb3}/>\n      <Button icon={<IconConnect />} onClick={toggleModal} disabled={!hasWeb3} auto size=\"small\"> Connect</Button>\n    </>\n  );\n}\n\n\nexport default ConnectButton;\n","import React, { useEffect, useState } from 'react'\nimport Sidebar from './sidebar'\nimport TabbarMobile from './sidebar/tabbar-mobile'\nimport { useTheme, useMediaQuery} from '@geist-ui/react'\nimport ConnectButton from './sidebar/ConnectButton';\nimport { useHistory } from 'react-router-dom';\nimport _JSXStyle from \"styled-jsx/style\"\n\nexport interface Props {\n  hasWeb3: boolean,\n  user: string,\n  setUser: Function,\n  switchTheme: Function,\n  getStaticProps?: any\n}\n\nexport const Layout: React.FC<React.PropsWithChildren<Props>> = React.memo((props, { children }) => {\n  const [expanded, setExpanded] = useState<boolean>(false)\n  const theme = useTheme()\n  const history = useHistory()\n  const mobileTabbarClickHandler = () => {\n    setExpanded(!expanded)\n  }\n  const logoUrl = `./logo/logo.jpeg` \n  const upSM = useMediaQuery('sm', { match: 'up' })\n  useEffect(() => {})\n\n  return (\n    <div className=\"layout\">\n      <TabbarMobile onClick={mobileTabbarClickHandler} connectButton={<ConnectButton hasWeb3={props.hasWeb3} user={props.user} setUser={props.setUser} />} />\n      <aside className=\"sidebar\">\n        <div style={{\n                margin: '10px'\n              }}>\n          <a onClick={() => history.push('/')} style={{\n            marginRight: '16px', \n            height: '40px',\n            // background: '#0a133e'\n            \n            }}>\n\n            <img src={logoUrl} style={{\n              borderRadius: '50%',\n            }} height=\"25px\" alt=\"Variable Timing Dollar\"/>\n          </a>\n          <small style={{\n            position: 'absolute',\n            top: '10px'\n          }}\n          \n        >VTD</small>\n        </div>\n        {upSM ? <ConnectButton hasWeb3={props.hasWeb3} user={props.user} setUser={props.setUser} /> : <></>}\n        <Sidebar hasWeb3={props.hasWeb3} user={props.user} setUser={props.setUser} closeSideBar={mobileTabbarClickHandler} switchTheme={props.switchTheme}/>\n      </aside>\n      <div className=\"side-shadow\" />\n      <main className=\"main\">\n       {props.children}\n      </main>\n      {/* @ts-ignore */}\n      <style jsx>{`\n        .layout {\n          min-height: calc(100vh - 108px);\n          max-width: 100vw;\n          margin: 0 auto;\n          padding: 0 ${theme.layout.gap};\n          display: flex;\n          box-sizing: border-box;\n          background: ${theme.palette.background};\n        }\n\n        .sidebar {\n          width: 120px;\n          margin-right: 20px;\n          -webkit-overflow-scrolling: touch;\n          -webkit-flex-shrink: 0;\n          height: calc(100% - 2rem - 10px + ${false ? '60px' : 0});\n          position: fixed;\n          top: 10px;\n          bottom: 2rem;\n          transform: translateY(${false ? '-60px' : 0});\n          transition: transform 200ms ease-out;\n          z-index: 100;\n        }\n\n        .side-shadow {\n          width: 140px;\n          flex-shrink: 0;\n          height: 100vh;\n        }\n\n        .main {\n          display: flex;\n          max-width: calc(100% - 140px);\n          flex-direction: column;\n          padding-left: 20px;\n          padding-top: 25px;\n          flex: 0 0 100%;\n          padding-bottom: 150px;\n        }\n\n        @media only screen and (max-width: ${theme.layout.breakpointMobile}) {\n          .layout {\n            max-width: 100%;\n            width: 100%;\n            padding: 5rem 1rem;\n          }\n\n          .sidebar {\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            z-index: 10;\n            width: 100vw;\n            height: ${expanded ? '100vh' : '0'};\n            background-color: ${theme.palette.background};\n            padding: 0;\n            overflow: hidden;\n            transition: height 250ms ease;\n          }\n\n          .main {\n            width: 90vw;\n            max-width: 90vw;\n            padding: 0;\n          }\n\n          .side-shadow {\n            display: none;\n            visibility: hidden;\n          }\n        }\n      `}</style>\n    </div>\n  )\n})\n\nexport default Layout\n","import React, {useEffect, useState, useContext} from 'react';\n\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport { Root, Viewport, Theme } from '@aragon/ui';\nimport { UseWalletProvider } from 'use-wallet';\nimport { updateModalMode } from './utils/web3';\nimport { storePreference, getPreference } from './utils/storage';\nimport NavBar from './components/NavBar';\nimport Wallet from \"./components/Wallet\";\nimport Stats from \"./components/Stats\";\n// import SellPressure from \"./components/Stats/sellpressure\";\nimport EpochDetail from \"./components/EpochDetail\";\nimport CouponMarket from \"./components/CouponMarket\";\nimport Governance from \"./components/Governance\";\nimport Candidate from \"./components/Candidate\";\nimport Regulation from \"./components/Regulation\";\nimport Pool from \"./components/Pool\";\nimport HomePageNoWeb3 from \"./components/HomePageNoWeb3\";\nimport {vtdTheme, vtdLight} from \"./theme/\";\nimport {MainStoreProvider} from \"./store/MainStore\";\nimport {EpochStoreProvider} from \"./store/EpochStore\";\nimport { ButtonGroup, Button, GeistProvider, Card, Divider, CssBaseline, Page } from '@geist-ui/react'\nimport Layout from \"./components/layout/layout\"\n\n\nfunction App() {\n  const [hasWeb3, setHasWeb3] = useState(false);\n  const [user, setUser] = useState(''); // the current connected user\n  const [themeType, setThemeType] = useState(vtdTheme)\n  const switchThemes = () => {\n    // @ts-ignore\n    setThemeType(lastThemeType => (lastThemeType.name === 'vtdDark' ? vtdLight : vtdTheme))\n  }\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      if (!isCancelled) {\n        // @ts-ignore\n        setHasWeb3(typeof window.ethereum !== 'undefined');\n      }\n    }\n\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <GeistProvider theme={themeType} >\n    <Router>\n      <UseWalletProvider\n        chainId={1}\n        connectors={{\n          walletconnect: { rpcUrl: 'https://mainnet.eth.aragon.network/' },\n          walletlink: {\n            url: 'https://mainnet.eth.aragon.network/',\n            appName:'Coinbase Wallet',\n            appLogoUrl: ''\n          }\n        }}\n      >\n        {/* @ts-ignore */}\n        <MainStoreProvider><EpochStoreProvider>\n            <CssBaseline />\n\n            <Root.Provider>\n              <Viewport.Provider>\n                <Layout hasWeb3={hasWeb3} user={user} setUser={setUser} switchTheme={switchThemes}>\n                  <Theme theme={themeType.name === 'vtdDark' ? 'dark' : 'light'}>\n                  {\n                    hasWeb3 ?\n                      <Switch>\n                        <Route path=\"/dao/:override\"><Wallet user={user}/></Route>\n                        <Route path=\"/dao/\"><Wallet user={user}/></Route>\n                        <Route path=\"/epoch/\"><EpochDetail user={user}/></Route>\n                        <Route path=\"/coupons/:override\"><CouponMarket user={user}/></Route>\n                        <Route path=\"/coupons/\"><CouponMarket user={user}/></Route>\n                        <Route path=\"/governance/candidate/:candidate\"><Candidate user={user}/></Route>\n                        <Route path=\"/governance/\"><Governance user={user}/></Route>\n                        {/* <Route path=\"/trade/\"><Trade user={user}/></Route> */}\n                        <Route path=\"/supply/\"><Regulation user={user}/></Route>\n                        {/* <Route path=\"/pool/:override\"><Pool user={user}/></Route>\n                        <Route path=\"/pool/\"><Pool user={user}/></Route> */}\n                        <Route path=\"/tools/\"><Stats user={user}/></Route>\n                        {/* <Route path=\"/bondstats/\"><SellPressure/></Route> */}\n\n                        <Route path=\"/\"><Wallet user={user}/></Route>\n                      </Switch>\n                      :\n                      <Switch>\n                        <Route path=\"/\"><HomePageNoWeb3/></Route>\n                      </Switch>\n                  }\n                  </Theme>\n                </Layout>\n              </Viewport.Provider>\n            </Root.Provider>\n        </EpochStoreProvider></MainStoreProvider>\n      </UseWalletProvider>\n    </Router>\n    </GeistProvider>\n  );\n}\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'react-widgets/dist/css/react-widgets.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport Moment from 'moment'\nimport momentLocalizer from 'react-widgets-moment';\n\nMoment.locale('en')\nmomentLocalizer()\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}